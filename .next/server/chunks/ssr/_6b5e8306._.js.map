{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/Toolbar.tsx"],"sourcesContent":["import React from \"react\";\nimport Sidebar from \"./Sidebar\";\nimport { FaMousePointer, FaFont, FaPen, FaSquare, FaPalette } from \"react-icons/fa\";\n\ntype Tool = \"select\" | \"text\" | \"draw\" | \"rect\";\n\ninterface ToolbarProps {\n  currentTool: Tool;\n  setTool: (tool: Tool) => void;\n  color: string;\n  setColor: (color: string) => void;\n}\n\nconst colors = [\"#000000\", \"#FF0000\", \"#008000\", \"#0000FF\", \"#FFA500\", \"#800080\"];\ninterface ToolbarProps {\n  currentTool: Tool;\n  setTool: (tool: Tool) => void;\n  color: string;\n  setColor: (color: string) => void;\n  onExport: () => void; // 🆕 新增\n}\n\nconst Toolbar: React.FC<ToolbarProps> = ({ currentTool, setTool, color, setColor }) => {\n  return (\n    <div className=\"flex gap-2 p-2 bg-gray-100 border-b border-gray-300\">\n      <button\n        onClick={() => setTool(\"select\")}\n        className={`p-2 rounded ${currentTool === \"select\" ? \"bg-blue-200\" : \"bg-white\"}`}\n      >\n        <FaMousePointer />\n      </button>\n      <button\n        onClick={() => setTool(\"text\")}\n        className={`p-2 rounded ${currentTool === \"text\" ? \"bg-blue-200\" : \"bg-white\"}`}\n      >\n        <FaFont />\n      </button>\n      <button\n        onClick={() => setTool(\"draw\")}\n        className={`p-2 rounded ${currentTool === \"draw\" ? \"bg-blue-200\" : \"bg-white\"}`}\n      >\n        <FaPen />\n      </button>\n      <button\n        onClick={() => setTool(\"rect\")}\n        className={`p-2 rounded ${currentTool === \"rect\" ? \"bg-blue-200\" : \"bg-white\"}`}\n      >\n        <FaSquare />\n      </button>\n\n      {/* 顏色選擇器 */}\n      <div className=\"flex items-center ml-4 gap-1\">\n        <FaPalette />\n        {colors.map((c) => (\n          <div\n            key={c}\n            className={`w-5 h-5 rounded-full cursor-pointer border ${color === c ? \"border-black\" : \"border-gray-300\"}`}\n            style={{ backgroundColor: c }}\n            onClick={() => setColor(c)}\n          />\n        ))}\n      </div>\n      <div className=\"ml-auto flex gap-2\">\n  <button onClick={onExport} className=\"px-2 py-1 bg-green-500 text-white rounded\">\n    下載 PDF\n  </button>\n</div>\n\n    </div>\n    \n  );\n};\n\nexport default Toolbar;\n"],"names":[],"mappings":";;;;;;;;;;;AAaA,MAAM,SAAS;IAAC;IAAW;IAAW;IAAW;IAAW;IAAW;CAAU;AASjF,MAAM,UAAkC,CAAC,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE;IAChF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS,IAAM,QAAQ;gBACvB,WAAW,CAAC,YAAY,EAAE,gBAAgB,WAAW,gBAAgB,YAAY;0BAEjF,cAAA,8OAAC;;;;;;;;;;0BAEH,8OAAC;gBACC,SAAS,IAAM,QAAQ;gBACvB,WAAW,CAAC,YAAY,EAAE,gBAAgB,SAAS,gBAAgB,YAAY;0BAE/E,cAAA,8OAAC;;;;;;;;;;0BAEH,8OAAC;gBACC,SAAS,IAAM,QAAQ;gBACvB,WAAW,CAAC,YAAY,EAAE,gBAAgB,SAAS,gBAAgB,YAAY;0BAE/E,cAAA,8OAAC;;;;;;;;;;0BAEH,8OAAC;gBACC,SAAS,IAAM,QAAQ;gBACvB,WAAW,CAAC,YAAY,EAAE,gBAAgB,SAAS,gBAAgB,YAAY;0BAE/E,cAAA,8OAAC;;;;;;;;;;0BAIH,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;;;;oBACA,OAAO,GAAG,CAAC,CAAC,kBACX,8OAAC;4BAEC,WAAW,CAAC,2CAA2C,EAAE,UAAU,IAAI,iBAAiB,mBAAmB;4BAC3G,OAAO;gCAAE,iBAAiB;4BAAE;4BAC5B,SAAS,IAAM,SAAS;2BAHnB;;;;;;;;;;;0BAOX,8OAAC;gBAAI,WAAU;0BACnB,cAAA,8OAAC;oBAAO,SAAS;oBAAU,WAAU;8BAA4C;;;;;;;;;;;;;;;;;AAQnF;uCAEe","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/Sidebar.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as pdfjsLib from \"pdfjs-dist\";\n\ninterface SidebarProps {\n  pdfFile: File | null;\n  currentPage: number;\n  onPageClick: (pageNum: number) => void;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({ pdfFile, currentPage, onPageClick }) => {\n  const [thumbnails, setThumbnails] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (!pdfFile) return;\n\n    const reader = new FileReader();\n    reader.onload = async () => {\n      const data = new Uint8Array(reader.result as ArrayBuffer);\n      const pdf = await pdfjsLib.getDocument({ data }).promise;\n\n      const renderThumbnails = async () => {\n        const thumbs: string[] = [];\n\n        for (let i = 1; i <= pdf.numPages; i++) {\n          const page = await pdf.getPage(i);\n          const viewport = page.getViewport({ scale: 0.3 });\n\n          const canvas = document.createElement(\"canvas\");\n          const context = canvas.getContext(\"2d\")!;\n          canvas.width = viewport.width;\n          canvas.height = viewport.height;\n\n          await page.render({ canvasContext: context, viewport }).promise;\n          thumbs.push(canvas.toDataURL());\n        }\n\n        setThumbnails(thumbs);\n      };\n\n      renderThumbnails();\n    };\n\n    reader.readAsArrayBuffer(pdfFile);\n  }, [pdfFile]);\n\n  return (\n    <div className=\"w-[120px] overflow-y-auto bg-white border-r\">\n      {thumbnails.map((src, index) => (\n        <div\n          key={index}\n          className={`m-2 border rounded cursor-pointer ${\n            currentPage === index + 1 ? \"border-blue-500\" : \"border-gray-300\"\n          }`}\n          onClick={() => onPageClick(index + 1)}\n        >\n          <img src={src} alt={`Page ${index + 1}`} className=\"w-full\" />\n          <div className=\"text-center text-sm py-1\">p.{index + 1}</div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":";;;;AAAA;;;;;;;;;AASA,MAAM,UAAkC,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE;IAC5E,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAEzD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;QAEd,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACd,MAAM,OAAO,IAAI,WAAW,OAAO,MAAM;YACzC,MAAM,MAAM,MAAM,SAAS,WAAW,CAAC;gBAAE;YAAK,GAAG,OAAO;YAExD,MAAM,mBAAmB;gBACvB,MAAM,SAAmB,EAAE;gBAE3B,IAAK,IAAI,IAAI,GAAG,KAAK,IAAI,QAAQ,EAAE,IAAK;oBACtC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC;oBAC/B,MAAM,WAAW,KAAK,WAAW,CAAC;wBAAE,OAAO;oBAAI;oBAE/C,MAAM,SAAS,SAAS,aAAa,CAAC;oBACtC,MAAM,UAAU,OAAO,UAAU,CAAC;oBAClC,OAAO,KAAK,GAAG,SAAS,KAAK;oBAC7B,OAAO,MAAM,GAAG,SAAS,MAAM;oBAE/B,MAAM,KAAK,MAAM,CAAC;wBAAE,eAAe;wBAAS;oBAAS,GAAG,OAAO;oBAC/D,OAAO,IAAI,CAAC,OAAO,SAAS;gBAC9B;gBAEA,cAAc;YAChB;YAEA;QACF;QAEA,OAAO,iBAAiB,CAAC;IAC3B,GAAG;QAAC;KAAQ;IAEZ,qBACE,8OAAC;QAAI,WAAU;kBACZ,WAAW,GAAG,CAAC,CAAC,KAAK,sBACpB,8OAAC;gBAEC,WAAW,CAAC,kCAAkC,EAC5C,gBAAgB,QAAQ,IAAI,oBAAoB,mBAChD;gBACF,SAAS,IAAM,YAAY,QAAQ;;kCAEnC,8OAAC;wBAAI,KAAK;wBAAK,KAAK,CAAC,KAAK,EAAE,QAAQ,GAAG;wBAAE,WAAU;;;;;;kCACnD,8OAAC;wBAAI,WAAU;;4BAA2B;4BAAG,QAAQ;;;;;;;;eAPhD;;;;;;;;;;AAYf;uCAEe","debugId":null}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { fabric } from \"fabric\";\nimport * as pdfjsLib from \"pdfjs-dist\";\nimport \"pdfjs-dist/web/pdf_viewer.css\";\n\npdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n\ninterface PdfCanvasProps {\n  pdfFile: File | null;\n  currentPage: number;\n  onTotalPages: (total: number) => void;\n  toolMode: \"select\" | \"text\" | \"draw\" | \"rect\";\n  color: string;\n  canvasRef?: React.MutableRefObject<fabric.Canvas | null>; // 匯出畫布用\n}\n\nconst PdfCanvas: React.FC<PdfCanvasProps> = ({\n  pdfFile,\n  currentPage,\n  onTotalPages,\n  toolMode,\n  color,\n  canvasRef,\n}) => {\n  const canvasDomRef = useRef<HTMLCanvasElement>(null);\n  const fabricRef = useRef<fabric.Canvas | null>(null);\n  const [pdfDoc, setPdfDoc] = useState<pdfjsLib.PDFDocumentProxy | null>(null);\n\n  // 載入 PDF 文件\n  useEffect(() => {\n    if (!pdfFile) return;\n\n    const reader = new FileReader();\n    reader.onload = async () => {\n      const data = new Uint8Array(reader.result as ArrayBuffer);\n      const doc = await pdfjsLib.getDocument({ data }).promise;\n      setPdfDoc(doc);\n      onTotalPages(doc.numPages);\n    };\n    reader.readAsArrayBuffer(pdfFile);\n  }, [pdfFile]);\n\n  // 渲染當前頁面\n  useEffect(() => {\n    if (!pdfDoc || !canvasDomRef.current) return;\n\n    const renderPage = async () => {\n      const page = await pdfDoc.getPage(currentPage);\n      const viewport = page.getViewport({ scale: 1.5 });\n      const canvasEl = canvasDomRef.current!;\n      canvasEl.width = viewport.width;\n      canvasEl.height = viewport.height;\n\n      const context = canvasEl.getContext(\"2d\")!;\n      await page.render({ canvasContext: context, viewport }).promise;\n\n      // 建立 Fabric 畫布\n      if (fabricRef.current) fabricRef.current.dispose();\n      const fabricCanvas = new fabric.Canvas(canvasEl, {\n        selection: true,\n        backgroundColor: null,\n      });\n      fabricCanvas.setWidth(viewport.width);\n      fabricCanvas.setHeight(viewport.height);\n      fabricRef.current = fabricCanvas;\n\n      // 對外傳出 canvas 實體\n      if (canvasRef) {\n        canvasRef.current = fabricCanvas;\n      }\n    };\n\n    renderPage();\n  }, [pdfDoc, currentPage]);\n\n  // 工具模式切換（文字、筆刷、矩形、選取）\n  useEffect(() => {\n    const canvas = fabricRef.current;\n    if (!canvas) return;\n\n    canvas.isDrawingMode = false;\n    canvas.selection = false;\n    canvas.defaultCursor = \"default\";\n\n    if (toolMode === \"draw\") {\n      canvas.isDrawingMode = true;\n      canvas.freeDrawingBrush = new fabric.PencilBrush(canvas);\n      canvas.freeDrawingBrush.color = color;\n      canvas.freeDrawingBrush.width = 2;\n    } else if (toolMode === \"select\") {\n      canvas.selection = true;\n      canvas.defaultCursor = \"move\";\n    } else if (toolMode === \"text\") {\n      canvas.defaultCursor = \"text\";\n    } else if (toolMode === \"rect\") {\n      canvas.defaultCursor = \"crosshair\";\n    }\n  }, [toolMode, color]);\n\n  // 點擊畫布建立物件\n  useEffect(() => {\n    const canvas = fabricRef.current;\n    if (!canvas) return;\n\n    const handleClick = (event: fabric.IEvent) => {\n      const pointer = canvas.getPointer(event.e);\n\n      if (toolMode === \"text\") {\n        const text = new fabric.IText(\"輸入文字\", {\n          left: pointer.x,\n          top: pointer.y,\n          fill: color,\n          fontSize: 20,\n        });\n        canvas.add(text).setActiveObject(text);\n      } else if (toolMode === \"rect\") {\n        const rect = new fabric.Rect({\n          left: pointer.x,\n          top: pointer.y,\n          width: 100,\n          height: 60,\n          fill: \"transparent\",\n          stroke: color,\n          strokeWidth: 2,\n        });\n        canvas.add(rect).setActiveObject(rect);\n      }\n    };\n\n    canvas.on(\"mouse:down\", handleClick);\n    return () => {\n      canvas.off(\"mouse:down\", handleClick);\n    };\n  }, [toolMode, color]);\n\n  return (\n    <div className=\"flex justify-center p-4 bg-white\">\n      <canvas ref={canvasDomRef} />\n    </div>\n  );\n};\n\nexport default PdfCanvas;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/utils/PdfExporter.ts"],"sourcesContent":["import { fabric } from \"fabric\";\nimport jsPDF from \"jspdf\";\n\n// 將 fabric 畫布轉為 PDF 並下載\nexport const exportCanvasAsPdf = (canvas: fabric.Canvas, filename = \"edited.pdf\") => {\n  const dataUrl = canvas.toDataURL({ format: \"png\" });\n\n  const pdf = new jsPDF({\n    orientation: \"portrait\",\n    unit: \"pt\",\n    format: [canvas.getWidth(), canvas.getHeight()],\n  });\n\n  pdf.addImage(dataUrl, \"PNG\", 0, 0, canvas.getWidth(), canvas.getHeight());\n  pdf.save(filename);\n};\n"],"names":[],"mappings":";;;;;;;;;AAIO,MAAM,oBAAoB,CAAC,QAAuB,WAAW,YAAY;IAC9E,MAAM,UAAU,OAAO,SAAS,CAAC;QAAE,QAAQ;IAAM;IAEjD,MAAM,MAAM,IAAI,MAAM;QACpB,aAAa;QACb,MAAM;QACN,QAAQ;YAAC,OAAO,QAAQ;YAAI,OAAO,SAAS;SAAG;IACjD;IAEA,IAAI,QAAQ,CAAC,SAAS,OAAO,GAAG,GAAG,OAAO,QAAQ,IAAI,OAAO,SAAS;IACtE,IAAI,IAAI,CAAC;AACX","debugId":null}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/PdfEditor.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport Toolbar from \"./Toolbar\";\nimport Sidebar from \"./Sidebar\";\nimport PdfCanvas from \"./PdfCanvas\";\nimport { exportCanvasAsPdf } from \"../utils/PdfExporter\";\nimport { fabric } from \"fabric\";\n\ntype Tool = \"select\" | \"text\" | \"draw\" | \"rect\";\n\nconst PdfEditor: React.FC = () => {\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [toolMode, setToolMode] = useState<Tool>(\"select\");\n  const [color, setColor] = useState<string>(\"#000000\");\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [totalPages, setTotalPages] = useState<number>(1);\n\n  const fabricCanvasRef = useRef<fabric.Canvas | null>(null); // 儲存當前頁 canvas\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file && file.type === \"application/pdf\") {\n      setPdfFile(file);\n      setCurrentPage(1);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full w-full\">\n      {/* 工具列（含下載） */}\n      <Toolbar\n        currentTool={toolMode}\n        setTool={setToolMode}\n        color={color}\n        setColor={setColor}\n        onExport={() => {\n          if (fabricCanvasRef.current) {\n            exportCanvasAsPdf(fabricCanvasRef.current);\n          } else {\n            alert(\"尚未載入畫布！\");\n          }\n        }}\n      />\n\n      {/* 上傳與頁碼控制列 */}\n      <div className=\"flex items-center gap-4 p-2 bg-white border-b\">\n        <input type=\"file\" accept=\"application/pdf\" onChange={handleFileChange} />\n        <div className=\"ml-auto flex items-center gap-2\">\n          <button\n            disabled={currentPage <= 1}\n            onClick={() => setCurrentPage((p) => p - 1)}\n            className=\"px-2 py-1 border rounded disabled:opacity-50\"\n          >\n            上一頁\n          </button>\n          <span>第 {currentPage} / {totalPages} 頁</span>\n          <button\n            disabled={currentPage >= totalPages}\n            onClick={() => setCurrentPage((p) => p + 1)}\n            className=\"px-2 py-1 border rounded disabled:opacity-50\"\n          >\n            下一頁\n          </button>\n        </div>\n      </div>\n\n      {/* 主編輯區 */}\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* 左側縮圖 */}\n        <Sidebar\n          pdfFile={pdfFile}\n          currentPage={currentPage}\n          onPageClick={setCurrentPage}\n        />\n\n        {/* 畫布區域 */}\n        <div className=\"flex-1 overflow-auto bg-gray-100\">\n          {pdfFile ? (\n            <PdfCanvas\n              pdfFile={pdfFile}\n              currentPage={currentPage}\n              onTotalPages={setTotalPages}\n              toolMode={toolMode}\n              color={color}\n              canvasRef={fabricCanvasRef}\n            />\n          ) : (\n            <div className=\"p-4 text-gray-500 text-center\">請先上傳 PDF</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PdfEditor;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAKA,MAAM,YAAsB;IAC1B,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IACpD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAQ;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAErD,MAAM,kBAAkB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAwB,OAAO,eAAe;IAE3E,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,QAAQ,KAAK,IAAI,KAAK,mBAAmB;YAC3C,WAAW;YACX,eAAe;QACjB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC,mJAAA,CAAA,UAAO;gBACN,aAAa;gBACb,SAAS;gBACT,OAAO;gBACP,UAAU;gBACV,UAAU;oBACR,IAAI,gBAAgB,OAAO,EAAE;wBAC3B,CAAA,GAAA,iJAAA,CAAA,oBAAiB,AAAD,EAAE,gBAAgB,OAAO;oBAC3C,OAAO;wBACL,MAAM;oBACR;gBACF;;;;;;0BAIF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,MAAK;wBAAO,QAAO;wBAAkB,UAAU;;;;;;kCACtD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,UAAU,eAAe;gCACzB,SAAS,IAAM,eAAe,CAAC,IAAM,IAAI;gCACzC,WAAU;0CACX;;;;;;0CAGD,8OAAC;;oCAAK;oCAAG;oCAAY;oCAAI;oCAAW;;;;;;;0CACpC,8OAAC;gCACC,UAAU,eAAe;gCACzB,SAAS,IAAM,eAAe,CAAC,IAAM,IAAI;gCACzC,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAOL,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,mJAAA,CAAA,UAAO;wBACN,SAAS;wBACT,aAAa;wBACb,aAAa;;;;;;kCAIf,8OAAC;wBAAI,WAAU;kCACZ,wBACC,8OAAC,qJAAA,CAAA,UAAS;4BACR,SAAS;4BACT,aAAa;4BACb,cAAc;4BACd,UAAU;4BACV,OAAO;4BACP,WAAW;;;;;iDAGb,8OAAC;4BAAI,WAAU;sCAAgC;;;;;;;;;;;;;;;;;;;;;;;AAM3D;uCAEe","debugId":null}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/page.tsx"],"sourcesContent":["import PdfEditor from \"./components/PdfEditor\";\n\nexport default function EditPdfPage() {\n  return <PdfEditor />;\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBAAO,8OAAC,qJAAA,CAAA,UAAS;;;;;AACnB","debugId":null}},
    {"offset": {"line": 654, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/node_modules/next/dist/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/node_modules/next/dist/src/build/templates/app-page.ts"],"sourcesContent":["import type { LoaderTree } from '../../server/lib/app-dir-module'\nimport { AppPageRouteModule } from '../../server/route-modules/app-page/module.compiled' with { 'turbopack-transition': 'next-ssr' }\nimport { RouteKind } from '../../server/route-kind' with { 'turbopack-transition': 'next-server-utility' }\n\n// These are injected by the loader afterwards.\n\n/**\n * The tree created in next-app-loader that holds component segments and modules\n * and I've updated it.\n */\ndeclare const tree: LoaderTree\ndeclare const pages: any\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\n// INJECT:tree\n// INJECT:pages\n\nexport { tree, pages }\n\nexport { default as GlobalError } from 'VAR_MODULE_GLOBAL_ERROR' with { 'turbopack-transition': 'next-server-utility' }\n\n// These are injected by the loader afterwards.\ndeclare const __next_app_require__: (id: string | number) => unknown\ndeclare const __next_app_load_chunk__: (id: string | number) => Promise<unknown>\n\n// INJECT:__next_app_require__\n// INJECT:__next_app_load_chunk__\n\nexport const __next_app__ = {\n  require: __next_app_require__,\n  loadChunk: __next_app_load_chunk__,\n}\n\nexport * from '../../server/app-render/entry-base' with { 'turbopack-transition': 'next-server-utility' }\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n  definition: {\n    kind: RouteKind.APP_PAGE,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n    appPaths: [],\n  },\n  userland: {\n    loaderTree: tree,\n  },\n})\n"],"names":["AppPageRouteModule","RouteKind","tree","pages","default","GlobalError","__next_app__","require","__next_app_require__","loadChunk","__next_app_load_chunk__","routeModule","definition","kind","APP_PAGE","page","pathname","bundlePath","filename","appPaths","userland","loaderTree"],"mappings":";;;;;;AACA,SAASA,kBAAkB,QAAQ,2DAA2D;IAAE,wBAAwB;AAAW,EAAC;IACzE,wBAAwB;AAWnF,yEAAyE;AAEzE,cAAc;AAGd,SAASE,IAAI,EAAEC,KAAK,GAAE;IAEkD,wBAAwB;AAOhG,iCAAiC;;;;;;;;;;;;IAI/BM,WAAWC,0DAAAA;AACb,EAAC,QAAA;AAED,MAAA,OAAA;IAAc;IAAA,sCAA0C;YAAE,QAAA;YAAA;YAAA,GAAwB;gBAAsB,EAAC,UAAA;oBAAA;oBAAA,CAEzG;oBAAA,yDAA4D;wBAC5D,KAAO,KAAA,CAAMC;wBAAAA,QAAc;4BAAA,GAAIX,CAAAA,gBAAmB;4BAAA;yBAAA;;mBAChDY,YAAY;;iBACVC,MAAMZ,UAAUa,QAAQ;sBACxBC,IAAAA,CAAM,CAAA;YAAA;SAAA;;SACNC,UAAU;cACV,IAAA;YAAA,MAAA,4BAA2C;iBAC3CC,MAAAA,MAAY,EAAA;wBAAA;4BACZC,KAAAA,CAAAA,GAAAA,EAAU,0MAAVA,CAAAA,sBAAU,EAAA,MAAA,MAAA,MAAA,MAAA,EAAA,iBAAA,CAAA,CAAA,EAAA,6SAAA,CAAA,UAAA,CAAA,GAAA,CAAA,KAAA,CAAA,KAAA,MAAA,CAAA,CAAA,EAAA,CAAA,EAAA,EAAA;4BACVC,OAAAA,iTAAU,EAAE,QAAA,CAAA,KAAA,CAAA,CAAA,EAAA,6SAAA,CAAA,UAAA,CAAA,MAAA,EAAA;4BACd,MAAA,CAAA,YAAA,CAAA;wBACAC;qBAAAA,MAAU;gBACRC,YAAYnB;UACd;QAAA,UAAA;YAAA,IAAA;YAAA;SAAA;QACF,CAAE,YAAA;YAAA,IAAA;YAAA;SAAA","ignoreList":[0],"debugId":null}}]
}