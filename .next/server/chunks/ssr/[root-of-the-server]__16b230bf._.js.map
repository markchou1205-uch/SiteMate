{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { fabric } from \"fabric\"; // Corrected import\nimport { GlobalWorkerOptions, getDocument } from \"pdfjs-dist/legacy/build/pdf\";\n\nimport workerSrc from \"pdfjs-dist/build/pdf.worker.entry\";\nGlobalWorkerOptions.workerSrc = workerSrc;\n\ninterface PdfCanvasProps {\n  pdfFile: File | null;\n  currentPage: number;\n  onTotalPages: (total: number) => void;\n  toolMode: string;\n  color: string;\n  canvasRef?: React.MutableRefObject<fabric.Canvas | null>;\n  onDeletePage: (page: number) => void;\n  onSaveEdits: (dataUrl: string, page: number) => void;\n  onUpdatePdf?: (updatedPages: string[]) => void;\n  imageToInsert?: HTMLImageElement | null;\n}\n\nconst PdfCanvas: React.FC<PdfCanvasProps> = ({\n  pdfFile,\n  currentPage,\n  onTotalPages,\n  toolMode,\n  color,\n  canvasRef,\n  onDeletePage,\n  onSaveEdits,\n  onUpdatePdf,\n  imageToInsert,\n}) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [pdfDoc, setPdfDoc] = useState<any>(null);\n  const [scale, setScale] = useState(1.5);\n  const [rotation, setRotation] = useState(0);\n  const [renderedPages, setRenderedPages] = useState<string[]>([]);\n  const [history, setHistory] = useState<string[]>([]);\n  const [redoStack, setRedoStack] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (!pdfFile) return;\n    const reader = new FileReader();\n    reader.onload = async () => {\n      const data = new Uint8Array(reader.result as ArrayBuffer);\n      const doc = await getDocument({ data }).promise;\n      setPdfDoc(doc);\n      onTotalPages(doc.numPages);\n    };\n    reader.readAsArrayBuffer(pdfFile);\n  }, [pdfFile]);\n\n  useEffect(() => {\n    if (!pdfDoc || !containerRef.current) return;\n    const renderPage = async () => {\n      const page = await pdfDoc.getPage(currentPage);\n      const viewport = page.getViewport({ scale, rotation });\n\n      const tempCanvas = document.createElement(\"canvas\");\n      const ctx = tempCanvas.getContext(\"2d\")!;\n      tempCanvas.width = viewport.width;\n      tempCanvas.height = viewport.height;\n      await page.render({ canvasContext: ctx, viewport }).promise;\n\n      containerRef.current.innerHTML = \"\";\n      const fabricCanvasEl = document.createElement(\"canvas\");\n      fabricCanvasEl.width = viewport.width;\n      fabricCanvasEl.height = viewport.height;\n      containerRef.current.appendChild(fabricCanvasEl);\n\n      const fabricCanvas = new fabric.Canvas(fabricCanvasEl, {\n        // Changed from fabric.fabric.Canvas\n        selection: true,\n        backgroundColor: \"#ffffff\",\n      });\n      if (canvasRef) canvasRef.current = fabricCanvas;\n\n      const dataURL = tempCanvas.toDataURL();\n      fabric.Image.fromURL(dataURL, (bgInstance) => {\n        bgInstance.set({ selectable: false, evented: false });\n        fabricCanvas.setBackgroundImage(bgInstance, fabricCanvas.renderAll.bind(fabricCanvas));\n      });\n\n      let isDragging = false;\n      let startX = 0,\n        startY = 0;\n      let drawingObject: fabric.Object | null = null; // Changed from fabric.fabric.Object\n\n      fabricCanvas.on(\"mouse:down\", (e) => {\n        if (toolMode === \"select\") return;\n        const pointer = fabricCanvas.getPointer(e.e);\n        startX = pointer.x;\n        startY = pointer.y;\n\n        if (toolMode === \"draw\") {\n          fabricCanvas.isDrawingMode = true;\n          fabricCanvas.freeDrawingBrush = new fabric.PencilBrush(fabricCanvas); // Changed from fabric.fabric.PencilBrush\n          fabricCanvas.freeDrawingBrush.color = color;\n          fabricCanvas.freeDrawingBrush.width = 2;\n          return;\n        }\n\n        isDragging = true;\n\n        if (toolMode === \"text\") {\n          drawingObject = new fabric.Textbox(\"輸入文字\", {\n            // Changed from fabric.fabric.Textbox\n            left: startX,\n            top: startY,\n            width: 1,\n            height: 1,\n            fontSize: 20,\n            fill: color,\n          });\n        } else if (toolMode === \"rect\") {\n          drawingObject = new fabric.Rect({\n            // Changed from fabric.fabric.Rect\n            left: startX,\n            top: startY,\n            width: 1,\n            height: 1,\n            stroke: color,\n            strokeWidth: 2,\n            fill: \"transparent\",\n          });\n        } else if (toolMode === \"image\" && imageToInsert) {\n          const img = new fabric.Image(imageToInsert, {\n            // Changed from fabric.fabric.Image\n            left: startX,\n            top: startY,\n            scaleX: 0.3,\n            scaleY: 0.3,\n          });\n          fabricCanvas.add(img);\n          fabricCanvas.setActiveObject(img);\n          return;\n        }\n\n        if (drawingObject) {\n          fabricCanvas.add(drawingObject);\n        }\n      });\n\n      fabricCanvas.on(\"mouse:move\", (e) => {\n        if (!isDragging || !drawingObject) return;\n        const pointer = fabricCanvas.getPointer(e.e);\n        const width = pointer.x - startX;\n        const height = pointer.y - startY;\n        drawingObject.set({ width: Math.abs(width), height: Math.abs(height) });\n        if (width < 0) drawingObject.set({ left: pointer.x });\n        if (height < 0) drawingObject.set({ top: pointer.y });\n        drawingObject.setCoords();\n        fabricCanvas.renderAll();\n      });\n\n      fabricCanvas.on(\"mouse:up\", () => {\n        isDragging = false;\n        drawingObject = null;\n        fabricCanvas.isDrawingMode = false;\n      });\n\n      fabricCanvas.on(\"mouse:dblclick\", (e) => {\n        if (e.target && e.target.type === \"textbox\") {\n          (e.target as fabric.Textbox).enterEditing(); // Changed from fabric.fabric.Textbox\n        }\n      });\n\n      const saveSnapshot = () => {\n        const json = fabricCanvas.toJSON();\n        setHistory((prev) => [...prev, JSON.stringify(json)]);\n        setRedoStack([]);\n      };\n\n      fabricCanvas.on(\"object:added\", saveSnapshot);\n      fabricCanvas.on(\"object:modified\", saveSnapshot);\n      fabricCanvas.on(\"object:removed\", saveSnapshot);\n\n      const resultUrl = fabricCanvas.toDataURL({ format: \"png\", multiplier: 1 });\n      const updated = [...renderedPages];\n      updated[currentPage - 1] = resultUrl;\n      setRenderedPages(updated);\n      onUpdatePdf?.(updated);\n    };\n\n    renderPage();\n  }, [pdfDoc, currentPage, scale, rotation, toolMode, color, imageToInsert]);\n\n  return (\n    <div className=\"relative w-full h-full\">\n      <div\n        ref={containerRef}\n        className=\"flex justify-center items-center p-4 bg-gray-200 min-h-[600px] overflow-auto\"\n      />\n    </div>\n  );\n};\n\nexport default PdfCanvas;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\n\ninterface SidebarProps {\n  pdfFile: File | null;\n  currentPage: number;\n  onPageClick: (pageNum: number) => void;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({ pdfFile, currentPage, onPageClick }) => {\n  const [thumbnails, setThumbnails] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (!pdfFile) return;\n\n    const reader = new FileReader();\n    reader.onload = async () => {\n      const data = new Uint8Array(reader.result as ArrayBuffer);\n      const pdfjsLib = await import(\"pdfjs-dist/build/pdf\");\n      pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n\n      const pdf = await pdfjsLib.getDocument({ data }).promise;\n      const thumbs: string[] = [];\n\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const viewport = page.getViewport({ scale: 0.3 });\n\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\")!;\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n\n        await page.render({ canvasContext: ctx, viewport }).promise;\n        thumbs.push(canvas.toDataURL());\n      }\n\n      setThumbnails(thumbs);\n    };\n\n    reader.readAsArrayBuffer(pdfFile);\n  }, [pdfFile]);\n\n  return (\n    <div className=\"w-full overflow-y-auto bg-white border-r h-full\">\n      {thumbnails.map((src, index) => (\n        <div\n          key={index}\n          className={`m-2 border rounded cursor-pointer ${\n            currentPage === index + 1 ? \"border-blue-500\" : \"border-gray-300\"\n          }`}\n          onClick={() => onPageClick(index + 1)}\n        >\n          <img src={src} alt={`Page ${index + 1}`} className=\"w-full\" />\n          <div className=\"text-center text-sm py-1\">p.{index + 1}</div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAUA,MAAM,UAAkC,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE;IAC5E,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAEzD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;QAEd,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACd,MAAM,OAAO,IAAI,WAAW,OAAO,MAAM;YACzC,MAAM,WAAW;YACjB,SAAS,mBAAmB,CAAC,SAAS,GAAG,CAAC,wCAAwC,EAAE,SAAS,OAAO,CAAC,kBAAkB,CAAC;YAExH,MAAM,MAAM,MAAM,SAAS,WAAW,CAAC;gBAAE;YAAK,GAAG,OAAO;YACxD,MAAM,SAAmB,EAAE;YAE3B,IAAK,IAAI,IAAI,GAAG,KAAK,IAAI,QAAQ,EAAE,IAAK;gBACtC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC;gBAC/B,MAAM,WAAW,KAAK,WAAW,CAAC;oBAAE,OAAO;gBAAI;gBAE/C,MAAM,SAAS,SAAS,aAAa,CAAC;gBACtC,MAAM,MAAM,OAAO,UAAU,CAAC;gBAC9B,OAAO,KAAK,GAAG,SAAS,KAAK;gBAC7B,OAAO,MAAM,GAAG,SAAS,MAAM;gBAE/B,MAAM,KAAK,MAAM,CAAC;oBAAE,eAAe;oBAAK;gBAAS,GAAG,OAAO;gBAC3D,OAAO,IAAI,CAAC,OAAO,SAAS;YAC9B;YAEA,cAAc;QAChB;QAEA,OAAO,iBAAiB,CAAC;IAC3B,GAAG;QAAC;KAAQ;IAEZ,qBACE,8OAAC;QAAI,WAAU;kBACZ,WAAW,GAAG,CAAC,CAAC,KAAK,sBACpB,8OAAC;gBAEC,WAAW,CAAC,kCAAkC,EAC5C,gBAAgB,QAAQ,IAAI,oBAAoB,mBAChD;gBACF,SAAS,IAAM,YAAY,QAAQ;;kCAEnC,8OAAC;wBAAI,KAAK;wBAAK,KAAK,CAAC,KAAK,EAAE,QAAQ,GAAG;wBAAE,WAAU;;;;;;kCACnD,8OAAC;wBAAI,WAAU;;4BAA2B;4BAAG,QAAQ;;;;;;;;eAPhD;;;;;;;;;;AAYf;uCAEe","debugId":null}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/PdfEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useRef, useState } from \"react\";\nimport PdfCanvas from \"./PdfCanvas\";\nimport Sidebar from \"./Sidebar\";\nimport type { Canvas } from \"fabric\";\n\nconst PdfEditor = () => {\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [toolMode, setToolMode] = useState<\"select\" | \"text\" | \"draw\" | \"rect\">(\"select\");\n  const [color, setColor] = useState(\"#000000\"); // 修正為合法顏色格式\n  const canvasRef = useRef<Canvas | null>(null);\n  const [updatedPages, setUpdatedPages] = useState<string[]>([]);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0] || null;\n    setPdfFile(file);\n    setCurrentPage(1);\n  };\n\n  const handleDeletePage = (page: number) => {\n    const updated = updatedPages.filter((_, index) => index !== page - 1);\n    setUpdatedPages(updated);\n  };\n\n  const handleSaveEdits = (dataUrl: string, page: number) => {\n    const newPages = [...updatedPages];\n    newPages[page - 1] = dataUrl;\n    setUpdatedPages(newPages);\n  };\n\n  return (\n    <div className=\"flex w-full h-screen\">\n      <div className=\"w-[120px]\">\n        <Sidebar\n          pdfFile={pdfFile}\n          currentPage={currentPage}\n          onPageClick={setCurrentPage}\n        />\n      </div>\n\n      <div className=\"flex-1 p-4\">\n        <input type=\"file\" accept=\"application/pdf\" onChange={handleFileChange} className=\"mb-4\" />\n\n        <div className=\"mb-4 flex gap-2 items-center\">\n          <button onClick={() => setToolMode(\"select\")}>選取</button>\n          <button onClick={() => setToolMode(\"text\")}>文字</button>\n          <button onClick={() => setToolMode(\"draw\")}>手繪</button>\n          <button onClick={() => setToolMode(\"rect\")}>矩形</button>\n          <input\n            type=\"color\"\n            value={color}\n            onChange={(e) => setColor(e.target.value)}\n            title=\"選擇顏色\"\n          />\n        </div>\n\n        {pdfFile && (\n          <>\n            <PdfCanvas\n              pdfFile={pdfFile}\n              currentPage={currentPage}\n              onTotalPages={setTotalPages}\n              toolMode={toolMode}\n              color={color}\n              canvasRef={canvasRef}\n              onDeletePage={handleDeletePage}\n              onSaveEdits={handleSaveEdits}\n              onUpdatePdf={setUpdatedPages}\n            />\n\n            <div className=\"flex justify-center mt-4 gap-2\">\n              <button\n                onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\n                disabled={currentPage <= 1}\n              >\n                上一頁\n              </button>\n              <span>第 {currentPage} / {totalPages} 頁</span>\n              <button\n                onClick={() => setCurrentPage((prev) => Math.min(prev + 1, totalPages))}\n                disabled={currentPage >= totalPages}\n              >\n                下一頁\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PdfEditor;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAOA,MAAM,YAAY;IAChB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuC;IAC9E,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,YAAY,YAAY;IAC3D,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAiB;IACxC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAE7D,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;QACpC,WAAW;QACX,eAAe;IACjB;IAEA,MAAM,mBAAmB,CAAC;QACxB,MAAM,UAAU,aAAa,MAAM,CAAC,CAAC,GAAG,QAAU,UAAU,OAAO;QACnE,gBAAgB;IAClB;IAEA,MAAM,kBAAkB,CAAC,SAAiB;QACxC,MAAM,WAAW;eAAI;SAAa;QAClC,QAAQ,CAAC,OAAO,EAAE,GAAG;QACrB,gBAAgB;IAClB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,mJAAA,CAAA,UAAO;oBACN,SAAS;oBACT,aAAa;oBACb,aAAa;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,MAAK;wBAAO,QAAO;wBAAkB,UAAU;wBAAkB,WAAU;;;;;;kCAElF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,SAAS,IAAM,YAAY;0CAAW;;;;;;0CAC9C,8OAAC;gCAAO,SAAS,IAAM,YAAY;0CAAS;;;;;;0CAC5C,8OAAC;gCAAO,SAAS,IAAM,YAAY;0CAAS;;;;;;0CAC5C,8OAAC;gCAAO,SAAS,IAAM,YAAY;0CAAS;;;;;;0CAC5C,8OAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,OAAM;;;;;;;;;;;;oBAIT,yBACC;;0CACE,8OAAC,qJAAA,CAAA,UAAS;gCACR,SAAS;gCACT,aAAa;gCACb,cAAc;gCACd,UAAU;gCACV,OAAO;gCACP,WAAW;gCACX,cAAc;gCACd,aAAa;gCACb,aAAa;;;;;;0CAGf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS,IAAM,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,OAAO,GAAG;wCAC3D,UAAU,eAAe;kDAC1B;;;;;;kDAGD,8OAAC;;4CAAK;4CAAG;4CAAY;4CAAI;4CAAW;;;;;;;kDACpC,8OAAC;wCACC,SAAS,IAAM,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,OAAO,GAAG;wCAC3D,UAAU,eAAe;kDAC1B;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;uCAEe","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/page.tsx"],"sourcesContent":["\"use client\";\n\nimport PdfEditor from \"./components/PdfEditor\";\n\nexport default function EditPdfPage() {\n  return <PdfEditor />;\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,8OAAC,qJAAA,CAAA,UAAS;;;;;AACnB","debugId":null}}]
}