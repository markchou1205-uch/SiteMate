{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport { PDFDocument as PDFLibDocument } from 'pdf-lib';\nimport Sortable from 'sortablejs';\n\n// Set workerSrc for pdf.js\nif (typeof window !== 'undefined') {\n  pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n}\n\nconst translations = {\n    en: {\n        pageTitle: 'PDF Page Editor',\n        uploadLabel: 'Select PDF file to edit:',\n        deletePages: 'Delete Selected Pages',\n        downloadPdf: 'Download Edited File',\n        insertAreaTitle: 'Select file and position to insert',\n        insertBeforeLabel: 'Insert before this page',\n        insertAfterLabel: 'Insert after this page',\n        insertFileLabel: 'Select file to insert',\n        instSelect: '✔ Click page to select/deselect',\n        instDrag: '✔ Drag pages to reorder',\n        instZoom: '✔ Double click page to zoom',\n        modalCloseButton: 'Close',\n        rotateLeft: '⟲ Rotate Left 90°',\n        rotateRight: '⟳ Rotate Right 90°',\n        resetRotation: 'Reset Rotation',\n        generatingFile: 'Generating file, please wait…',\n        loadError: 'Failed to load PDF:',\n        downloadError: 'Failed to download PDF:',\n        insertError: 'Failed to insert PDF:',\n        insertConfirm: 'Please specify the page position to insert. If not specified, the document will be inserted at the end of the current document.',\n        noteInputPlaceholder: 'Note (not saved)',\n    },\n    zh: {\n        pageTitle: 'PDF 頁面編輯工具',\n        uploadLabel: '選擇要編輯的 PDF 文件：',\n        deletePages: '刪除選取頁面',\n        downloadPdf: '下載編輯後檔案',\n        insertAreaTitle: '選擇要插入的檔案及位置',\n        insertBeforeLabel: '插入此頁之前',\n        insertAfterLabel: '插入此頁之後',\n        insertFileLabel: '選擇要插入的檔案',\n        instSelect: '✔ 點選頁面以選取/取消',\n        instDrag: '✔ 拖曳頁面以調整順序',\n        instZoom: '✔ 雙擊頁面以放大預覽',\n        modalCloseButton: '關閉',\n        rotateLeft: '⟲ 左轉90°',\n        rotateRight: '⟳ 右轉90°',\n        resetRotation: '重置旋轉',\n        generatingFile: '正在產生下載檔案，請稍候…',\n        loadError: '載入失敗：',\n        downloadError: '下載失敗：',\n        insertError: '插入 PDF 失敗：',\n        insertConfirm: '請指定要插入的頁面位置，不指定則自動將文件插至本文件尾端',\n        noteInputPlaceholder: '筆記（不會儲存）',\n    }\n};\n\nexport default function PdfEditorPage() {\n  const [pages, setPages] = useState<HTMLCanvasElement[]>([]);\n  const [selectedPages, setSelectedPages] = useState<Set<number>>(new Set());\n  const [zoomedPage, setZoomedPage] = useState<HTMLCanvasElement | null>(null);\n  const [currentScale, setCurrentScale] = useState(1.5);\n  const [currentRotation, setCurrentRotation] = useState(0);\n  const [currentLanguage, setCurrentLanguage] = useState<'en' | 'zh'>('en');\n  const [texts, setTexts] = useState(translations.en);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [showInsertArea, setShowInsertArea] = useState(false);\n  const [insertPosition, setInsertPosition] = useState<'before' | 'after'>('before');\n\n  const previewContainerRef = useRef<HTMLDivElement>(null);\n  const zoomCanvasRef = useRef<HTMLCanvasElement>(null);\n  const pdfUploadRef = useRef<HTMLInputElement>(null);\n  const insertPdfRef = useRef<HTMLInputElement>(null);\n  \n  const sortableInstanceRef = useRef<Sortable | null>(null);\n\n  useEffect(() => {\n    setTexts(translations[currentLanguage]);\n  }, [currentLanguage]);\n\n  const updateLanguage = (lang: 'en' | 'zh') => {\n    setCurrentLanguage(lang);\n  };\n  \n  const renderPagePreviews = useCallback(() => {\n    if (!previewContainerRef.current) return;\n\n    // Destroy previous Sortable instance if it exists\n    if (sortableInstanceRef.current) {\n      sortableInstanceRef.current.destroy();\n      sortableInstanceRef.current = null;\n    }\n    \n    previewContainerRef.current.innerHTML = ''; // Clear previous previews\n\n    pages.forEach((pageCanvas, index) => {\n      const previewDisplayCanvas = document.createElement('canvas');\n      const previewCtx = previewDisplayCanvas.getContext('2d');\n      if (!previewCtx) return;\n\n      previewDisplayCanvas.width = pageCanvas.width;\n      previewDisplayCanvas.height = pageCanvas.height;\n      previewCtx.drawImage(pageCanvas, 0, 0);\n      previewDisplayCanvas.style.width = (pageCanvas.width * 0.4) + 'px';\n      previewDisplayCanvas.style.height = (pageCanvas.height * 0.4) + 'px';\n\n      const wrapper = document.createElement('div');\n      wrapper.className = 'page-preview';\n      if (selectedPages.has(index)) {\n        wrapper.classList.add('selected');\n      }\n      wrapper.appendChild(previewDisplayCanvas);\n      wrapper.dataset.index = index.toString();\n\n      wrapper.addEventListener('click', () => {\n        const newSelectedPages = new Set(selectedPages);\n        if (newSelectedPages.has(index)) {\n          newSelectedPages.delete(index);\n        } else {\n          // Single selection behavior\n          newSelectedPages.clear();\n          newSelectedPages.add(index);\n        }\n        setSelectedPages(newSelectedPages);\n        // Re-render to update classes (or manipulate classes directly)\n         Array.from(previewContainerRef.current?.children || []).forEach(child => {\n            const childIndex = parseInt((child as HTMLElement).dataset.index || '-1');\n            if (newSelectedPages.has(childIndex)) {\n                child.classList.add('selected');\n            } else {\n                child.classList.remove('selected');\n            }\n        });\n      });\n\n      wrapper.addEventListener('dblclick', () => {\n        setZoomedPage(pageCanvas);\n        setCurrentScale(1.5);\n        setCurrentRotation(0);\n        const modalOverlay = document.getElementById('modalOverlay');\n        if (modalOverlay) modalOverlay.style.display = 'flex';\n      });\n      previewContainerRef.current?.appendChild(wrapper);\n    });\n\n    if (pages.length > 0 && previewContainerRef.current) {\n      sortableInstanceRef.current = Sortable.create(previewContainerRef.current, {\n        animation: 150,\n        onEnd: (evt) => {\n          if (evt.oldIndex === undefined || evt.newIndex === undefined) return;\n          const reorderedPages = Array.from(pages);\n          const [movedItem] = reorderedPages.splice(evt.oldIndex, 1);\n          reorderedPages.splice(evt.newIndex, 0, movedItem);\n          setPages(reorderedPages);\n        }\n      });\n    }\n  }, [pages, selectedPages]);\n\n\n  useEffect(() => {\n    renderPagePreviews();\n  }, [pages, selectedPages, renderPagePreviews]);\n\n\n  useEffect(() => {\n    if (zoomedPage && zoomCanvasRef.current) {\n      const canvas = zoomCanvasRef.current;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n\n      const baseWidth = zoomedPage.width;\n      const baseHeight = zoomedPage.height;\n      \n      let displayWidth = baseWidth * currentScale;\n      let displayHeight = baseHeight * currentScale;\n\n      canvas.width = currentRotation % 180 === 0 ? displayWidth : displayHeight;\n      canvas.height = currentRotation % 180 === 0 ? displayHeight : displayWidth;\n      \n      ctx.save();\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.translate(canvas.width / 2, canvas.height / 2);\n      ctx.rotate((currentRotation * Math.PI) / 180);\n      ctx.drawImage(\n        zoomedPage,\n        -displayWidth / 2,\n        -displayHeight / 2,\n        displayWidth,\n        displayHeight\n      );\n      ctx.restore();\n    }\n  }, [zoomedPage, currentScale, currentRotation]);\n\n  const handlePdfUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    setIsLoading(true);\n    try {\n      const arrayBuffer = await file.arrayBuffer();\n      const pdfDocProxy = await pdfjsLib.getDocument({\n        data: arrayBuffer,\n        cMapUrl: `//cdn.jsdelivr.net/npm/pdfjs-dist@${pdfjsLib.version}/cmaps/`,\n        cMapPacked: true,\n      }).promise;\n      \n      const numPages = pdfDocProxy.numPages;\n      const loadedCanvases: HTMLCanvasElement[] = [];\n      for (let i = 1; i <= numPages; i++) {\n        const page = await pdfDocProxy.getPage(i);\n        const viewport = page.getViewport({ scale: 1 }); // Render at high quality initially\n        const canvas = document.createElement('canvas');\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) continue;\n        await page.render({ canvasContext: ctx, viewport }).promise;\n        loadedCanvases.push(canvas);\n      }\n      setPages(loadedCanvases);\n      setSelectedPages(new Set());\n      setShowInsertArea(true);\n    } catch (err: any) {\n      alert(`${texts.loadError} ${err.message}`);\n    } finally {\n      setIsLoading(false);\n      if (pdfUploadRef.current) pdfUploadRef.current.value = '';\n    }\n  };\n\n  const handleDeletePages = () => {\n    const newPages = pages.filter((_, idx) => !selectedPages.has(idx));\n    setPages(newPages);\n    setSelectedPages(new Set());\n  };\n\n  const handleDownloadPdf = async () => {\n    if (pages.length === 0) return;\n    setIsDownloading(true);\n    try {\n      await new Promise(resolve => setTimeout(resolve, 100)); \n      const pdfDocOut = await PDFLibDocument.create();\n      for (let canvas of pages) {\n        const imgDataUrl = canvas.toDataURL('image/png');\n        const pngImage = await pdfDocOut.embedPng(imgDataUrl);\n        const page = pdfDocOut.addPage([canvas.width, canvas.height]);\n        page.drawImage(pngImage, { x: 0, y: 0, width: canvas.width, height: canvas.height });\n      }\n      const pdfBytes = await pdfDocOut.save();\n      const blob = new Blob([pdfBytes], { type: 'application/pdf' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'edited.pdf';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch (err: any) {\n      alert(`${texts.downloadError} ${err.message}`);\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n\n  const handleInsertPdf = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    setIsLoading(true);\n    try {\n      const arrayBuffer = await file.arrayBuffer();\n      const insertDocProxy = await pdfjsLib.getDocument({\n        data: arrayBuffer,\n        cMapUrl: `//cdn.jsdelivr.net/npm/pdfjs-dist@${pdfjsLib.version}/cmaps/`,\n        cMapPacked: true,\n      }).promise;\n\n      const insertCanvases: HTMLCanvasElement[] = [];\n      for (let i = 1; i <= insertDocProxy.numPages; i++) {\n        const page = await insertDocProxy.getPage(i);\n        const viewport = page.getViewport({ scale: 1 }); // Render at high quality\n        const canvas = document.createElement('canvas');\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) continue;\n        await page.render({ canvasContext: ctx, viewport }).promise;\n        insertCanvases.push(canvas);\n      }\n\n      let insertIdx = pages.length;\n      if (selectedPages.size > 0) {\n        const firstSelected = Math.min(...Array.from(selectedPages));\n        insertIdx = insertPosition === 'before' ? firstSelected : firstSelected + 1;\n      } else {\n        if (typeof window !== 'undefined' && !window.confirm(texts.insertConfirm)) {\n          setIsLoading(false);\n          return;\n        }\n      }\n      \n      const newPages = [...pages];\n      newPages.splice(insertIdx, 0, ...insertCanvases);\n      setPages(newPages);\n      setSelectedPages(new Set());\n\n    } catch (err: any) {\n      alert(`${texts.insertError} ${err.message}`);\n    } finally {\n      setIsLoading(false);\n      if (insertPdfRef.current) insertPdfRef.current.value = '';\n    }\n  };\n  \n  const closeModal = () => {\n    const modalOverlay = document.getElementById('modalOverlay');\n    if (modalOverlay) modalOverlay.style.display = 'none';\n    setZoomedPage(null);\n  };\n\n  return (\n    <>\n      <style jsx global>{`\n        body {\n          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n          padding: 20px;\n          background-color: #f8f9fa;\n        }\n        h1 {\n          margin-bottom: 10px;\n        }\n        #pdfUploadInput, #insertPdfInput { /* Use different IDs for inputs if needed */\n          margin-bottom: 10px;\n        }\n        #insertControls {\n          /* display: none; Replaced by showInsertArea state */\n          margin-top: 10px;\n        }\n        #insertControls label {\n          margin-right: 10px;\n        }\n        #topControls {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          flex-wrap: wrap;\n          gap: 10px;\n          margin-bottom: 10px;\n        }\n        #controlButtons button {\n          padding: 8px 16px;\n          border: none;\n          background-color: #007bff;\n          color: white;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n        }\n        #controlButtons button:hover {\n          background-color: #0056b3;\n        }\n        #instructions {\n          margin-bottom: 10px;\n          background: #e9ecef;\n          padding: 10px;\n          border-radius: 5px;\n          font-size: 14px;\n        }\n        #previewContainer { /* This ID is used by ref */\n          display: flex;\n          flex-wrap: wrap;\n          gap: 10px;\n          margin-top: 10px; /* Adjusted margin */\n          min-height: 200px; /* Ensure it has some height */\n        }\n        .page-preview {\n          position: relative;\n          border: 2px solid #dee2e6;\n          border-radius: 4px;\n          cursor: pointer;\n          background: white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          transition: border 0.2s;\n        }\n        .page-preview.selected {\n          border: 3px solid #dc3545;\n        }\n        #modalOverlay {\n          position: fixed;\n          top: 0; left: 0;\n          width: 100%; height: 100%;\n          background: rgba(0,0,0,0.5);\n          display: none; /* Controlled by dblclick */\n          justify-content: center;\n          align-items: center;\n          z-index: 1000;\n        }\n        #modalContent {\n          background: white;\n          padding: 20px;\n          border-radius: 8px;\n          width: 80%;\n          max-width: 800px;\n          height: auto; \n          overflow: auto; \n        }\n        #modalContent canvas { /* This ID is used by ref */\n          width: 100%;\n          height: auto;\n          max-width: 100%;\n          max-height: 90vh;\n          display: block;\n          object-fit: contain; \n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        #loadingSpinnerContainer div { /* Renamed for clarity */\n          border: 6px solid #f3f3f3;\n          border-top: 6px solid #3498db;\n          border-radius: 50%;\n          width: 40px;\n          height: 40px;\n          animation: spin 1s linear infinite;\n        }\n        .spinner-container {\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          z-index: 9999;\n        }\n        .spinner {\n          border: 6px solid #f3f3f3;\n          border-top: 6px solid #3498db;\n          border-radius: 50%;\n          width: 40px;\n          height: 40px;\n          animation: spin 1s linear infinite;\n        }\n        button { /* General button styling, can be refined with Tailwind/ShadCN later */\n          margin-right: 8px;\n          padding: 6px 12px;\n          font-size: 14px;\n          border-radius: 4px;\n          border: none;\n          background-color: #007bff;\n          color: white;\n          cursor: pointer;\n        }\n        button:hover {\n          background-color: #0056b3;\n        }\n        #languageButtons button {\n          padding: 6px 12px;\n          font-size: 12px;\n        }\n        #languageButtons button:hover {\n         background-color: #0056b3;\n         opacity: 0.9;\n        }\n        #modalContent button {\n          padding: 6px 14px;\n          font-size: 14px;\n          background-color: #007bff;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        #modalContent button:hover {\n          background-color: #0056b3;\n        }\n        #downloadOverlayContainer { /* Renamed for clarity */\n          display:none;\n          position:fixed;\n          top:0;left:0;\n          width:100%;height:100%;\n          z-index:10000;\n          background:rgba(0,0,0,0.5);\n          color:white;\n          /* display:flex; Replaced by isDownloading state */\n          align-items:center;\n          justify-content:center;\n          flex-direction:column;\n          font-size:24px;\n          font-weight:bold;\n        }\n      `}</style>\n      <div className=\"p-4\">\n        <h1>{texts.pageTitle}</h1>\n        <div id=\"topControls\">\n          <div>\n            <label htmlFor=\"pdfUploadInput\">{texts.uploadLabel}</label>\n            <input type=\"file\" id=\"pdfUploadInput\" accept=\"application/pdf\" onChange={handlePdfUpload} ref={pdfUploadRef} />\n          </div>\n          <div id=\"controlButtons\">\n            <button onClick={handleDeletePages} disabled={selectedPages.size === 0 || pages.length === 0}>{texts.deletePages}</button>\n            <button onClick={handleDownloadPdf} disabled={pages.length === 0}>{texts.downloadPdf}</button>\n          </div>\n          <div id=\"languageButtons\">\n            <button onClick={() => updateLanguage('en')}>English</button>\n            <button onClick={() => updateLanguage('zh')}>中文</button>\n          </div>\n        </div>\n\n        <hr />\n\n        {showInsertArea && (\n          <div id=\"insertArea\">\n            <h3>{texts.insertAreaTitle}</h3>\n            <div id=\"insertControls\">\n              <label>\n                <input \n                  type=\"radio\" \n                  name=\"insertPosition\" \n                  value=\"before\" \n                  checked={insertPosition === 'before'} \n                  onChange={() => setInsertPosition('before')}\n                /> {texts.insertBeforeLabel}\n              </label>\n              <label>\n                <input \n                  type=\"radio\" \n                  name=\"insertPosition\" \n                  value=\"after\" \n                  checked={insertPosition === 'after'}\n                  onChange={() => setInsertPosition('after')}\n                /> {texts.insertAfterLabel}\n              </label>\n            </div>\n            <input type=\"file\" id=\"insertPdfInput\" accept=\"application/pdf\" onChange={handleInsertPdf} ref={insertPdfRef}/>\n            <span>{texts.insertFileLabel}</span>\n          </div>\n        )}\n\n        <div id=\"instructions\">\n          <p>{texts.instSelect}</p>\n          <p>{texts.instDrag}</p>\n          <p>{texts.instZoom}</p>\n        </div>\n\n        <div id=\"previewContainer\" ref={previewContainerRef}></div>\n\n        <div id=\"modalOverlay\">\n          <div id=\"modalContent\">\n            <canvas id=\"zoomCanvas\" ref={zoomCanvasRef} style={{willReadFrequently: \"true\"} as any}></canvas>\n            <input type=\"text\" id=\"noteInput\" placeholder={texts.noteInputPlaceholder} />\n            <button onClick={closeModal}>{texts.modalCloseButton}</button>\n            <div id=\"previewControls\" style={{ marginTop: '12px', display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\n              <button onClick={() => setCurrentRotation((r) => (r - 90 + 360) % 360)}>{texts.rotateLeft}</button>\n              <button onClick={() => setCurrentRotation((r) => (r + 90) % 360)}>{texts.rotateRight}</button>\n              <button onClick={() => setCurrentRotation(0)}>{texts.resetRotation}</button>\n            </div>\n          </div>\n        </div>\n\n        {isDownloading && (\n          <div id=\"downloadOverlayContainer\" style={{display: 'flex'}}>\n            <div className=\"spinner\"></div>\n            <div style={{ marginTop: '12px' }}>{texts.generatingFile}</div>\n          </div>\n        )}\n\n        {isLoading && (\n          <div id=\"loadingSpinnerContainer\" style={{display: 'block'}} className=\"spinner-container\">\n            <div className=\"spinner\"></div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}