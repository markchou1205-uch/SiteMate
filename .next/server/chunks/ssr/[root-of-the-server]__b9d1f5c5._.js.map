{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/radio-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;AACA,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,YAA6B;YAAC,WAAU;sBACvC,cAAA,8OAAC,sMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;AACA,eAAe,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/accordion.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,YAAY,qKAAA,CAAA,OAAuB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG;AAE5B,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,qKAAA,CAAA,SAAyB;QAAC,WAAU;kBACnC,cAAA,8OAAC,qKAAA,CAAA,UAA0B;YACzB,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,gIACA;YAED,GAAG,KAAK;;gBAER;8BACD,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,iBAAiB,WAAW,GAAG,qKAAA,CAAA,UAA0B,CAAC,WAAW;AAErE,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,qKAAA,CAAA,UAA0B;QACzB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,8OAAC;YAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,aAAa;sBAAa;;;;;;;;;;;AAIjD,iBAAiB,WAAW,GAAG,qKAAA,CAAA,UAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;0BAET,8OAAC,kKAAA,CAAA,QAAqB;gBAAC,WAAU;0BAC/B,cAAA,8OAAC,kKAAA,CAAA,QAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,8OAAC,kKAAA,CAAA,QAAqB;gBAAC,WAAU;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAoB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 608, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,qKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 639, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["\nimport { initializeApp, getApps, getApp, type FirebaseApp } from 'firebase/app';\nimport { getStorage } from 'firebase/storage';\nimport { getFunctions } from 'firebase/functions';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nconsole.log(\"[firebase.ts] Client-side Firebase Config being used for initializeApp:\", JSON.stringify(firebaseConfig));\n\n// Check if all config values are present (basic check)\nconst allConfigValuesPresent = Object.values(firebaseConfig).every(value => value && typeof value === 'string' && value.trim() !== '' && value !== 'undefined');\nconsole.log(\"[firebase.ts] All config values present for initializeApp check (value !== 'undefined'):\", allConfigValuesPresent);\n\n\nlet app: FirebaseApp | undefined; // app can be undefined if config is not complete\nif (allConfigValuesPresent) {\n  if (!getApps().length) {\n    try {\n      app = initializeApp(firebaseConfig);\n      console.log(\"[firebase.ts] Firebase app initialized successfully.\");\n    } catch (error) {\n      console.error(\"[firebase.ts] Error initializing Firebase app:\", error);\n      // app will remain undefined\n    }\n  } else {\n    app = getApp();\n    console.log(\"[firebase.ts] Firebase app already initialized, getting existing app.\");\n  }\n} else {\n  console.warn(\"[firebase.ts] Firebase config incomplete based on direct process.env values. Firebase app NOT initialized. Check NEXT_PUBLIC_ environment variables. Values received:\", JSON.stringify({\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  }));\n}\n\nconst storage = app ? getStorage(app) : undefined; // Only get storage if app is initialized\nconst functions = app ? getFunctions(app) : undefined; // Only get functions if app is initialized\n\nexport { app, storage, functions };\n"],"names":[],"mappings":";;;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,QAAQ,GAAG,CAAC,2EAA2E,KAAK,SAAS,CAAC;AAEtG,uDAAuD;AACvD,MAAM,yBAAyB,OAAO,MAAM,CAAC,gBAAgB,KAAK,CAAC,CAAA,QAAS,SAAS,OAAO,UAAU,YAAY,MAAM,IAAI,OAAO,MAAM,UAAU;AACnJ,QAAQ,GAAG,CAAC,4FAA4F;AAGxG,IAAI,KAA8B,iDAAiD;AACnF,IAAI,wBAAwB;IAC1B,IAAI,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,EAAE;QACrB,IAAI;YACF,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;YACpB,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kDAAkD;QAChE,4BAA4B;QAC9B;IACF,OAAO;QACL,MAAM,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;QACX,QAAQ,GAAG,CAAC;IACd;AACF,OAAO;IACL,QAAQ,IAAI,CAAC,yKAAyK,KAAK,SAAS,CAAC;QACnM,MAAM;QACN,UAAU;QACV,SAAS;QACT,aAAa;QACb,iBAAiB;QACjB,KAAK;IACP;AACF;AAEA,MAAM,UAAU,MAAM,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD,EAAE,OAAO,WAAW,yCAAyC;AAC5F,MAAM,YAAY,MAAM,CAAA,GAAA,0KAAA,CAAA,eAAY,AAAD,EAAE,OAAO,WAAW,2CAA2C","debugId":null}},
    {"offset": {"line": 726, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport type { PDFDocumentProxy as PDFDocumentProxyType } from 'pdfjs-dist';\nimport { PDFDocument as PDFLibDocument, StandardFonts, rgb, degrees, grayscale, pushGraphicsState, popGraphicsState, setOpacity } from 'pdf-lib';\nimport Sortable from 'sortablejs';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader as ShadAlertDialogHeader, AlertDialogTitle as ShadAlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, RotateCcw, RotateCw, X, Trash2, Download, Upload, Info, Shuffle, Search, Edit3, Droplet, LogIn, LogOut, UserCircle, FileText, FileType, FileDigit, Lock, MenuSquare, Columns, ShieldCheck, FilePlus, ListOrdered, Move, CheckSquare, Image as ImageIcon, Minimize2, Palette, FontSize, Eye, Scissors, LayoutGrid, PanelLeft, FilePlus2, Combine, Type, ImagePlus, Link as LinkIcon, MessageSquarePlus, ZoomIn, ZoomOut, Expand } from 'lucide-react';\nimport { Slider } from \"@/components/ui/slider\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nimport { storage, functions as firebaseFunctions, app as firebaseApp } from '@/lib/firebase'; // Firebase SDK\nimport { ref as storageRef, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { cn } from '@/lib/utils';\n\n\nif (typeof window !== 'undefined') {\n  pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n}\n\ninterface PageObject {\n  id: string;\n  sourceCanvas: HTMLCanvasElement;\n  rotation: number; // 0, 90, 180, 270\n}\n\ninterface TextAnnotation {\n  id: string;\n  pageIndex: number;\n  text: string;\n  topRatio: number;\n  leftRatio: number;\n  fontSize: number;\n  color: string;\n}\n\nconst translations = {\n    en: {\n        pageTitle: 'DocuPilot',\n        uploadLabel: 'Select PDF file to edit:',\n        deletePages: 'Delete Selected Pages',\n        splitPages: 'Split Selected',\n        downloadPdf: 'Download Edited PDF',\n        downloadTxt: 'Download as TXT',\n        convertToWord: 'Convert to Word',\n        convertingToWord: 'Converting to Word...',\n        insertAreaTitle: 'Select PDF to Insert',\n        insertOptionsTitle: 'Insertion Options',\n        insertBeforeLabel: 'Insert before selected page',\n        insertAfterLabel: 'Insert after selected page',\n        instSelect: 'Click page to select/deselect.',\n        instDrag: 'Drag pages to reorder.',\n        instZoom: 'Use mouse wheel to zoom.',\n        modalCloseButton: 'Close',\n        rotateLeft: 'Rotate Left 90°',\n        rotateRight: 'Rotate Right 90°',\n        resetRotation: 'Reset Rotation & Zoom',\n        generatingFile: 'Generating file, please wait…',\n        extractingText: 'Extracting text, please wait...',\n        loadError: 'Failed to load PDF',\n        downloadError: 'Failed to download PDF',\n        splitPdfSuccess: 'Split PDF downloaded successfully!',\n        splitPdfError: 'Failed to split PDF',\n        txtDownloadError: 'Failed to download TXT',\n        wordConvertError: 'Failed to convert to Word',\n        pdfCoMethodNotFoundError: 'PDF.co Error: \"Method Not Found\" or API key issue. Please verify your PDF.co API Key is correct and the API endpoint in the Cloud Function is valid. Check PDF.co documentation.',\n        wordConvertLimitTitle: 'Conversion Limit Reached',\n        wordConvertLimitDescription: 'Guests can convert one PDF to Word per day. Please log in for unlimited conversions.',\n        wordConvertSuccess: 'Conversion successful!',\n        downloadWordFile: 'Click here to download Word file',\n        insertError: 'Failed to insert PDF',\n        insertConfirmTitle: 'Confirm Insert Position',\n        insertConfirmDescription: 'No page is selected. The new PDF will be inserted at the end of the current document. Continue?',\n        confirm: 'Confirm',\n        cancel: 'Cancel',\n        noteInputPlaceholder: 'Add a temporary note (not saved in PDF)',\n        pageManagement: 'Page Management',\n        fileOperations: 'File Operations',\n        watermarkSectionTitle: 'Watermark',\n        watermarkInputPlaceholder: 'Enter watermark text',\n        watermarkFontSizeLabel: 'Font Size',\n        watermarkColorLabel: 'Color',\n        watermarkOpacityLabel: 'Opacity',\n        watermarkTypeLabel: 'Watermark Type',\n        watermarkTypeText: 'Text',\n        watermarkTypeImage: 'Image',\n        watermarkImageLabel: 'Select Image',\n        watermarkPreviewButton: 'Preview & Position Watermark',\n        watermarkPreviewModalTitle: 'Preview & Position Watermark',\n        watermarkPreviewInfo: 'Drag watermark to desired position. Adjust style below. This position will be applied to all pages.',\n        watermarkConfirmPosition: 'Confirm Position & Style',\n        noPdfForWatermarkPreview: 'Upload a PDF to preview watermark.',\n        pageNumberingSectionTitle: 'Page Numbering',\n        enablePageNumbering: 'Enable Page Numbering',\n        pageNumberPosition: 'Position',\n        pageNumberStart: 'Start Number',\n        pageNumberFontSize: 'Font Size',\n        pageNumberMargin: 'Margin (pt)',\n        pageNumberFormat: 'Format ({page}, {total})',\n        pageNumberFormatPlaceholder: '{page} / {total}',\n        protectPdfSectionTitle: 'Protect PDF',\n        enablePdfProtection: 'Enable PDF Protection',\n        pdfPassword: 'Password',\n        pdfPasswordPlaceholder: 'Enter password',\n        page: 'Page',\n        uploadPdfFirstShort: 'Upload a PDF to start editing.',\n        uploadPdfFirst: 'Please upload a PDF first to enable editing features.',\n        noPagesToDownload: 'No pages to download.',\n        noPdfToExtractText: 'No PDF loaded to extract text from.',\n        noPdfToConvert: 'No PDF loaded to convert.',\n        noPageSelected: 'No page selected.',\n        loadingPdf: 'Loading PDF...',\n        insertingPdf: 'Inserting PDF...',\n        previewOf: 'Preview of Page',\n        dropFileHere: 'Drop PDF file here or click to upload',\n        dropInsertFileHere: 'Drop PDF here or click to select for insertion',\n        downloadLimitTitle: 'Download Limit Reached',\n        downloadLimitDescription: 'You have reached your daily download limit (3 downloads). Please log in or upgrade for unlimited downloads.',\n        loggedInAs: 'Logged in as User',\n        login: 'Login',\n        logout: 'Logout',\n        guest: 'Guest',\n        firebaseNotConfigured: `Firebase Frontend SDK is not fully configured. Please ensure all Firebase environment variables (%MISSING_KEYS%) are correctly set and propagated to the client. This might require checking build logs or App Hosting settings.`,\n        firebaseSdkInitError: \"Firebase SDK could not be initialized properly (services like Storage or Functions might be unavailable). 'Convert to Word' and other Firebase features might be disabled. Check browser console for details from firebase.ts.\",\n        zoomDialogDescription: 'View a larger preview of the selected page. You can rotate the page here. Use mouse wheel to zoom.',\n        bottomLeft: 'Bottom Left',\n        bottomCenter: 'Bottom Center',\n        bottomRight: 'Bottom Right',\n        middleLeft: 'Middle Left',\n        middleRight: 'Middle Right',\n        topLeft: 'Top Left',\n        topCenter: 'Top Center',\n        topRight: 'Top Right',\n        pdfEditingTools: 'PDF Tools',\n        downloadAndConvertTitle: 'Download & Convert',\n        startEditingYourPdf: 'Start Editing Your PDF',\n        pagesLoaded: 'page(s) loaded',\n        pageSelectedSuffix: 'selected',\n        featureEdit: 'Edit',\n        featureMerge: 'Merge',\n        featurePageNum: 'Page #',\n        featureProtect: 'Protect',\n        featureConvert: 'Convert',\n        accordionDocEnhanceProtect: 'Document Enhancements & Protection',\n        imageToPdfTitle: 'Image to PDF',\n        selectImagesLabel: 'Select image(s):',\n        dropImagesHere: 'Drop image(s) here or click to upload',\n        convertToPdfButton: 'Convert to PDF',\n        generatingPdfFromImages: 'Generating PDF from images...',\n        imageToPdfSuccess: 'PDF generated from images successfully!',\n        imageToPdfError: 'Error generating PDF from images',\n        noImagesSelected: 'No images selected to convert.',\n        pdfCompressionTitle: 'PDF Compression',\n        selectPdfToCompressLabel: 'Select PDF to compress:',\n        dropPdfToCompressHere: 'Drop PDF here or click to select for compression',\n        compressPdfButton: 'Compress PDF',\n        compressingPdf: 'Compressing PDF...',\n        pdfCompressionSuccess: 'PDF processed successfully!',\n        pdfCompressionError: 'Error processing PDF',\n        pdfCompressionNote: 'Note: This uses pdf-lib to re-save the PDF. File size reduction varies. useObjectStreams:false is applied.',\n        noPdfToCompress: 'No PDF selected to compress.',\n        comingSoon: 'Coming Soon!',\n        featureNotImplemented: 'feature is not yet implemented.',\n        editorMode: 'Editor Mode',\n        gridMode: 'Grid Mode',\n        deletePageConfirmTitle: 'Delete Page?',\n        deletePageConfirmDescription: 'Are you sure you want to delete this page? This action cannot be undone.',\n        toolRotate: 'Rotate',\n        toolDelete: 'Delete',\n        toolAddBlank: 'Add Blank',\n        toolMerge: 'Merge',\n        toolSplit: 'Split',\n        toolWatermark: 'Watermark',\n        toolInsertText: 'Insert Text',\n        toolInsertImage: 'Insert Image',\n        toolInsertLink: 'Insert Link',\n        toolInsertComment: 'Comment',\n        zoomIn: 'Zoom In',\n        zoomOut: 'Zoom Out',\n        fitToWidth: 'Fit to Width',\n        fitToPage: 'Fit to Page',\n        textProperties: 'Text Properties',\n        textAnnotationContent: 'Text Content',\n        textAnnotationSample: 'Sample Text',\n    },\n    zh: {\n        pageTitle: 'DocuPilot 文件助手',\n        uploadLabel: '選擇要編輯的 PDF 檔案：',\n        deletePages: '刪除選取的頁面',\n        splitPages: '拆分選定頁面',\n        downloadPdf: '下載編輯後 PDF',\n        downloadTxt: '下載為 TXT 檔案',\n        convertToWord: '轉換為 Word',\n        convertingToWord: '正在轉換為 Word...',\n        insertAreaTitle: '選擇要插入的 PDF',\n        insertOptionsTitle: '插入選項',\n        insertBeforeLabel: '插入此頁之前',\n        insertAfterLabel: '插入此頁之後',\n        instSelect: '點選頁面以選取/取消。',\n        instDrag: '拖曳頁面以調整順序。',\n        instZoom: '使用滑鼠滾輪縮放。',\n        modalCloseButton: '關閉',\n        rotateLeft: '向左旋轉90°',\n        rotateRight: '向右旋轉90°',\n        resetRotation: '重置旋轉與縮放',\n        generatingFile: '正在產生檔案，請稍候…',\n        extractingText: '正在提取文字，請稍候...',\n        loadError: '載入 PDF 失敗',\n        downloadError: '下載 PDF 失敗',\n        splitPdfSuccess: 'PDF 拆分下載成功！',\n        splitPdfError: '拆分 PDF 失敗',\n        txtDownloadError: '下載 TXT 失敗',\n        wordConvertError: '轉換 Word 失敗',\n        pdfCoMethodNotFoundError: 'PDF.co 錯誤：「方法未找到」或 API 金鑰問題。請確認您的 PDF.co API 金鑰是否正確，以及 Cloud Function 中的 API 端點是否有效。請查閱 PDF.co 文件。',\n        wordConvertLimitTitle: '已達轉換上限',\n        wordConvertLimitDescription: '訪客每日僅可轉換一份 PDF 至 Word。請登入以享受無限轉換次數。',\n        wordConvertSuccess: '轉換成功！',\n        downloadWordFile: '點此下載 Word 檔案',\n        insertError: '插入 PDF 失敗',\n        insertConfirmTitle: '確認插入位置',\n        insertConfirmDescription: '尚未選取頁面。新 PDF 將插入到文件的末尾。是否繼續？',\n        confirm: '確認',\n        cancel: '取消',\n        noteInputPlaceholder: '新增臨時筆記（不會儲存於 PDF）',\n        pageManagement: '頁面管理',\n        fileOperations: '檔案操作',\n        watermarkSectionTitle: '浮水印',\n        watermarkInputPlaceholder: '輸入浮水印文字',\n        watermarkFontSizeLabel: '字體大小',\n        watermarkColorLabel: '顏色',\n        watermarkOpacityLabel: '透明度',\n        watermarkTypeLabel: '浮水印類型',\n        watermarkTypeText: '文字',\n        watermarkTypeImage: '圖片',\n        watermarkImageLabel: '選擇圖片',\n        watermarkPreviewButton: '預覽並定位浮水印',\n        watermarkPreviewModalTitle: '預覽與定位浮水印',\n        watermarkPreviewInfo: '將浮水印拖曳到目標位置。在下方調整樣式。此設定將套用於所有頁面。',\n        watermarkConfirmPosition: '確認位置與樣式',\n        noPdfForWatermarkPreview: '請先上傳 PDF 以預覽浮水印。',\n        pageNumberingSectionTitle: '頁碼',\n        enablePageNumbering: '啟用頁碼',\n        pageNumberPosition: '位置',\n        pageNumberStart: '起始號碼',\n        pageNumberFontSize: '字體大小',\n        pageNumberMargin: '邊距 (pt)',\n        pageNumberFormat: '格式 ({page}, {total})',\n        pageNumberFormatPlaceholder: '{page} / {total}',\n        protectPdfSectionTitle: '保護 PDF',\n        enablePdfProtection: '啟用 PDF 保護',\n        pdfPassword: '密碼',\n        pdfPasswordPlaceholder: '輸入密碼',\n        page: '頁',\n        uploadPdfFirstShort: '上傳 PDF 以開始編輯。',\n        uploadPdfFirst: '請先上傳 PDF 檔案以使用編輯功能。',\n        noPagesToDownload: '沒有可下載的頁面。',\n        noPdfToExtractText: '未載入 PDF 以提取文字。',\n        noPdfToConvert: '未載入 PDF 以進行轉換。',\n        noPageSelected: '未選取任何頁面。',\n        loadingPdf: '正在載入 PDF...',\n        insertingPdf: '正在插入 PDF...',\n        previewOf: '預覽頁面',\n        dropFileHere: '拖放 PDF 檔案至此或點擊上傳',\n        dropInsertFileHere: '拖放 PDF 至此或點擊選擇以插入',\n        downloadLimitTitle: '已達下載上限',\n        downloadLimitDescription: '您已達到每日下載上限（3次）。請登入或升級以享受無限下載。',\n        loggedInAs: '已登入為使用者',\n        login: '登入',\n        logout: '登出',\n        guest: '訪客',\n        firebaseNotConfigured: `Firebase 前端 SDK 設定不完整。請確保所有 Firebase 環境變數 (NEXT_PUBLIC_FIREBASE_API_KEY 等) 都已在您的 .env 檔案中設定。缺少：%MISSING_KEYS%`,\n        firebaseSdkInitError: \"Firebase SDK 未能正確初始化 (Storage 或 Functions 等服務可能無法使用)。'轉換為 Word' 及其他 Firebase 功能可能被禁用。請檢查瀏覽器控制台來自 firebase.ts 的詳細資訊。\",\n        zoomDialogDescription: '查看所選頁面的放大預覽。您可以在此旋轉頁面。使用滑鼠滾輪縮放。',\n        bottomLeft: '左下',\n        bottomCenter: '中下',\n        bottomRight: '右下',\n        middleLeft: '中左',\n        middleRight: '中右',\n        topLeft: '左上',\n        topCenter: '中上',\n        topRight: '右上',\n        pdfEditingTools: 'PDF 工具',\n        downloadAndConvertTitle: '下載与轉換',\n        startEditingYourPdf: '開始編輯您的 PDF',\n        pagesLoaded: '頁已載入',\n        pageSelectedSuffix: '已選取',\n        featureEdit: '編輯',\n        featureMerge: '合併',\n        featurePageNum: '頁碼',\n        featureProtect: '保護',\n        featureConvert: '轉換',\n        accordionDocEnhanceProtect: '文件增強与保護',\n        imageToPdfTitle: '圖片轉 PDF',\n        selectImagesLabel: '選擇圖片檔案：',\n        dropImagesHere: '拖放圖片至此或點擊上傳',\n        convertToPdfButton: '轉換為 PDF',\n        generatingPdfFromImages: '正在從圖片產生 PDF...',\n        imageToPdfSuccess: '從圖片產生 PDF 成功！',\n        imageToPdfError: '從圖片產生 PDF 時發生錯誤',\n        noImagesSelected: '尚未選取要轉換的圖片。',\n        pdfCompressionTitle: 'PDF 壓縮',\n        selectPdfToCompressLabel: '選擇要壓縮的 PDF：',\n        dropPdfToCompressHere: '拖放 PDF 至此或點擊選擇以壓縮',\n        compressPdfButton: '壓縮 PDF',\n        compressingPdf: '正在壓縮 PDF...',\n        pdfCompressionSuccess: 'PDF 處理成功！',\n        pdfCompressionError: '處理 PDF 時發生錯誤',\n        pdfCompressionNote: '注意：此功能使用 pdf-lib 重新儲存 PDF。檔案大小縮減效果不一。已套用 useObjectStreams:false。',\n        noPdfToCompress: '尚未選擇要壓縮的 PDF。',\n        comingSoon: '即將推出！',\n        featureNotImplemented: '功能尚未實現。',\n        editorMode: '編輯模式',\n        gridMode: '縮圖模式',\n        deletePageConfirmTitle: '刪除頁面？',\n        deletePageConfirmDescription: '您確定要刪除此頁面嗎？此操作無法復原。',\n        toolRotate: '旋轉',\n        toolDelete: '刪除',\n        toolAddBlank: '新增空白',\n        toolMerge: '合併',\n        toolSplit: '拆分',\n        toolWatermark: '浮水印',\n        toolInsertText: '插入文字',\n        toolInsertImage: '插入圖片',\n        toolInsertLink: '插入連結',\n        toolInsertComment: '註解',\n        zoomIn: '放大',\n        zoomOut: '縮小',\n        fitToWidth: '符合頁寬',\n        fitToPage: '符合頁面',\n        textProperties: '文字屬性',\n        textAnnotationContent: '文字内容',\n        textAnnotationSample: '範例文本',\n    }\n};\n\nconst DAILY_DOWNLOAD_LIMIT = 3;\nconst DAILY_WORD_CONVERSION_LIMIT = 1;\n\ntype PageNumberPosition = 'bottom-left' | 'bottom-center' | 'bottom-right' | 'top-left' | 'top-center' | 'top-right';\n\nconst pageNumberPositions: {value: PageNumberPosition, labelKey: keyof typeof translations.en}[] = [\n  { value: 'bottom-center', labelKey: 'bottomCenter'},\n  { value: 'bottom-left', labelKey: 'bottomLeft'},\n  { value: 'bottom-right', labelKey: 'bottomRight'},\n  { value: 'top-center', labelKey: 'topCenter'},\n  { value: 'top-left', labelKey: 'topLeft'},\n  { value: 'top-right', labelKey: 'topRight'},\n];\n\ninterface WatermarkConfig {\n  text: string;\n  type: 'text' | 'image';\n  imageUrl: string | null;\n  topRatio: number;\n  leftRatio: number;\n  fontSize: number;\n  color: string;\n  opacity: number;\n}\n\ninterface PagePreviewItemProps {\n  pageObj: PageObject;\n  index: number;\n  isSelected: boolean;\n  onClick: (event: React.MouseEvent) => void;\n  onDoubleClick: () => void;\n  watermarkConfig: WatermarkConfig;\n  texts: typeof translations.en;\n}\n\nconst PagePreviewItem = React.memo(({\n  pageObj, index, isSelected, onClick, onDoubleClick, watermarkConfig, texts\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      const previewDisplayCanvas = canvasRef.current;\n      const previewCtx = previewDisplayCanvas.getContext('2d');\n      if (!previewCtx) return;\n\n      const sourceCanvas = pageObj.sourceCanvas;\n      const rotation = pageObj.rotation;\n      const rad = rotation * Math.PI / 180;\n\n      let rotatedSourceWidth, rotatedSourceHeight;\n      if (rotation % 180 !== 0) {\n        rotatedSourceWidth = sourceCanvas.height;\n        rotatedSourceHeight = sourceCanvas.width;\n      } else {\n        rotatedSourceWidth = sourceCanvas.width;\n        rotatedSourceHeight = sourceCanvas.height;\n      }\n\n      const targetAspectRatio = rotatedSourceWidth / rotatedSourceHeight;\n      const cssDisplayWidth = 120;\n      const cssDisplayHeight = cssDisplayWidth / targetAspectRatio;\n\n      previewDisplayCanvas.width = rotatedSourceWidth;\n      previewDisplayCanvas.height = rotatedSourceHeight;\n\n      previewCtx.save();\n      previewCtx.translate(previewDisplayCanvas.width / 2, previewDisplayCanvas.height / 2);\n      previewCtx.rotate(rad);\n      previewCtx.drawImage(sourceCanvas, -sourceCanvas.width / 2, -sourceCanvas.height / 2, sourceCanvas.width, sourceCanvas.height);\n      previewCtx.restore();\n\n      previewDisplayCanvas.style.width = `${cssDisplayWidth}px`;\n      previewDisplayCanvas.style.height = `${cssDisplayHeight}px`;\n    }\n  }, [pageObj.sourceCanvas, pageObj.rotation]);\n\n\n  const previewWatermarkFontSize = Math.max(6, watermarkConfig.fontSize / (150/15));\n\n  return (\n    <div\n      ref={wrapperRef}\n      className={`page-preview-wrapper p-2 border-2 rounded-lg cursor-pointer transition-all bg-card hover:border-primary ${isSelected ? 'border-primary ring-2 ring-primary' : 'border-transparent'}`}\n      data-id={pageObj.id}\n      data-index={index}\n      onClick={onClick}\n      onDoubleClick={onDoubleClick}\n      style={{ position: 'relative' }}\n    >\n      <canvas ref={canvasRef} className=\"rounded-md shadow-md\" style={{ willReadFrequently: true } as any}></canvas>\n      <div className=\"text-xs text-muted-foreground mt-1 text-center\">\n        {texts.page} {index + 1}\n      </div>\n\n      {watermarkConfig.type === 'text' && watermarkConfig.text && (\n        <div\n          style={{\n            position: 'absolute',\n            top: `${watermarkConfig.topRatio * 100}%`,\n            left: `${watermarkConfig.leftRatio * 100}%`,\n            padding: '1px 3px',\n            backgroundColor: 'rgba(220,220,220,0.1)',\n            border: '1px dashed rgba(150,150,150,0.3)',\n            borderRadius: '2px',\n            whiteSpace: 'nowrap',\n            userSelect: 'none',\n            fontSize: `${previewWatermarkFontSize}px`,\n            color: watermarkConfig.color,\n            opacity: watermarkConfig.opacity,\n            zIndex: 5,\n            pointerEvents: 'none',\n            transform: 'translate(-50%, -50%)',\n          }}\n        >\n          {watermarkConfig.text}\n        </div>\n      )}\n      {watermarkConfig.type === 'image' && watermarkConfig.imageUrl && (\n        <img\n          src={watermarkConfig.imageUrl}\n          alt=\"Watermark Preview\"\n          style={{\n            position: 'absolute',\n            top: `${watermarkConfig.topRatio * 100}%`,\n            left: `${watermarkConfig.leftRatio * 100}%`,\n            opacity: watermarkConfig.opacity,\n            zIndex: 5,\n            pointerEvents: 'none',\n            maxWidth: '30px',\n            maxHeight: '30px',\n            objectFit: 'contain',\n            transform: 'translate(-50%, -50%)',\n          }}\n        />\n      )}\n    </div>\n  );\n});\nPagePreviewItem.displayName = 'PagePreviewItem';\n\nconst ToolbarButton = ({ icon: Icon, label, onClick, disabled = false }: { icon: React.ElementType, label: string, onClick?: () => void, disabled?: boolean }) => (\n    <Button\n        variant=\"ghost\"\n        className=\"flex flex-col items-center justify-center h-20 w-full text-xs space-y-1\"\n        onClick={onClick}\n        disabled={disabled}\n    >\n        <Icon className=\"h-6 w-6 text-primary\" />\n        <span className=\"text-muted-foreground\">{label}</span>\n    </Button>\n);\n\n\nexport default function PdfEditorHomepage() {\n  const router = useRouter();\n  const { toast } = useToast();\n\n  const [pageObjects, setPageObjects] = useState<PageObject[]>([]);\n  const [selectedPageIds, setSelectedPageIds] = useState<Set<string>>(new Set());\n\n  const [activePageIndex, setActivePageIndex] = useState<number | null>(null);\n  const [viewMode, setViewMode] = useState<'editor' | 'grid'>('editor');\n\n  const mainViewContainerRef = useRef<HTMLDivElement>(null);\n  const pageRefs = useRef<(HTMLDivElement | null)[]>([]);\n  const [mainCanvasZoom, setMainCanvasZoom] = useState(1);\n\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n  const [pageToDelete, setPageToDelete] = useState<number | null>(null);\n\n  const [currentLanguage, setCurrentLanguage] = useState<'en' | 'zh'>('zh');\n  const [texts, setTexts] = useState(translations.zh);\n  const [isLoading, setIsLoading] = useState(false);\n  const [loadingMessage, setLoadingMessage] = useState('');\n  const [isDownloading, setIsDownloading] = useState(false);\n\n  const [insertPosition, setInsertPosition] = useState<'before' | 'after'>('before');\n  const [isInsertConfirmOpen, setIsInsertConfirmOpen] = useState(false);\n  const [pendingInsertFile, setPendingInsertFile] = useState<File | null>(null);\n  \n  const [textAnnotations, setTextAnnotations] = useState<TextAnnotation[]>([]);\n  const [selectedAnnotationId, setSelectedAnnotationId] = useState<string | null>(null);\n\n  const [watermarkConfig, setWatermarkConfig] = useState<WatermarkConfig>({\n    text: '',\n    type: 'text',\n    imageUrl: null,\n    topRatio: 0.5,\n    leftRatio: 0.5,\n    fontSize: 48,\n    color: '#808080',\n    opacity: 0.5,\n  });\n\n  const [tempWatermarkConfig, setTempWatermarkConfig] = useState<WatermarkConfig>(watermarkConfig);\n  const [isWatermarkPreviewModalOpen, setIsWatermarkPreviewModalOpen] = useState(false);\n  const watermarkImageUploadRef = useRef<HTMLInputElement>(null);\n  const watermarkPreviewModalCanvasRef = useRef<HTMLCanvasElement>(null);\n  \n  const isDraggingRef = useRef(false);\n\n  const watermarkPreviewCanvasContainerRef = useRef<HTMLDivElement>(null);\n\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [pdfDocumentProxy, setPdfDocumentProxy] = useState<PDFDocumentProxyType | null>(null);\n  const [uploadedPdfFile, setUploadedPdfFile] = useState<File | null>(null);\n\n  const [isConvertingToWord, setIsConvertingToWord] = useState(false);\n  const [wordFileUrl, setWordFileUrl] = useState<string | null>(null);\n  const [wordConversionError, setWordConversionError] = useState<string | null>(null);\n  const [showWordLimitModal, setShowWordLimitModal] = useState(false);\n\n  const [isFirebaseSystemReady, setIsFirebaseSystemReady] = useState(false);\n  const [firebaseConfigWarning, setFirebaseConfigWarning] = useState('');\n\n  const [pageNumberingConfig, setPageNumberingConfig] = useState({\n    enabled: false,\n    position: 'bottom-center' as PageNumberPosition,\n    start: 1,\n    fontSize: 12,\n    margin: 20,\n    format: '{page} / {total}',\n  });\n\n  const [pdfProtectionConfig, setPdfProtectionConfig] = useState({\n    enabled: false,\n    password: '',\n  });\n\n  const thumbnailContainerRef = useRef<HTMLDivElement>(null);\n  const thumbnailRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  const pdfUploadRef = useRef<HTMLInputElement>(null);\n  const insertPdfRef = useRef<HTMLInputElement>(null);\n  const sortableInstanceRef = useRef<Sortable | null>(null);\n\n  const [imageFiles, setImageFiles] = useState<FileList | null>(null);\n  const imageToPdfUploadRef = useRef<HTMLInputElement>(null);\n  const [isConvertingImagesToPdf, setIsConvertingImagesToPdf] = useState(false);\n\n  const [pdfToCompress, setPdfToCompress] = useState<File | null>(null);\n  const pdfCompressUploadRef = useRef<HTMLInputElement>(null);\n  const [isCompressingPdf, setIsCompressingPdf] = useState(false);\n\n  const observerRef = useRef<IntersectionObserver | null>(null);\n\n  useEffect(() => {\n    setTexts(translations[currentLanguage] || translations.en);\n  }, [currentLanguage]);\n\n  useEffect(() => {\n    const sdkServicesInitialized = !!firebaseApp && !!storage && !!firebaseFunctions;\n    if (sdkServicesInitialized) {\n        setIsFirebaseSystemReady(true);\n        setFirebaseConfigWarning('');\n    } else {\n        setIsFirebaseSystemReady(false);\n        let warningMsg = texts?.firebaseSdkInitError || \"Firebase SDK services (app, storage, functions) NOT initialized.\";\n        setFirebaseConfigWarning(warningMsg);\n    }\n  }, [currentLanguage, texts]);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const loggedInStatus = localStorage.getItem('isLoggedIn') === 'true';\n      setIsLoggedIn(loggedInStatus);\n\n      const today = new Date().toISOString().split('T')[0];\n      let downloadInfoString = localStorage.getItem('DocuPilotDownloadInfo');\n      if (downloadInfoString) {\n        let downloadInfo = JSON.parse(downloadInfoString);\n        if (downloadInfo.date !== today) {\n          localStorage.removeItem('DocuPilotDownloadInfo');\n        }\n      }\n      let wordConversionInfoString = localStorage.getItem('DocuPilotWordConversionInfo');\n      if (wordConversionInfoString) {\n        let wordInfo = JSON.parse(wordConversionInfoString);\n        if (wordInfo.date !== today) {\n            localStorage.removeItem('DocuPilotWordConversionInfo');\n        }\n      }\n    }\n  }, []);\n\n  const createSortableInstance = useCallback((containerRef: React.RefObject<HTMLDivElement>) => {\n    if (containerRef.current && !sortableInstanceRef.current) {\n        sortableInstanceRef.current = Sortable.create(containerRef.current, {\n            animation: 150,\n            ghostClass: 'opacity-50',\n            chosenClass: 'shadow-2xl',\n            dragClass: 'opacity-75',\n            onEnd: (evt) => {\n                if (evt.oldIndex === undefined || evt.newIndex === undefined || evt.oldIndex === evt.newIndex) return;\n\n                setPageObjects(prevPageObjects => {\n                    const reorderedPageObjects = Array.from(prevPageObjects);\n                    const [movedItem] = reorderedPageObjects.splice(evt.oldIndex!, 1);\n                    reorderedPageObjects.splice(evt.newIndex!, 0, movedItem);\n                    return reorderedPageObjects;\n                });\n            }\n        });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (pageObjects.length > 0 && viewMode === 'editor' && thumbnailContainerRef.current) {\n        createSortableInstance(thumbnailContainerRef);\n    } else if (pageObjects.length > 0 && viewMode === 'grid' && mainViewContainerRef.current) {\n        createSortableInstance(mainViewContainerRef);\n    } else if (sortableInstanceRef.current) {\n        sortableInstanceRef.current.destroy();\n        sortableInstanceRef.current = null;\n    }\n\n    return () => {\n        if (sortableInstanceRef.current) {\n            sortableInstanceRef.current.destroy();\n            sortableInstanceRef.current = null;\n        }\n    };\n  }, [pageObjects.length, viewMode, createSortableInstance]);\n\n  useEffect(() => {\n    if (observerRef.current) observerRef.current.disconnect();\n  \n    const options = {\n      root: mainViewContainerRef.current,\n      rootMargin: '0px',\n      threshold: 0.5\n    };\n  \n    observerRef.current = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const index = parseInt(entry.target.getAttribute('data-page-index') || '0', 10);\n          setActivePageIndex(index);\n        }\n      });\n    }, options);\n  \n    const { current: observer } = observerRef;\n    const { current: pageElements } = pageRefs;\n  \n    pageElements.forEach(el => {\n      if (el) observer.observe(el);\n    });\n  \n    return () => {\n      if (observer) {\n        pageElements.forEach(el => {\n          if (el) observer.unobserve(el);\n        });\n      }\n    };\n  }, [pageObjects, mainCanvasZoom]);\n  \n  useEffect(() => {\n    if (activePageIndex !== null && thumbnailRefs.current[activePageIndex]) {\n      thumbnailRefs.current[activePageIndex]?.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  }, [activePageIndex]);\n\n\n  const handleFitPage = useCallback(() => {\n      if (!mainViewContainerRef.current || pageObjects.length === 0 || activePageIndex === null) return;\n      const container = mainViewContainerRef.current;\n      const containerWidth = container.clientWidth - 40;\n      const containerHeight = container.clientHeight - 40;\n\n      const activePage = pageObjects[activePageIndex];\n      if (!activePage) return;\n\n      const pageCanvas = activePage.sourceCanvas;\n      const rotation = activePage.rotation;\n\n      let pageRenderWidth = (rotation % 180 !== 0) ? pageCanvas.height : pageCanvas.width;\n      let pageRenderHeight = (rotation % 180 !== 0) ? pageCanvas.width : pageCanvas.height;\n\n      const widthRatio = containerWidth / pageRenderWidth;\n      const heightRatio = containerHeight / pageRenderHeight;\n\n      const newZoom = Math.min(widthRatio, heightRatio);\n      setMainCanvasZoom(newZoom);\n  }, [activePageIndex, pageObjects]);\n\n  const handleFitToWidth = useCallback(() => {\n      if (!mainViewContainerRef.current || pageObjects.length === 0 || activePageIndex === null) return;\n      const containerWidth = mainViewContainerRef.current.clientWidth - 40;\n      const activePage = pageObjects[activePageIndex];\n      if (!activePage) return;\n\n      const pageCanvas = activePage.sourceCanvas;\n      const rotation = activePage.rotation;\n      let pageRenderWidth = (rotation % 180 !== 0) ? pageCanvas.height : pageCanvas.width;\n\n      const newZoom = containerWidth / pageRenderWidth;\n      setMainCanvasZoom(newZoom);\n  }, [activePageIndex, pageObjects]);\n\n\n  const updateLanguage = (lang: 'en' | 'zh') => {\n    setCurrentLanguage(lang);\n  };\n\n  const handleLogout = () => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('isLoggedIn');\n    }\n    setIsLoggedIn(false);\n    toast({ title: texts.logout, description: currentLanguage === 'zh' ? \"您已成功登出。\" : \"You have been logged out successfully.\" });\n  };\n\n\n  const processPdfFile = async (file: File): Promise<{ newPageObjects: PageObject[], docProxy: PDFDocumentProxyType }> => {\n    const arrayBuffer = await file.arrayBuffer();\n    const pdfDocProxy = await pdfjsLib.getDocument({\n      data: arrayBuffer,\n      cMapUrl: `//cdn.jsdelivr.net/npm/pdfjs-dist@${pdfjsLib.version}/cmaps/`,\n      cMapPacked: true,\n    }).promise;\n\n    const numPages = pdfDocProxy.numPages;\n    const loadedPageObjects: PageObject[] = [];\n    for (let i = 1; i <= numPages; i++) {\n      const page = await pdfDocProxy.getPage(i);\n      const viewport = page.getViewport({ scale: 3.0 });\n      const canvas = document.createElement('canvas');\n      canvas.width = viewport.width;\n      canvas.height = viewport.height;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) continue;\n      await page.render({ canvasContext: ctx, viewport }).promise;\n      loadedPageObjects.push({ id: uuidv4(), sourceCanvas: canvas, rotation: 0 });\n    }\n    return { newPageObjects: loadedPageObjects, docProxy: pdfDocProxy };\n  };\n\n  const handlePdfUpload = async (event: React.ChangeEvent<HTMLInputElement> | React.DragEvent<HTMLDivElement>) => {\n    let file: File | null = null;\n    if ('dataTransfer' in event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            file = event.dataTransfer.files[0];\n            event.dataTransfer.clearData();\n        }\n    } else {\n        file = event.target.files?.[0] || null;\n    }\n\n    if (!file || !file.type.includes('pdf')) {\n        if (file) toast({ title: texts.loadError, description: currentLanguage === 'zh' ? \"無效的檔案類型。請上傳 PDF。\" : \"Invalid file type. Please upload a PDF.\", variant: \"destructive\" });\n        return;\n    }\n    setUploadedPdfFile(file);\n    setWordFileUrl(null);\n    setWordConversionError(null);\n    setTextAnnotations([]);\n    setSelectedAnnotationId(null);\n\n    setIsLoading(true);\n    setLoadingMessage(texts.loadingPdf);\n    try {\n      const { newPageObjects, docProxy } = await processPdfFile(file);\n      setPageObjects(newPageObjects);\n      setPdfDocumentProxy(docProxy);\n      setSelectedPageIds(new Set());\n      setActivePageIndex(0);\n      setViewMode('editor');\n      \n      setTimeout(() => {\n        if (mainViewContainerRef.current && newPageObjects.length > 0 && activePageIndex !== null) {\n          const container = mainViewContainerRef.current;\n          const containerWidth = container.clientWidth - 40;\n          const containerHeight = container.clientHeight - 40;\n      \n          const activePage = newPageObjects[0];\n          const pageCanvas = activePage.sourceCanvas;\n          const rotation = activePage.rotation;\n      \n          let pageRenderWidth = (rotation % 180 !== 0) ? pageCanvas.height : pageCanvas.width;\n          let pageRenderHeight = (rotation % 180 !== 0) ? pageCanvas.width : pageCanvas.height;\n      \n          const widthRatio = containerWidth / pageRenderWidth;\n          const heightRatio = containerHeight / pageRenderHeight;\n      \n          const newZoom = Math.min(widthRatio, heightRatio);\n          setMainCanvasZoom(newZoom);\n        }\n      }, 100);\n\n    } catch (err: any)\n    {\n      toast({ title: texts.loadError, description: err.message, variant: \"destructive\" });\n      setPdfDocumentProxy(null);\n      setUploadedPdfFile(null);\n      setPageObjects([]);\n      setActivePageIndex(null);\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n      if (pdfUploadRef.current) pdfUploadRef.current.value = '';\n    }\n  };\n\n  const handleDeletePages = () => {\n    if (pageToDelete !== null) {\n        const newPages = pageObjects.filter((p, index) => index !== pageToDelete);\n        const newActiveIndex = pageToDelete >= newPages.length ? newPages.length - 1 : pageToDelete;\n\n        setPageObjects(newPages);\n        setActivePageIndex(newActiveIndex);\n        setSelectedPageIds(new Set());\n    } else {\n        if (selectedPageIds.size === 0) {\n            toast({ title: texts.pageManagement, description: texts.noPageSelected, variant: \"destructive\" });\n            return;\n        }\n        const newPages = pageObjects.filter(p => !selectedPageIds.has(p.id));\n\n        setPageObjects(newPages);\n        setActivePageIndex(null);\n        setSelectedPageIds(new Set());\n    }\n\n    if (pageObjects.length - (pageToDelete !== null ? 1 : selectedPageIds.size) === 0) {\n      setPdfDocumentProxy(null);\n      setUploadedPdfFile(null);\n    }\n\n    toast({ title: texts.pageManagement, description: currentLanguage === 'zh' ? \"選取的頁面已刪除。\" : \"Selected pages have been deleted.\" });\n    setPageToDelete(null);\n    setIsDeleteConfirmOpen(false);\n  };\n\n\n  const hexToRgb = (hex: string): { r: number; g: number; b: number } => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16) / 255,\n      g: parseInt(result[2], 16) / 255,\n      b: parseInt(result[3], 16) / 255\n    } : { r: 0.5, g: 0.5, b: 0.5 };\n  };\n\n\n  const handleDownloadPdf = async () => {\n    if (pageObjects.length === 0) {\n      toast({ title: texts.downloadPdf, description: texts.noPagesToDownload, variant: \"destructive\" });\n      return;\n    }\n\n    if (!isLoggedIn && typeof window !== 'undefined') {\n      const today = new Date().toISOString().split('T')[0];\n      let downloadInfoString = localStorage.getItem('DocuPilotDownloadInfo');\n      let downloadInfo = downloadInfoString ? JSON.parse(downloadInfoString) : { count: 0, date: today };\n\n      if (downloadInfo.date !== today) {\n        downloadInfo = { count: 0, date: today };\n      }\n\n      if (downloadInfo.count >= DAILY_DOWNLOAD_LIMIT) {\n        setShowPaymentModal(true);\n        return;\n      }\n      downloadInfo.count++;\n      localStorage.setItem('DocuPilotDownloadInfo', JSON.stringify(downloadInfo));\n    }\n\n    setIsDownloading(true);\n    setLoadingMessage(texts.generatingFile);\n    try {\n      await new Promise(resolve => setTimeout(resolve, 100));\n      const pdfDocOut = await PDFLibDocument.create();\n      const helveticaFont = await pdfDocOut.embedFont(StandardFonts.Helvetica);\n\n      for (const [index, pageObj] of pageObjects.entries()) {\n        const { sourceCanvas, rotation } = pageObj;\n\n        const tempRenderCanvas = document.createElement('canvas');\n        const tempCtx = tempRenderCanvas.getContext('2d');\n        if (!tempCtx) continue;\n\n        const rad = rotation * Math.PI / 180;\n\n        if (rotation % 180 !== 0) {\n          tempRenderCanvas.width = sourceCanvas.height;\n          tempRenderCanvas.height = sourceCanvas.width;\n        } else {\n          tempRenderCanvas.width = sourceCanvas.width;\n          tempRenderCanvas.height = sourceCanvas.height;\n        }\n\n        tempCtx.translate(tempRenderCanvas.width / 2, tempRenderCanvas.height / 2);\n        tempCtx.rotate(rad);\n        tempCtx.drawImage(sourceCanvas, -sourceCanvas.width / 2, -sourceCanvas.height / 2, sourceCanvas.width, sourceCanvas.height);\n\n        const imgDataUrl = tempRenderCanvas.toDataURL('image/png');\n        const pngImage = await pdfDocOut.embedPng(imgDataUrl);\n\n        const pdfLibPage = pdfDocOut.addPage([tempRenderCanvas.width, tempRenderCanvas.height]);\n        pdfLibPage.drawImage(pngImage, { x: 0, y: 0, width: tempRenderCanvas.width, height: tempRenderCanvas.height });\n\n        const { width: pageWidth, height: pageHeight } = pdfLibPage.getSize();\n\n        // Apply Text Annotations\n        for (const annotation of textAnnotations) {\n            if (annotation.pageIndex === index) {\n                const { r, g, b } = hexToRgb(annotation.color);\n                pdfLibPage.drawText(annotation.text, {\n                    x: annotation.leftRatio * pageWidth,\n                    y: pageHeight - (annotation.topRatio * pageHeight) - (annotation.fontSize / 2),\n                    font: helveticaFont,\n                    size: annotation.fontSize,\n                    color: rgb(r, g, b),\n                    lineHeight: annotation.fontSize * 1.2,\n                });\n            }\n        }\n\n\n        if ((watermarkConfig.type === 'text' && watermarkConfig.text) || (watermarkConfig.type === 'image' && watermarkConfig.imageUrl)) {\n            pdfLibPage.pushGraphicsState();\n            pdfLibPage.setOpacity(watermarkConfig.opacity);\n\n            if (watermarkConfig.type === 'text' && watermarkConfig.text) {\n                const pdfWatermarkFontSize = watermarkConfig.fontSize;\n                const textColor = hexToRgb(watermarkConfig.color);\n                const textWidth = helveticaFont.widthOfTextAtSize(watermarkConfig.text, pdfWatermarkFontSize);\n                const textHeight = helveticaFont.heightAtSize(pdfWatermarkFontSize);\n\n                const wmX_pdf_text = watermarkConfig.leftRatio * pageWidth - textWidth / 2;\n                const wmY_pdf_text = pageHeight - (watermarkConfig.topRatio * pageHeight) - textHeight / 2;\n\n\n                pdfLibPage.drawText(watermarkConfig.text, {\n                    x: wmX_pdf_text,\n                    y: wmY_pdf_text,\n                    font: helveticaFont,\n                    size: pdfWatermarkFontSize,\n                    color: rgb(textColor.r, textColor.g, textColor.b),\n                });\n            } else if (watermarkConfig.type === 'image' && watermarkConfig.imageUrl) {\n                try {\n                    const imageBytes = await fetch(watermarkConfig.imageUrl).then(res => res.arrayBuffer());\n                    let wmEmbedImage;\n                    if (watermarkConfig.imageUrl.startsWith('data:image/png')) {\n                        wmEmbedImage = await pdfDocOut.embedPng(imageBytes);\n                    } else if (watermarkConfig.imageUrl.startsWith('data:image/jpeg') || watermarkConfig.imageUrl.startsWith('data:image/jpg')) {\n                        wmEmbedImage = await pdfDocOut.embedJpg(imageBytes);\n                    }\n\n                    if (wmEmbedImage) {\n                        const { width: imgOriginalWidth, height: imgOriginalHeight } = wmEmbedImage.scale(1);\n                        const wmX_pdf_img = watermarkConfig.leftRatio * pageWidth - imgOriginalWidth / 2;\n                        const wmY_pdf_img = pageHeight - (watermarkConfig.topRatio * pageHeight) - imgOriginalHeight / 2;\n\n                        pdfLibPage.drawImage(wmEmbedImage, {\n                            x: wmX_pdf_img,\n                            y: wmY_pdf_img,\n                            width: imgOriginalWidth,\n                            height: imgOriginalHeight,\n                        });\n                    }\n                } catch (imgErr) {\n                    console.error(\"Error embedding watermark image:\", imgErr);\n                    toast({ title: \"Watermark Error\", description: \"Could not embed watermark image.\", variant: \"destructive\" });\n                }\n            }\n            pdfLibPage.popGraphicsState();\n        }\n\n\n        if (pageNumberingConfig.enabled) {\n            const { width: pnPageWidth, height: pnPageHeight } = pdfLibPage.getSize();\n            const currentPageNum = index + pageNumberingConfig.start;\n            const totalNumPages = pageObjects.length;\n\n            let text = pageNumberingConfig.format\n                .replace('{page}', currentPageNum.toString())\n                .replace('{total}', totalNumPages.toString());\n\n            const textSize = pageNumberingConfig.fontSize;\n            const pnFont = await pdfDocOut.embedFont(StandardFonts.Helvetica);\n            const textWidthNum = pnFont.widthOfTextAtSize(text, textSize);\n            const pnAscent = pnFont.ascender / pnFont.unitsPerEm * textSize;\n\n            let x, y;\n            switch (pageNumberingConfig.position) {\n                case 'top-left': x = pageNumberingConfig.margin; y = pnPageHeight - pageNumberingConfig.margin - pnAscent; break;\n                case 'top-center': x = pnPageWidth / 2 - textWidthNum / 2; y = pnPageHeight - pageNumberingConfig.margin - pnAscent; break;\n                case 'top-right': x = pnPageWidth - pageNumberingConfig.margin - textWidthNum; y = pnPageHeight - pageNumberingConfig.margin - pnAscent; break;\n                case 'bottom-left': x = pageNumberingConfig.margin; y = pageNumberingConfig.margin; break;\n                case 'bottom-center': x = pnPageWidth / 2 - textWidthNum / 2; y = pageNumberingConfig.margin; break;\n                case 'bottom-right': x = pnPageWidth - pageNumberingConfig.margin - textWidthNum; y = pageNumberingConfig.margin; break;\n                default: x = pnPageWidth / 2 - textWidthNum / 2; y = pageNumberingConfig.margin;\n            }\n            pdfLibPage.drawText(text, { x, y, font: pnFont, size: textSize, color: grayscale(0) });\n        }\n      }\n\n      if (pdfProtectionConfig.enabled && pdfProtectionConfig.password) {\n        await pdfDocOut.encrypt({\n          userPassword: pdfProtectionConfig.password,\n          ownerPassword: pdfProtectionConfig.password,\n          permissions: {},\n        });\n      }\n\n      const pdfBytes = await pdfDocOut.save();\n      const blob = new Blob([pdfBytes], { type: 'application/pdf' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'DocuPilot_edited.pdf';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      toast({ title: texts.downloadPdf, description: currentLanguage === 'zh' ? \"PDF 下載成功！\" : \"PDF downloaded successfully!\" });\n    } catch (err: any) {\n      console.error(\"Download PDF error:\", err);\n      toast({ title: texts.downloadError, description: err.message, variant: \"destructive\" });\n    } finally {\n      setIsDownloading(false);\n      setLoadingMessage('');\n    }\n  };\n\n  const handleSplitPdf = async () => {\n    const selectedPages = pageObjects.filter(p => selectedPageIds.has(p.id));\n    if (selectedPages.length === 0) {\n      toast({ title: texts.splitPages, description: texts.noPageSelected, variant: \"destructive\" });\n      return;\n    }\n\n    if (!isLoggedIn && typeof window !== 'undefined') {\n      const today = new Date().toISOString().split('T')[0];\n      let downloadInfoString = localStorage.getItem('DocuPilotDownloadInfo');\n      let downloadInfo = downloadInfoString ? JSON.parse(downloadInfoString) : { count: 0, date: today };\n\n      if (downloadInfo.date !== today) {\n        downloadInfo = { count: 0, date: today };\n      }\n\n      if (downloadInfo.count >= DAILY_DOWNLOAD_LIMIT) {\n        setShowPaymentModal(true);\n        return;\n      }\n      downloadInfo.count++;\n      localStorage.setItem('DocuPilotDownloadInfo', JSON.stringify(downloadInfo));\n    }\n\n    setIsDownloading(true);\n    setLoadingMessage(texts.generatingFile);\n    try {\n      await new Promise(resolve => setTimeout(resolve, 100));\n      const pdfDocOut = await PDFLibDocument.create();\n      const helveticaFont = await pdfDocOut.embedFont(StandardFonts.Helvetica);\n\n      for (const [index, pageObj] of selectedPages.entries()) {\n        const { sourceCanvas, rotation } = pageObj;\n        const tempRenderCanvas = document.createElement('canvas');\n        const tempCtx = tempRenderCanvas.getContext('2d');\n        if (!tempCtx) continue;\n\n        const rad = rotation * Math.PI / 180;\n        if (rotation % 180 !== 0) {\n          tempRenderCanvas.width = sourceCanvas.height;\n          tempRenderCanvas.height = sourceCanvas.width;\n        } else {\n          tempRenderCanvas.width = sourceCanvas.width;\n          tempRenderCanvas.height = sourceCanvas.height;\n        }\n\n        tempCtx.translate(tempRenderCanvas.width / 2, tempRenderCanvas.height / 2);\n        tempCtx.rotate(rad);\n        tempCtx.drawImage(sourceCanvas, -sourceCanvas.width / 2, -sourceCanvas.height / 2, sourceCanvas.width, sourceCanvas.height);\n\n        const imgDataUrl = tempRenderCanvas.toDataURL('image/png');\n        const pngImage = await pdfDocOut.embedPng(imgDataUrl);\n        const pdfLibPage = pdfDocOut.addPage([tempRenderCanvas.width, tempRenderCanvas.height]);\n        pdfLibPage.drawImage(pngImage, { x: 0, y: 0, width: tempRenderCanvas.width, height: tempRenderCanvas.height });\n\n        const { width: pageWidth, height: pageHeight } = pdfLibPage.getSize();\n        if ((watermarkConfig.type === 'text' && watermarkConfig.text) || (watermarkConfig.type === 'image' && watermarkConfig.imageUrl)) {\n            pdfLibPage.pushGraphicsState();\n            pdfLibPage.setOpacity(watermarkConfig.opacity);\n            if (watermarkConfig.type === 'text' && watermarkConfig.text) {\n                const pdfWatermarkFontSize = watermarkConfig.fontSize;\n                const textColor = hexToRgb(watermarkConfig.color);\n                const textWidth = helveticaFont.widthOfTextAtSize(watermarkConfig.text, pdfWatermarkFontSize);\n                const textHeight = helveticaFont.heightAtSize(pdfWatermarkFontSize);\n                const wmX_pdf_text = watermarkConfig.leftRatio * pageWidth - textWidth / 2;\n                const wmY_pdf_text = pageHeight - (watermarkConfig.topRatio * pageHeight) - textHeight / 2;\n                pdfLibPage.drawText(watermarkConfig.text, { x: wmX_pdf_text, y: wmY_pdf_text, font: helveticaFont, size: pdfWatermarkFontSize, color: rgb(textColor.r, textColor.g, textColor.b) });\n            } else if (watermarkConfig.type === 'image' && watermarkConfig.imageUrl) {\n                try {\n                    const imageBytes = await fetch(watermarkConfig.imageUrl).then(res => res.arrayBuffer());\n                    let wmEmbedImage;\n                    if (watermarkConfig.imageUrl.startsWith('data:image/png')) {\n                        wmEmbedImage = await pdfDocOut.embedPng(imageBytes);\n                    } else if (watermarkConfig.imageUrl.startsWith('data:image/jpeg') || watermarkConfig.imageUrl.startsWith('data:image/jpg')) {\n                        wmEmbedImage = await pdfDocOut.embedJpg(imageBytes);\n                    }\n                    if (wmEmbedImage) {\n                        const { width: imgOriginalWidth, height: imgOriginalHeight } = wmEmbedImage.scale(1);\n                        const wmX_pdf_img = watermarkConfig.leftRatio * pageWidth - imgOriginalWidth / 2;\n                        const wmY_pdf_img = pageHeight - (watermarkConfig.topRatio * pageHeight) - imgOriginalHeight / 2;\n                        pdfLibPage.drawImage(wmEmbedImage, { x: wmX_pdf_img, y: wmY_pdf_img, width: imgOriginalWidth, height: imgOriginalHeight });\n                    }\n                } catch (imgErr) { console.error(\"Error embedding watermark image:\", imgErr); toast({ title: \"Watermark Error\", description: \"Could not embed watermark image.\", variant: \"destructive\" }); }\n            }\n            pdfLibPage.popGraphicsState();\n        }\n\n        if (pageNumberingConfig.enabled) {\n            const { width: pnPageWidth, height: pnPageHeight } = pdfLibPage.getSize();\n            const currentPageNum = index + pageNumberingConfig.start;\n            const totalNumPages = selectedPages.length;\n            let text = pageNumberingConfig.format.replace('{page}', currentPageNum.toString()).replace('{total}', totalNumPages.toString());\n            const textSize = pageNumberingConfig.fontSize;\n            const pnFont = await pdfDocOut.embedFont(StandardFonts.Helvetica);\n            const textWidthNum = pnFont.widthOfTextAtSize(text, textSize);\n            const pnAscent = pnFont.ascender / pnFont.unitsPerEm * textSize;\n            let x, y;\n            switch (pageNumberingConfig.position) {\n                case 'top-left': x = pageNumberingConfig.margin; y = pnPageHeight - pageNumberingConfig.margin - pnAscent; break;\n                case 'top-center': x = pnPageWidth / 2 - textWidthNum / 2; y = pnPageHeight - pageNumberingConfig.margin - pnAscent; break;\n                case 'top-right': x = pnPageWidth - pageNumberingConfig.margin - textWidthNum; y = pnPageHeight - pageNumberingConfig.margin - pnAscent; break;\n                case 'bottom-left': x = pageNumberingConfig.margin; y = pageNumberingConfig.margin; break;\n                case 'bottom-center': x = pnPageWidth / 2 - textWidthNum / 2; y = pageNumberingConfig.margin; break;\n                case 'bottom-right': x = pnPageWidth - pageNumberingConfig.margin - textWidthNum; y = pageNumberingConfig.margin; break;\n                default: x = pnPageWidth / 2 - textWidthNum / 2; y = pageNumberingConfig.margin;\n            }\n            pdfLibPage.drawText(text, { x, y, font: pnFont, size: textSize, color: grayscale(0) });\n        }\n      }\n\n      if (pdfProtectionConfig.enabled && pdfProtectionConfig.password) {\n        await pdfDocOut.encrypt({ userPassword: pdfProtectionConfig.password, ownerPassword: pdfProtectionConfig.password, permissions: {} });\n      }\n\n      const pdfBytes = await pdfDocOut.save();\n      const blob = new Blob([pdfBytes], { type: 'application/pdf' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'DocuPilot_split.pdf';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      toast({ title: texts.splitPages, description: texts.splitPdfSuccess });\n    } catch (err: any) {\n      console.error(\"Split PDF error:\", err);\n      toast({ title: texts.splitPdfError, description: err.message, variant: \"destructive\" });\n    } finally {\n      setIsDownloading(false);\n      setLoadingMessage('');\n    }\n  };\n\n  const handleInsertPdfFileSelected = (event: React.ChangeEvent<HTMLInputElement> | React.DragEvent<HTMLDivElement>) => {\n    let file: File | null = null;\n    if ('dataTransfer' in event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            file = event.dataTransfer.files[0];\n            event.dataTransfer.clearData();\n        }\n    } else {\n        file = event.target.files?.[0] || null;\n    }\n\n    if (!file || !file.type.includes('pdf')) {\n        if(file) toast({ title: texts.insertError, description: currentLanguage === 'zh' ? \"無效的檔案類型。請上傳 PDF。\" : \"Invalid file type. Please upload a PDF.\", variant: \"destructive\" });\n        return;\n    }\n\n    setPendingInsertFile(file);\n    if (pageObjects.length > 0 && selectedPageIds.size === 0) {\n        setIsInsertConfirmOpen(true);\n    } else {\n        proceedWithInsert(file);\n    }\n  };\n\n  const proceedWithInsert = async (fileToInsert?: File) => {\n    const file = fileToInsert || pendingInsertFile;\n    if (!file) return;\n\n    setIsLoading(true);\n    setLoadingMessage(texts.insertingPdf);\n    try {\n      const { newPageObjects: insertPageObjects } = await processPdfFile(file);\n\n      let insertAtIndex = activePageIndex !== null ? activePageIndex + 1 : pageObjects.length;\n\n      const newCombinedPageObjects = [...pageObjects];\n      newCombinedPageObjects.splice(insertAtIndex, 0, ...insertPageObjects);\n      setPageObjects(newCombinedPageObjects);\n\n      const newActivePageId = insertPageObjects[0]?.id;\n      if (newActivePageId) {\n        setSelectedPageIds(new Set([newActivePageId]));\n      }\n      setActivePageIndex(insertAtIndex);\n\n      toast({ title: texts.insertAreaTitle, description: currentLanguage === 'zh' ? \"PDF 插入成功。\" : \"PDF inserted successfully.\" });\n\n    } catch (err: any) {\n      toast({ title: texts.insertError, description: err.message, variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n      setPendingInsertFile(null);\n      if (insertPdfRef.current) insertPdfRef.current.value = '';\n    }\n  };\n\n const handleConvertToWord = async () => {\n    if (!uploadedPdfFile) {\n      toast({ title: texts.wordConvertError, description: texts.noPdfToConvert, variant: \"destructive\" });\n      return;\n    }\n\n    if (!isFirebaseSystemReady || !storage || !firebaseFunctions) {\n        toast({ title: texts.wordConvertError, description: firebaseConfigWarning || (currentLanguage === 'zh' ? translations.zh.firebaseSdkInitError : translations.en.firebaseSdkInitError), variant: \"destructive\" });\n        return;\n    }\n\n    setWordFileUrl(null);\n    setWordConversionError(null);\n\n    if (!isLoggedIn && typeof window !== 'undefined') {\n      const today = new Date().toISOString().split('T')[0];\n      let wordConversionInfoString = localStorage.getItem('DocuPilotWordConversionInfo');\n      let wordConversionInfo = wordConversionInfoString ? JSON.parse(wordConversionInfoString) : { count: 0, date: today };\n\n      if (wordConversionInfo.date !== today) {\n        wordConversionInfo = { count: 0, date: today };\n      }\n\n      if (wordConversionInfo.count >= DAILY_WORD_CONVERSION_LIMIT) {\n        setShowWordLimitModal(true);\n        return;\n      }\n    }\n\n    setIsConvertingToWord(true);\n    setLoadingMessage(texts.convertingToWord);\n\n    try {\n      const fileName = `uploads/${new Date().getTime()}_${uploadedPdfFile.name}`;\n      const fileStorageRef = storageRef(storage, fileName);\n      await uploadBytes(fileStorageRef, uploadedPdfFile);\n      const pdfStorageUrl = await getDownloadURL(fileStorageRef);\n\n      const functionUrl = `https://us-central1-sitemate-otkpt.cloudfunctions.net/convertPdfToWord`;\n\n      const response = await fetch(functionUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ fileUrl: pdfStorageUrl }),\n      });\n\n      if (!response.ok) {\n        let errorData;\n        try {\n            errorData = await response.json();\n        } catch (e) {\n            const errorText = await response.text();\n            errorData = { detail: errorText || response.statusText };\n        }\n\n        const detailMessage = errorData?.detail || errorData?.error || `HTTP error! status: ${response.status}`;\n        let toastDescription = detailMessage;\n        if (typeof detailMessage === 'string' && (detailMessage.toLowerCase().includes(\"method not found\") || detailMessage.toLowerCase().includes(\"api key not configured\") || detailMessage.toLowerCase().includes(\"please provide your api key\")) ) {\n             toastDescription = texts.pdfCoMethodNotFoundError;\n        }\n        throw new Error(detailMessage);\n      }\n\n      const result = await response.json();\n\n      if (!result.wordUrl) {\n        throw new Error(\"Firebase Function did not return a Word file URL.\");\n      }\n\n      setWordFileUrl(result.wordUrl);\n      toast({ title: texts.wordConvertSuccess, description: texts.downloadWordFile });\n\n      if (!isLoggedIn && typeof window !== 'undefined') {\n        const today = new Date().toISOString().split('T')[0];\n        let wordConversionInfoString = localStorage.getItem('DocuPilotWordConversionInfo');\n        let wordConversionInfo = wordConversionInfoString ? JSON.parse(wordConversionInfoString) : { count: 0, date: today };\n        if (wordConversionInfo.date !== today) { wordConversionInfo = { count: 0, date: today };}\n        wordConversionInfo.count++;\n        localStorage.setItem('DocuPilotWordConversionInfo', JSON.stringify(wordConversionInfo));\n      }\n\n    } catch (error: any) {\n      let errMsg = error.message || (currentLanguage === 'zh' ? \"未知錯誤\" : \"Unknown error\");\n\n      if (typeof errMsg === 'string' && (errMsg.toLowerCase().includes(\"method not found\") || errMsg.toLowerCase().includes(\"api key\") || errMsg.toLowerCase().includes(\"please provide your api key\") )) {\n        errMsg = texts.pdfCoMethodNotFoundError;\n      } else if (errMsg.toLowerCase().includes(\"pdf.co api key is not correctly hardcoded\")) {\n        errMsg = (currentLanguage === 'zh' ? \"後端 API 金鑰設定錯誤，請聯絡管理員。\" : \"Backend API Key configuration error. Please contact administrator.\");\n      }\n\n      setWordConversionError(`${texts.wordConvertError}: ${errMsg}`);\n      toast({ title: texts.wordConvertError, description: errMsg, variant: \"destructive\" });\n    } finally {\n      setIsConvertingToWord(false);\n      setLoadingMessage('');\n    }\n  };\n\n  const commonDragEvents = {\n    onDragOver: (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        e.stopPropagation();\n        e.currentTarget.classList.add('border-primary', 'bg-primary/10');\n    },\n    onDragLeave: (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        e.stopPropagation();\n        e.currentTarget.classList.remove('border-primary', 'bg-primary/10');\n    },\n    onDrop: (e: React.DragEvent<HTMLDivElement>, handler: (event: React.DragEvent<HTMLDivElement>) => void) => {\n        e.preventDefault();\n        e.stopPropagation();\n        e.currentTarget.classList.remove('border-primary', 'bg-primary/10');\n        handler(e);\n    }\n  };\n\n  const handleImageToPdf = async () => {\n    if (!imageFiles || imageFiles.length === 0) {\n      toast({ title: texts.imageToPdfError, description: texts.noImagesSelected, variant: \"destructive\" });\n      return;\n    }\n    setIsConvertingImagesToPdf(true);\n    setLoadingMessage(texts.generatingPdfFromImages);\n    try {\n      const pdfDoc = await PDFLibDocument.create();\n      for (let i = 0; i < imageFiles.length; i++) {\n        const file = imageFiles[i];\n        const imageBytes = await file.arrayBuffer();\n        let image;\n        if (file.type === 'image/jpeg' || file.type === 'image/jpg') {\n          image = await pdfDoc.embedJpg(imageBytes);\n        } else if (file.type === 'image/png') {\n          image = await pdfDoc.embedPng(imageBytes);\n        } else {\n          console.warn(`Skipping unsupported image type: ${file.type}`);\n          toast({ title: texts.imageToPdfError, description: `Unsupported image type: ${file.name}`, variant: \"destructive\" });\n          continue;\n        }\n        const page = pdfDoc.addPage([image.width, image.height]);\n        page.drawImage(image, {\n          x: 0,\n          y: 0,\n          width: image.width,\n          height: image.height,\n        });\n      }\n      if (pdfDoc.getPageCount() === 0) {\n        toast({ title: texts.imageToPdfError, description: texts.noImagesSelected, variant: \"destructive\" });\n        setIsConvertingImagesToPdf(false);\n        setLoadingMessage('');\n        return;\n      }\n      const pdfBytes = await pdfDoc.save();\n      const blob = new Blob([pdfBytes], { type: 'application/pdf' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'DocuPilot_Images.pdf';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      toast({ title: texts.imageToPdfTitle, description: texts.imageToPdfSuccess });\n    } catch (err: any) {\n      console.error(\"Image to PDF error:\", err);\n      toast({ title: texts.imageToPdfError, description: err.message, variant: \"destructive\" });\n    } finally {\n      setIsConvertingImagesToPdf(false);\n      setLoadingMessage('');\n      setImageFiles(null);\n      if(imageToPdfUploadRef.current) imageToPdfUploadRef.current.value = '';\n    }\n  };\n\n  const handlePdfCompression = async () => {\n    if (!pdfToCompress) {\n      toast({ title: texts.pdfCompressionError, description: texts.noPdfToCompress, variant: \"destructive\" });\n      return;\n    }\n    setIsCompressingPdf(true);\n    setLoadingMessage(texts.compressingPdf);\n    try {\n      const arrayBuffer = await pdfToCompress.arrayBuffer();\n      const pdfDoc = await PDFLibDocument.load(arrayBuffer);\n      const pdfBytes = await pdfDoc.save({ useObjectStreams: false });\n      const blob = new Blob([pdfBytes], { type: 'application/pdf' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${pdfToCompress.name.replace(/\\.pdf$/i, '')}_compressed.pdf`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      toast({ title: texts.pdfCompressionTitle, description: texts.pdfCompressionSuccess });\n    } catch (err: any) {\n      console.error(\"PDF Compression error:\", err);\n      toast({ title: texts.pdfCompressionError, description: err.message, variant: \"destructive\" });\n    } finally {\n      setIsCompressingPdf(false);\n      setLoadingMessage('');\n      setPdfToCompress(null);\n      if(pdfCompressUploadRef.current) pdfCompressUploadRef.current.value = '';\n    }\n  };\n\n    const handleDragMouseDown = (\n        event: React.MouseEvent<HTMLElement>,\n        type: 'watermark' | 'annotation',\n        id: string,\n        initialTopRatio: number,\n        initialLeftRatio: number\n    ) => {\n        event.stopPropagation();\n        isDraggingRef.current = false;\n\n        const draggedElement = event.currentTarget as HTMLElement;\n        const containerElement = (type === 'watermark' ? watermarkPreviewCanvasContainerRef.current : draggedElement.closest('.main-page-container')) as HTMLElement;\n\n        if (!containerElement) return;\n\n        const containerRect = containerElement.getBoundingClientRect();\n        const initialMouseX = event.clientX;\n        const initialMouseY = event.clientY;\n\n        const handleMouseMove = (moveEvent: MouseEvent) => {\n            moveEvent.preventDefault();\n            isDraggingRef.current = true;\n            draggedElement.style.cursor = 'grabbing';\n\n            const deltaX = moveEvent.clientX - initialMouseX;\n            const deltaY = moveEvent.clientY - initialMouseY;\n\n            const newLeftPx = (initialLeftRatio * containerRect.width) + deltaX;\n            const newTopPx = (initialTopRatio * containerRect.height) + deltaY;\n\n            const newLeftRatio = Math.max(0, Math.min(1, newLeftPx / containerRect.width));\n            const newTopRatio = Math.max(0, Math.min(1, newTopPx / containerRect.height));\n\n            if (type === 'watermark') {\n                setTempWatermarkConfig(prev => ({\n                    ...prev,\n                    topRatio: parseFloat(newTopRatio.toFixed(4)),\n                    leftRatio: parseFloat(newLeftRatio.toFixed(4))\n                }));\n            } else if (type === 'annotation') {\n                setTextAnnotations(prev => prev.map(ann =>\n                    ann.id === id ? { ...ann, topRatio: newTopRatio, leftRatio: newLeftRatio } : ann\n                ));\n            }\n        };\n\n        const handleMouseUp = () => {\n            document.removeEventListener('mousemove', handleMouseMove);\n            document.removeEventListener('mouseup', handleMouseUp);\n            draggedElement.style.cursor = 'grab';\n\n            if (!isDraggingRef.current && type === 'annotation') {\n                setSelectedAnnotationId(id);\n            }\n        };\n\n        document.addEventListener('mousemove', handleMouseMove);\n        document.addEventListener('mouseup', handleMouseUp);\n    };\n\n\n  const openWatermarkPreviewModal = () => {\n    if (pageObjects.length === 0) {\n        toast({ title: texts.watermarkSectionTitle, description: texts.noPdfForWatermarkPreview, variant: \"destructive\"});\n        return;\n    }\n    setTempWatermarkConfig(watermarkConfig);\n    setIsWatermarkPreviewModalOpen(true);\n  };\n\n   useEffect(() => {\n    if (isWatermarkPreviewModalOpen && pageObjects.length > 0) {\n      const canvas = watermarkPreviewModalCanvasRef.current;\n      const ctx = canvas?.getContext('2d');\n      const sourceCanvas = pageObjects[0].sourceCanvas;\n      if (canvas && ctx && sourceCanvas) {\n        const container = watermarkPreviewCanvasContainerRef.current;\n        if (container) {\n          const scaleFactor = Math.min(\n            (container.clientWidth * 0.95) / sourceCanvas.width,\n            (container.clientHeight * 0.95) / sourceCanvas.height\n          );\n          canvas.width = sourceCanvas.width * scaleFactor;\n          canvas.height = sourceCanvas.height * scaleFactor;\n          ctx.drawImage(sourceCanvas, 0, 0, canvas.width, canvas.height);\n        }\n      }\n    }\n  }, [isWatermarkPreviewModalOpen, pageObjects, tempWatermarkConfig.imageUrl]); // Re-run when image changes too\n\n  const handleWatermarkImageFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        setTempWatermarkConfig(prev => ({\n          ...prev,\n          imageUrl: reader.result as string,\n          type: 'image'\n        }));\n      };\n      reader.readAsDataURL(file);\n    }\n    if (watermarkImageUploadRef.current) watermarkImageUploadRef.current.value = '';\n  };\n\n\n  const confirmWatermarkSettings = () => {\n    setWatermarkConfig(tempWatermarkConfig);\n    setIsWatermarkPreviewModalOpen(false);\n  };\n\n  const handleThumbnailClick = (index: number, event: React.MouseEvent) => {\n      if (viewMode === 'editor') {\n          setActivePageIndex(index);\n          const targetPage = pageRefs.current[index];\n          if (targetPage) {\n              targetPage.scrollIntoView({ behavior: 'smooth', block: 'center' });\n          }\n      } else {\n          const clickedId = pageObjects[index].id;\n          const newSelectedPageIds = new Set(selectedPageIds);\n          if (newSelectedPageIds.has(clickedId)) {\n              newSelectedPageIds.delete(clickedId);\n          } else {\n              newSelectedPageIds.add(clickedId);\n          }\n          setSelectedPageIds(newSelectedPageIds);\n      }\n  };\n\n    const handleRotatePage = (direction: 'cw' | 'ccw') => {\n        if (activePageIndex === null) return;\n        setPageObjects(prev => prev.map((page, index) => {\n            if (index === activePageIndex) {\n                const newRotation = (page.rotation + (direction === 'cw' ? 90 : -90) + 360) % 360;\n                return { ...page, rotation: newRotation };\n            }\n            return page;\n        }));\n    };\n\n    const handleAddBlankPage = () => {\n        const blankCanvas = document.createElement('canvas');\n        \n        if (pageObjects.length > 0 && pageObjects[0].sourceCanvas) {\n            blankCanvas.width = pageObjects[0].sourceCanvas.width;\n            blankCanvas.height = pageObjects[0].sourceCanvas.height;\n        } else {\n            blankCanvas.width = 2480; \n            blankCanvas.height = 3508;\n        }\n\n        const ctx = blankCanvas.getContext('2d');\n        if (ctx) {\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0, 0, blankCanvas.width, blankCanvas.height);\n        }\n        const newPageObject: PageObject = { id: uuidv4(), sourceCanvas: blankCanvas, rotation: 0 };\n\n        const insertAt = (activePageIndex === null ? pageObjects.length - 1 : activePageIndex) + 1;\n\n        setPageObjects(prev => {\n            const newPages = [...prev];\n            newPages.splice(insertAt, 0, newPageObject);\n            return newPages;\n        });\n\n        setActivePageIndex(insertAt);\n        setSelectedPageIds(new Set([newPageObject.id]));\n        \n        setTimeout(() => {\n            const newPageElement = pageRefs.current[insertAt];\n            if (newPageElement) {\n                newPageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            }\n        }, 100);\n    };\n\n    const handleAddTextAnnotation = () => {\n      if (activePageIndex === null) {\n          toast({ title: texts.toolInsertText, description: texts.noPageSelected, variant: \"destructive\" });\n          return;\n      }\n      const newAnnotation: TextAnnotation = {\n          id: uuidv4(),\n          pageIndex: activePageIndex,\n          text: texts.textAnnotationSample,\n          topRatio: 0.5,\n          leftRatio: 0.5,\n          fontSize: 24,\n          color: '#000000',\n      };\n      setTextAnnotations(prev => [...prev, newAnnotation]);\n      setSelectedAnnotationId(newAnnotation.id);\n    };\n    \n    const updateSelectedAnnotation = (prop: keyof TextAnnotation, value: any) => {\n        if (!selectedAnnotationId) return;\n        setTextAnnotations(prev => prev.map(ann => \n            ann.id === selectedAnnotationId ? { ...ann, [prop]: value } : ann\n        ));\n    };\n\n    const selectedAnnotation = textAnnotations.find(ann => ann.id === selectedAnnotationId);\n\n\n    const handlePlaceholderClick = (featureName: string) => {\n        toast({\n            title: texts.comingSoon,\n            description: `${featureName} ${texts.featureNotImplemented}`\n        });\n    };\n\n    const handleZoom = (direction: 'in' | 'out') => {\n      const ZOOM_STEP = 0.1;\n      setMainCanvasZoom(prev => {\n        let newZoom = direction === 'in' ? prev + ZOOM_STEP : prev - ZOOM_STEP;\n        return Math.max(0.1, Math.min(newZoom, 5));\n      });\n    };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-background text-foreground font-sans\">\n      {(isLoading || isDownloading || isConvertingToWord || isConvertingImagesToPdf || isCompressingPdf) && (\n        <div className=\"fixed inset-0 bg-black/50 z-[100] flex flex-col items-center justify-center\">\n          <Loader2 className=\"h-12 w-12 text-primary animate-spin mb-4\" />\n          <p className=\"text-white text-lg\">\n            {isLoading ? loadingMessage :\n             isConvertingToWord ? texts.convertingToWord :\n             isDownloading ? texts.generatingFile :\n             isConvertingImagesToPdf ? texts.generatingPdfFromImages :\n             isCompressingPdf ? texts.compressingPdf : ''}\n          </p>\n        </div>\n      )}\n\n      {isWatermarkPreviewModalOpen && (\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"watermark-preview-title\"\n          className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/70 backdrop-blur-sm\"\n          onClick={() => setIsWatermarkPreviewModalOpen(false)}\n        >\n          <div\n            className=\"bg-card text-card-foreground shadow-2xl rounded-lg w-[90vw] max-w-6xl h-[90vh] flex flex-row overflow-hidden\"\n            onClick={(e) => e.stopPropagation()}\n            role=\"document\"\n          >\n            <div\n                ref={watermarkPreviewCanvasContainerRef}\n                className=\"flex-grow p-4 overflow-auto bg-muted/20 flex justify-center items-center relative\"\n            >\n              <canvas\n                ref={watermarkPreviewModalCanvasRef}\n                className=\"max-w-full max-h-full object-contain shadow-md\"\n              />\n\n              {watermarkPreviewCanvasContainerRef.current && (\n                <>\n                {tempWatermarkConfig.type === 'text' && tempWatermarkConfig.text && (\n                    <div\n                    onMouseDown={(e) => handleDragMouseDown(e, 'watermark', 'watermark-drag-handle', tempWatermarkConfig.topRatio, tempWatermarkConfig.leftRatio)}\n                    style={{\n                        position: 'absolute',\n                        top: `${tempWatermarkConfig.topRatio * 100}%`,\n                        left: `${tempWatermarkConfig.leftRatio * 100}%`,\n                        transform: `translate(-50%, -50%)`,\n                        fontSize: `${Math.max(8, tempWatermarkConfig.fontSize * ((watermarkPreviewModalCanvasRef.current?.height || 600) / 842 / 2) )}px`,\n                        color: tempWatermarkConfig.color,\n                        opacity: tempWatermarkConfig.opacity,\n                        cursor: 'grab',\n                        padding: '3px 5px',\n                        backgroundColor: 'rgba(200,200,200,0.2)',\n                        border: '1px dashed gray',\n                        userSelect: 'none',\n                        whiteSpace: 'nowrap',\n                        zIndex: 10,\n                    }}\n                    className=\"draggable-watermark-modal\"\n                    >\n                    {tempWatermarkConfig.text}\n                    </div>\n                )}\n                {tempWatermarkConfig.type === 'image' && tempWatermarkConfig.imageUrl && (\n                    <img\n                    src={tempWatermarkConfig.imageUrl}\n                    alt=\"Watermark\"\n                    onMouseDown={(e) => handleDragMouseDown(e, 'watermark', 'watermark-drag-handle', tempWatermarkConfig.topRatio, tempWatermarkConfig.leftRatio)}\n                    style={{\n                        position: 'absolute',\n                        top: `${tempWatermarkConfig.topRatio * 100}%`,\n                        left: `${tempWatermarkConfig.leftRatio * 100}%`,\n                        transform: `translate(-50%, -50%)`,\n                        opacity: tempWatermarkConfig.opacity,\n                        cursor: 'grab',\n                        maxWidth: '200px',\n                        maxHeight: '200px',\n                        userSelect: 'none',\n                        zIndex: 10,\n                        objectFit: 'contain',\n                        border: '1px dashed gray',\n                    }}\n                    className=\"draggable-watermark-modal\"\n                    />\n                )}\n                </>\n              )}\n            </div>\n            <div className=\"w-80 flex-shrink-0 p-4 border-l space-y-4 overflow-y-auto\">\n                <h2 id=\"watermark-preview-title\" className=\"text-lg font-semibold\">{texts.watermarkPreviewModalTitle}</h2>\n                <p className=\"text-sm text-muted-foreground\">{texts.watermarkPreviewInfo}</p>\n                <Separator />\n                \n                <RadioGroup value={tempWatermarkConfig.type} onValueChange={(value) => setTempWatermarkConfig(p => ({...p, type: value as 'text' | 'image'}))} className=\"flex space-x-2\">\n                    <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"text\" id=\"r1-modal\" /><Label htmlFor=\"r1-modal\">{texts.watermarkTypeText}</Label></div>\n                    <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"image\" id=\"r2-modal\" /><Label htmlFor=\"r2-modal\">{texts.watermarkTypeImage}</Label></div>\n                </RadioGroup>\n\n                {tempWatermarkConfig.type === 'text' ? (\n                  <>\n                    <div>\n                        <Label htmlFor=\"modalWatermarkText\" className=\"text-sm font-medium\">{texts.watermarkInputPlaceholder}</Label>\n                        <Input\n                            id=\"modalWatermarkText\"\n                            type=\"text\"\n                            value={tempWatermarkConfig.text}\n                            onChange={(e) => setTempWatermarkConfig(prev => ({...prev, text: e.target.value}))}\n                            className=\"mt-1\"\n                        />\n                    </div>\n                    <div>\n                        <Label htmlFor=\"modalWatermarkFontSize\" className=\"text-sm font-medium\">{texts.watermarkFontSizeLabel} (pt for PDF)</Label>\n                        <Input\n                            id=\"modalWatermarkFontSize\"\n                            type=\"number\"\n                            value={tempWatermarkConfig.fontSize}\n                            onChange={(e) => setTempWatermarkConfig(prev => ({...prev, fontSize: parseInt(e.target.value, 10) || 20}))}\n                            min=\"8\"\n                            max=\"200\"\n                            className=\"mt-1\"\n                        />\n                    </div>\n                    <div>\n                        <Label htmlFor=\"modalWatermarkColor\" className=\"text-sm font-medium\">{texts.watermarkColorLabel}</Label>\n                        <Input\n                            id=\"modalWatermarkColor\"\n                            type=\"color\"\n                            value={tempWatermarkConfig.color}\n                            onChange={(e) => setTempWatermarkConfig(prev => ({...prev, color: e.target.value}))}\n                            className=\"mt-1 h-10 w-full\"\n                        />\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <Button variant=\"outline\" onClick={() => watermarkImageUploadRef.current?.click()} className=\"w-full\">{texts.watermarkImageLabel}</Button>\n                    <Input type=\"file\" accept=\"image/png,image/jpeg\" ref={watermarkImageUploadRef} onChange={handleWatermarkImageFileChange} className=\"hidden\"/>\n                    {tempWatermarkConfig.imageUrl && <img src={tempWatermarkConfig.imageUrl} alt=\"watermark\" className=\"max-w-full h-auto rounded-md border p-1\"/>}\n                  </>\n                )}\n                \n                 <div>\n                    <Label htmlFor=\"modalWatermarkOpacity\" className=\"text-sm font-medium\">{texts.watermarkOpacityLabel} ({Math.round(tempWatermarkConfig.opacity * 100)}%)</Label>\n                    <Slider\n                        id=\"modalWatermarkOpacity\"\n                        min={0} max={1} step={0.01}\n                        value={[tempWatermarkConfig.opacity]}\n                        onValueChange={(value) => setTempWatermarkConfig(prev => ({...prev, opacity: value[0]}))}\n                        className=\"mt-1\"\n                    />\n                </div>\n                <div className=\"pt-4 flex justify-end gap-2\">\n                  <Button variant=\"outline\" onClick={() => setIsWatermarkPreviewModalOpen(false)}>{texts.cancel}</Button>\n                  <Button onClick={confirmWatermarkSettings}>{texts.watermarkConfirmPosition}</Button>\n                </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n\n      <AlertDialog open={isInsertConfirmOpen} onOpenChange={setIsInsertConfirmOpen}>\n        <AlertDialogContent>\n          <ShadAlertDialogHeader>\n            <ShadAlertDialogTitle>{texts.insertConfirmTitle}</ShadAlertDialogTitle>\n            <AlertDialogDescription>\n              {texts.insertConfirmDescription}\n            </AlertDialogDescription>\n          </ShadAlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={() => setPendingInsertFile(null)}>{texts.cancel}</AlertDialogCancel>\n            <AlertDialogAction onClick={() => proceedWithInsert()}>{texts.confirm}</AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AlertDialog open={showPaymentModal} onOpenChange={setShowPaymentModal}>\n        <AlertDialogContent>\n            <ShadAlertDialogHeader>\n            <ShadAlertDialogTitle>{texts.downloadLimitTitle}</ShadAlertDialogTitle>\n            <AlertDialogDescription>\n                {texts.downloadLimitDescription}\n            </AlertDialogDescription>\n            </ShadAlertDialogHeader>\n            <AlertDialogFooter>\n            <AlertDialogCancel>{texts.cancel}</AlertDialogCancel>\n            <AlertDialogAction onClick={() => router.push('/login')}>{texts.login}</AlertDialogAction>\n            </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AlertDialog open={isDeleteConfirmOpen} onOpenChange={setIsDeleteConfirmOpen}>\n        <AlertDialogContent>\n            <ShadAlertDialogHeader>\n            <ShadAlertDialogTitle>{texts.deletePageConfirmTitle}</ShadAlertDialogTitle>\n            <AlertDialogDescription>\n                {texts.deletePageConfirmDescription}\n            </AlertDialogDescription>\n            </ShadAlertDialogHeader>\n            <AlertDialogFooter>\n            <AlertDialogCancel>{texts.cancel}</AlertDialogCancel>\n            <AlertDialogAction onClick={() => handleDeletePages()}>{texts.confirm}</AlertDialogAction>\n            </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AlertDialog open={showWordLimitModal} onOpenChange={setShowWordLimitModal}>\n        <AlertDialogContent>\n            <ShadAlertDialogHeader>\n            <ShadAlertDialogTitle>{texts.wordConvertLimitTitle}</ShadAlertDialogTitle>\n            <AlertDialogDescription>\n                {texts.wordConvertLimitDescription}\n            </AlertDialogDescription>\n            </ShadAlertDialogHeader>\n            <AlertDialogFooter>\n            <AlertDialogCancel>{texts.cancel}</AlertDialogCancel>\n            <AlertDialogAction onClick={() => router.push('/login')}>{texts.login}</AlertDialogAction>\n            </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <header className=\"p-4 border-b bg-card sticky top-0 z-40 flex-shrink-0\">\n        <div className=\"container mx-auto flex justify-between items-center\">\n            <h1 className=\"text-xl font-bold text-primary flex items-center\">\n              <MenuSquare className=\"mr-2 h-6 w-6\"/> {texts.pageTitle}\n            </h1>\n\n            {pageObjects.length > 0 && (\n                <div className='flex items-center gap-2'>\n                    <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setViewMode(viewMode === 'editor' ? 'grid' : 'editor')}\n                        title={viewMode === 'editor' ? texts.gridMode : texts.editorMode}\n                    >\n                        {viewMode === 'editor' ? <LayoutGrid className='h-4 w-4 mr-2' /> : <PanelLeft className='h-4 w-4 mr-2' />}\n                        {viewMode === 'editor' ? texts.gridMode : texts.editorMode}\n                    </Button>\n                    <Button onClick={handleDownloadPdf} disabled={isDownloading}>\n                        <Download className=\"mr-2 h-4 w-4\" />\n                        {texts.downloadPdf}\n                    </Button>\n                </div>\n            )}\n\n            <div className=\"flex items-center gap-4\">\n                <div className=\"flex gap-2\">\n                    <Button variant={currentLanguage === 'en' ? \"secondary\" : \"outline\"} size=\"sm\" onClick={() => updateLanguage('en')}>English</Button>\n                    <Button variant={currentLanguage === 'zh' ? \"secondary\" : \"outline\"} size=\"sm\" onClick={() => updateLanguage('zh')}>中文</Button>\n                </div>\n                {isLoggedIn ? (\n                    <div className=\"flex items-center gap-2\">\n                        <UserCircle className=\"h-5 w-5 text-muted-foreground\" />\n                        <span className=\"text-sm text-muted-foreground\">{texts.loggedInAs}</span>\n                        <Button variant=\"outline\" size=\"sm\" onClick={handleLogout}>\n                            <LogOut className=\"mr-2 h-4 w-4\"/> {texts.logout}\n                        </Button>\n                    </div>\n                ) : (\n                   <div className=\"flex items-center gap-2\">\n                        <UserCircle className=\"h-5 w-5 text-muted-foreground\" />\n                         <span className=\"text-sm text-muted-foreground\">{texts.guest}</span>\n                        <Link href=\"/login\" passHref>\n                            <Button variant=\"ghost\" size=\"sm\">\n                                <LogIn className=\"mr-2 h-4 w-4\"/> {texts.login}\n                            </Button>\n                        </Link>\n                    </div>\n                )}\n            </div>\n        </div>\n      </header>\n\n      <main className=\"flex-grow flex overflow-hidden\">\n        {pageObjects.length === 0 ? (\n            <div className=\"flex-grow flex flex-col items-center justify-center p-4 space-y-8\">\n              <Card className=\"w-full max-w-lg shadow-xl\">\n                <CardHeader className=\"text-center\">\n                  <Upload className=\"h-16 w-16 text-primary mx-auto mb-4\" />\n                  <CardTitle className=\"text-2xl font-bold\">{texts.startEditingYourPdf}</CardTitle>\n                  <CardDescription>{texts.uploadLabel}</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div\n                    className=\"flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-md hover:border-primary transition-colors cursor-pointer bg-muted/20\"\n                    onClick={() => pdfUploadRef.current?.click()}\n                    onDragOver={commonDragEvents.onDragOver}\n                    onDragLeave={commonDragEvents.onDragLeave}\n                    onDrop={(e) => commonDragEvents.onDrop(e, (ev) => handlePdfUpload(ev as any))}\n                  >\n                    <Upload className=\"h-12 w-12 text-muted-foreground mb-3\" />\n                    <p className=\"text-md text-muted-foreground text-center\">{texts.dropFileHere}</p>\n                  </div>\n                  <Input\n                    type=\"file\"\n                    id=\"pdfUploadInput\"\n                    accept=\"application/pdf\"\n                    onChange={handlePdfUpload}\n                    ref={pdfUploadRef}\n                    className=\"hidden\"\n                  />\n                </CardContent>\n              </Card>\n\n              <div className=\"w-full max-w-lg grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <Card className=\"shadow-lg\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center text-lg\"><ImageIcon className=\"mr-2 h-5 w-5 text-primary\" /> {texts.imageToPdfTitle}</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div\n                        className=\"flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-md hover:border-primary transition-colors cursor-pointer bg-muted/20\"\n                        onClick={() => imageToPdfUploadRef.current?.click()}\n                        onDragOver={commonDragEvents.onDragOver}\n                        onDragLeave={commonDragEvents.onDragLeave}\n                        onDrop={(e) => {\n                            commonDragEvents.onDrop(e, (ev) => {\n                                if (ev.dataTransfer.files) setImageFiles(ev.dataTransfer.files);\n                            });\n                        }}\n                    >\n                        <Upload className=\"h-10 w-10 text-muted-foreground mb-2\" />\n                        <p className=\"text-sm text-muted-foreground text-center\">{texts.dropImagesHere}</p>\n                        <Input type=\"file\" id=\"imageToPdfInput\" accept=\"image/*\" multiple\n                            ref={imageToPdfUploadRef}\n                            onChange={(e) => setImageFiles(e.target.files)}\n                            className=\"hidden\" />\n                    </div>\n                    {imageFiles && imageFiles.length > 0 && <p className=\"text-xs text-muted-foreground\">{imageFiles.length} image(s) selected.</p>}\n                    <Button onClick={handleImageToPdf} disabled={!imageFiles || imageFiles.length === 0 || isConvertingImagesToPdf} className=\"w-full\">\n                        {isConvertingImagesToPdf ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Download className=\"mr-2 h-4 w-4\" />}\n                        {texts.convertToPdfButton}\n                    </Button>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"shadow-lg\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center text-lg\"><Minimize2 className=\"mr-2 h-5 w-5 text-primary\" /> {texts.pdfCompressionTitle}</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                     <div\n                        className=\"flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-md hover:border-primary transition-colors cursor-pointer bg-muted/20\"\n                        onClick={() => pdfCompressUploadRef.current?.click()}\n                        onDragOver={commonDragEvents.onDragOver}\n                        onDragLeave={commonDragEvents.onDragLeave}\n                        onDrop={(e) => {\n                            commonDragEvents.onDrop(e, (ev) => {\n                                if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) setPdfToCompress(ev.dataTransfer.files[0]);\n                            });\n                        }}\n                    >\n                        <Upload className=\"h-10 w-10 text-muted-foreground mb-2\" />\n                        <p className=\"text-sm text-muted-foreground text-center\">{texts.dropPdfToCompressHere}</p>\n                        <Input type=\"file\" id=\"pdfCompressInput\" accept=\"application/pdf\"\n                            ref={pdfCompressUploadRef}\n                            onChange={(e) => setPdfToCompress(e.target.files ? e.target.files[0] : null)}\n                            className=\"hidden\" />\n                    </div>\n                     {pdfToCompress && <p className=\"text-xs text-muted-foreground\">{pdfToCompress.name} selected.</p>}\n                    <Button onClick={handlePdfCompression} disabled={!pdfToCompress || isCompressingPdf} className=\"w-full\">\n                        {isCompressingPdf ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Download className=\"mr-2 h-4 w-4\" />}\n                        {texts.compressPdfButton}\n                    </Button>\n                    <p className=\"text-xs text-muted-foreground\">{texts.pdfCompressionNote}</p>\n                  </CardContent>\n                </Card>\n              </div>\n\n            </div>\n          ) : viewMode === 'grid' ? (\n              <div ref={mainViewContainerRef} className=\"flex-grow p-6 overflow-y-auto\">\n                <Card className=\"shadow-lg\">\n                  <CardHeader className=\"flex flex-row items-center justify-between\">\n                    <div>\n                      <CardTitle className=\"flex items-center text-xl\"><Shuffle className=\"mr-2 h-5 w-5 text-primary\" /> {texts.pageManagement}</CardTitle>\n                      <CardDescription>\n                        {pageObjects.length} {texts.pagesLoaded}.\n                        {selectedPageIds.size > 0 ? ` ${selectedPageIds.size} ${texts.pageSelectedSuffix}.` : ''}\n                      </CardDescription>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button onClick={handleSplitPdf} variant=\"outline\" size=\"sm\" disabled={selectedPageIds.size === 0}>\n                        <Scissors className=\"mr-2 h-4 w-4\" /> {texts.splitPages}\n                      </Button>\n                      <Button onClick={() => { setPageToDelete(null); setIsDeleteConfirmOpen(true); }} variant=\"destructive\" size=\"sm\" disabled={selectedPageIds.size === 0}>\n                        <Trash2 className=\"mr-2 h-4 w-4\" /> {texts.deletePages}\n                      </Button>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <div\n                      id=\"previewContainer\"\n                      className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 p-1 bg-muted/20 rounded-md min-h-[200px]\"\n                    >\n                      {pageObjects.map((pageObj, index) => (\n                        <PagePreviewItem\n                          key={pageObj.id}\n                          pageObj={pageObj}\n                          index={index}\n                          isSelected={selectedPageIds.has(pageObj.id)}\n                          onClick={(e) => handleThumbnailClick(index, e)}\n                          onDoubleClick={() => {\n                            setActivePageIndex(index);\n                            setViewMode('editor');\n                          }}\n                          watermarkConfig={watermarkConfig}\n                          texts={texts}\n                        />\n                      ))}\n                    </div>\n                    <div className=\"mt-4 text-sm text-muted-foreground space-y-1\">\n                      <p><Info className=\"inline h-4 w-4 mr-1 text-primary/80\" /> {texts.instSelect}</p>\n                      <p><Info className=\"inline h-4 w-4 mr-1 text-primary/80\" /> {texts.instDrag}</p>\n                      <p><Info className=\"inline h-4 w-4 mr-1 text-primary/80\" /> Double-click page to enter editor mode.</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n          ) : (\n            <>\n                <div ref={thumbnailContainerRef} className=\"w-[13%] border-r bg-card flex-shrink-0 overflow-y-auto p-2 space-y-2\">\n                    {pageObjects.map((page, index) => {\n                        const isActive = activePageIndex === index;\n                        return (\n                           <div key={page.id}\n                                ref={el => thumbnailRefs.current[index] = el}\n                                data-id={page.id}\n                                onClick={(e) => handleThumbnailClick(index, e)}\n                                className={cn(\n                                    \"p-1 rounded-md cursor-pointer border-2\",\n                                    isActive ? \"border-primary\" : \"border-transparent\"\n                                )}>\n                                <canvas\n                                    ref={canvas => {\n                                        if (canvas) {\n                                            const ctx = canvas.getContext('2d');\n                                            if (!ctx) return;\n                                            const source = page.sourceCanvas;\n                                            const aspectRatio = source.width / source.height;\n                                            canvas.width = 240;\n                                            canvas.height = 240 / aspectRatio;\n                                            ctx.drawImage(source, 0, 0, canvas.width, canvas.height);\n                                        }\n                                    }}\n                                    className=\"w-full h-auto rounded-sm shadow-md bg-white\"\n                                />\n                               <p className='text-center text-xs mt-1 text-muted-foreground'>{texts.page} {index + 1}</p>\n                           </div>\n                        )\n                    })}\n                </div>\n\n                <div ref={mainViewContainerRef} className=\"flex-grow bg-muted/30 overflow-y-auto flex flex-col items-center p-4 space-y-4 relative\">\n                    {pageObjects.map((page, index) => {\n                        const {sourceCanvas, rotation} = page;\n                        \n                        return (\n                            <div \n                                key={page.id} \n                                ref={el => pageRefs.current[index] = el} \n                                data-page-index={index} \n                                className=\"shadow-lg bg-white relative my-2 main-page-container\" \n                                style={{\n                                    width: (rotation % 180 !== 0 ? sourceCanvas.height : sourceCanvas.width) * mainCanvasZoom,\n                                    height: (rotation % 180 !== 0 ? sourceCanvas.width : sourceCanvas.height) * mainCanvasZoom\n                                }}\n                            >\n                                <canvas\n                                    ref={canvas => {\n                                        if (canvas) {\n                                            const isRotated = rotation % 180 !== 0;\n                                            const canvasWidth = (isRotated ? sourceCanvas.height : sourceCanvas.width) * mainCanvasZoom;\n                                            const canvasHeight = (isRotated ? sourceCanvas.width : sourceCanvas.height) * mainCanvasZoom;\n                                            \n                                            canvas.width = canvasWidth;\n                                            canvas.height = canvasHeight;\n\n                                            const ctx = canvas.getContext('2d');\n                                            if (!ctx) return;\n\n                                            ctx.fillStyle = 'white';\n                                            ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                                            ctx.save();\n                                            ctx.translate(canvas.width / 2, canvas.height / 2);\n                                            ctx.rotate(rotation * Math.PI / 180);\n                                            \n                                            const imgWidth = isRotated ? canvasHeight : canvasWidth;\n                                            const imgHeight = isRotated ? canvasWidth : canvasHeight;\n\n                                            ctx.drawImage(sourceCanvas, -imgWidth / 2, -imgHeight / 2, imgWidth, imgHeight);\n                                            ctx.restore();\n                                        }\n                                    }}\n                                />\n                                {((watermarkConfig.type === 'text' && watermarkConfig.text) || (watermarkConfig.type === 'image' && watermarkConfig.imageUrl)) && (\n                                    <div\n                                        style={{\n                                            position: 'absolute',\n                                            top: `${watermarkConfig.topRatio * 100}%`,\n                                            left: `${watermarkConfig.leftRatio * 100}%`,\n                                            transform: 'translate(-50%, -50%)',\n                                            opacity: watermarkConfig.opacity,\n                                            pointerEvents: 'none',\n                                            zIndex: 10,\n                                        }}\n                                    >\n                                        {watermarkConfig.type === 'text' ? (\n                                            <span style={{\n                                              color: watermarkConfig.color,\n                                              fontSize: `${watermarkConfig.fontSize * mainCanvasZoom}px`,\n                                              whiteSpace: 'nowrap',\n                                            }}>\n                                              {watermarkConfig.text}\n                                            </span>\n                                        ) : (\n                                            <img\n                                                src={watermarkConfig.imageUrl!}\n                                                alt=\"watermark\"\n                                                style={{\n                                                    maxWidth: '200px', // Adjust as needed\n                                                    maxHeight: '200px',\n                                                    width: 'auto',\n                                                    height: 'auto'\n                                                }}\n                                            />\n                                        )}\n                                    </div>\n                                )}\n                                {textAnnotations.filter(ann => ann.pageIndex === index).map(ann => (\n                                    <div\n                                        key={ann.id}\n                                        onMouseDown={(e) => handleDragMouseDown(e, 'annotation', ann.id, ann.topRatio, ann.leftRatio)}\n                                        style={{\n                                            position: 'absolute',\n                                            left: `${ann.leftRatio * 100}%`,\n                                            top: `${ann.topRatio * 100}%`,\n                                            transform: `translate(-50%, -50%)`,\n                                            fontSize: `${ann.fontSize * mainCanvasZoom}px`,\n                                            color: ann.color,\n                                            border: selectedAnnotationId === ann.id ? '1px dashed blue' : '1px solid transparent',\n                                            cursor: 'grab',\n                                            userSelect: 'none',\n                                            padding: '2px',\n                                            whiteSpace: 'pre-wrap',\n                                            lineHeight: 1,\n                                            minWidth: '10px'\n                                        }}\n                                    >\n                                        {ann.text}\n                                    </div>\n                                ))}\n                            </div>\n                        )\n                    })}\n                    <div className=\"sticky bottom-4 mx-auto bg-card p-2 rounded-full shadow-lg flex items-center gap-1 border\">\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleZoom('out')} title={texts.zoomOut}><ZoomOut className=\"h-5 w-5\" /></Button>\n                        <div className=\"w-20 text-center text-sm font-medium tabular-nums text-foreground\" title=\"Current zoom\">{`${Math.round(mainCanvasZoom * 100)}%`}</div>\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleZoom('in')} title={texts.zoomIn}><ZoomIn className=\"h-5 w-5\" /></Button>\n                        <Separator orientation=\"vertical\" className=\"h-6 mx-1\" />\n                        <Button variant=\"ghost\" size=\"icon\" onClick={handleFitPage} title={texts.fitToPage}><Expand className=\"h-5 w-5\" /></Button>\n                        <Button variant=\"ghost\" size=\"icon\" onClick={handleFitToWidth} title={texts.fitToWidth}><Columns className=\"h-5 w-5\" /></Button>\n                    </div>\n                </div>\n\n                <div className=\"w-[17%] border-l bg-card flex-shrink-0 p-4 space-y-4 overflow-y-auto\">\n                    <div className=\"grid grid-cols-2 gap-2\">\n                        <ToolbarButton icon={RotateCw} label={texts.toolRotate} onClick={() => handleRotatePage('cw')} disabled={activePageIndex === null}/>\n                        <ToolbarButton icon={Trash2} label={texts.toolDelete} onClick={() => { if(activePageIndex !== null) { setPageToDelete(activePageIndex); setIsDeleteConfirmOpen(true); } }} disabled={activePageIndex === null}/>\n                        <ToolbarButton icon={FilePlus2} label={texts.toolAddBlank} onClick={handleAddBlankPage} />\n                        <ToolbarButton icon={Combine} label={texts.toolMerge} onClick={() => insertPdfRef.current?.click()} />\n                        <ToolbarButton icon={Scissors} label={texts.toolSplit} onClick={handleSplitPdf} disabled={selectedPageIds.size === 0}/>\n                        <ToolbarButton icon={Droplet} label={texts.toolWatermark} onClick={openWatermarkPreviewModal} disabled={pageObjects.length === 0} />\n                        <ToolbarButton icon={Type} label={texts.toolInsertText} onClick={handleAddTextAnnotation} disabled={activePageIndex === null}/>\n                        <ToolbarButton icon={ImagePlus} label={texts.toolInsertImage} onClick={() => handlePlaceholderClick(\"Insert Image\")} disabled={activePageIndex === null}/>\n                        <ToolbarButton icon={LinkIcon} label={texts.toolInsertLink} onClick={() => handlePlaceholderClick(\"Insert Link\")} disabled={activePageIndex === null}/>\n                        <ToolbarButton icon={MessageSquarePlus} label={texts.toolInsertComment} onClick={() => handlePlaceholderClick(\"Insert Comment\")} disabled={activePageIndex === null}/>\n                    </div>\n                     <Input\n                        type=\"file\"\n                        id=\"insertPdfInput\"\n                        accept=\"application/pdf\"\n                        onChange={handleInsertPdfFileSelected}\n                        ref={insertPdfRef}\n                        className=\"hidden\"\n                     />\n                     <Accordion type=\"multiple\" className=\"w-full\">\n                        <AccordionItem value=\"item-1\">\n                            <AccordionTrigger>{texts.watermarkSectionTitle}</AccordionTrigger>\n                            <AccordionContent className=\"space-y-4 pt-4\">\n                               <p className=\"text-sm text-muted-foreground\">{currentLanguage === 'zh' ? '在此設定全域浮水印。點擊下方按鈕以預覽並定位。' : 'Configure global watermark. Click below to preview and position.'}</p>\n                                <Button onClick={openWatermarkPreviewModal} disabled={pageObjects.length === 0} className=\"w-full\">{texts.watermarkPreviewButton}</Button>\n                            </AccordionContent>\n                        </AccordionItem>\n                        <AccordionItem value=\"item-2\" disabled={!selectedAnnotation}>\n                            <AccordionTrigger>{texts.textProperties}</AccordionTrigger>\n                            <AccordionContent className=\"space-y-4 pt-4\">\n                                {selectedAnnotation ? (\n                                    <>\n                                        <div>\n                                            <Label htmlFor=\"textAnnotationContent\">{texts.textAnnotationContent}</Label>\n                                            <Textarea id=\"textAnnotationContent\" value={selectedAnnotation.text} onChange={(e) => updateSelectedAnnotation('text', e.target.value)} />\n                                        </div>\n                                        <div>\n                                            <Label htmlFor=\"textAnnotationFontSize\">{texts.watermarkFontSizeLabel}</Label>\n                                            <Input id=\"textAnnotationFontSize\" type=\"number\" value={selectedAnnotation.fontSize} onChange={(e) => updateSelectedAnnotation('fontSize', parseInt(e.target.value, 10))} />\n                                        </div>\n                                        <div>\n                                            <Label htmlFor=\"textAnnotationColor\">{texts.watermarkColorLabel}</Label>\n                                            <Input id=\"textAnnotationColor\" type=\"color\" value={selectedAnnotation.color} onChange={(e) => updateSelectedAnnotation('color', e.target.value)} className=\"h-10 w-full\" />\n                                        </div>\n                                    </>\n                                ) : (\n                                    <p className=\"text-sm text-muted-foreground\">{currentLanguage === 'zh' ? '請先在頁面上選擇一個文字方塊以編輯屬性。' : 'Select a text box on the page to edit its properties.'}</p>\n                                )}\n                            </AccordionContent>\n                        </AccordionItem>\n                     </Accordion>\n                </div>\n            </>\n          )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}