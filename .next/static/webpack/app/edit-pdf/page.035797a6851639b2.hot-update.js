"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/edit-pdf/page",{

/***/ "(app-pages-browser)/./src/app/edit-pdf/components/PdfCanvas.tsx":
/*!***************************************************!*\
  !*** ./src/app/edit-pdf/components/PdfCanvas.tsx ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdfjs-dist/build/pdf */ \"(app-pages-browser)/./node_modules/pdfjs-dist/build/pdf.js\");\n/* harmony import */ var pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./src/lib/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\npdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__.GlobalWorkerOptions.workerSrc = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__.version, \"/pdf.worker.min.js\");\nconst PdfCanvas = (param)=>{\n    let { pdfFile, onTotalPages, onCurrentPageChange, zoom, rotations, scrollToPage, onScrollComplete, activeTool, setActiveTool, onObjectSelected, className } = param;\n    _s();\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [pages, setPages] = react__WEBPACK_IMPORTED_MODULE_1___default().useState([]);\n    const pageRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    // Load PDF document and pages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (!pdfFile) {\n                setPages([]);\n                return;\n            }\n            const reader = new FileReader();\n            reader.onload = ({\n                \"PdfCanvas.useEffect\": async ()=>{\n                    const data = new Uint8Array(reader.result);\n                    try {\n                        const doc = await pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__.getDocument({\n                            data\n                        }).promise;\n                        onTotalPages(doc.numPages);\n                        const pagePromises = Array.from({\n                            length: doc.numPages\n                        }, {\n                            \"PdfCanvas.useEffect.pagePromises\": (_, i)=>doc.getPage(i + 1)\n                        }[\"PdfCanvas.useEffect.pagePromises\"]);\n                        const loadedPages = await Promise.all(pagePromises);\n                        setPages(loadedPages);\n                    } catch (error) {\n                        console.error(\"Error loading PDF document:\", error);\n                    }\n                }\n            })[\"PdfCanvas.useEffect\"];\n            reader.readAsArrayBuffer(pdfFile);\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        pdfFile,\n        onTotalPages\n    ]);\n    // Setup Intersection Observer\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (!containerRef.current || pages.length === 0) return;\n            const observer = new IntersectionObserver({\n                \"PdfCanvas.useEffect\": (entries)=>{\n                    const visibleEntries = entries.filter({\n                        \"PdfCanvas.useEffect.visibleEntries\": (e)=>e.isIntersecting\n                    }[\"PdfCanvas.useEffect.visibleEntries\"]);\n                    if (visibleEntries.length > 0) {\n                        visibleEntries.sort({\n                            \"PdfCanvas.useEffect\": (a, b)=>a.boundingClientRect.top - b.boundingClientRect.top\n                        }[\"PdfCanvas.useEffect\"]);\n                        const topMostVisible = visibleEntries[0];\n                        const pageNum = Number(topMostVisible.target.dataset.pageNumber);\n                        if (pageNum) {\n                            onCurrentPageChange(pageNum);\n                        }\n                    }\n                }\n            }[\"PdfCanvas.useEffect\"], {\n                root: containerRef.current,\n                rootMargin: \"-50% 0px -50% 0px\",\n                threshold: 0.1\n            });\n            const currentRefs = pageRefs.current;\n            currentRefs.forEach({\n                \"PdfCanvas.useEffect\": (ref)=>{\n                    if (ref) observer.observe(ref);\n                }\n            }[\"PdfCanvas.useEffect\"]);\n            return ({\n                \"PdfCanvas.useEffect\": ()=>{\n                    currentRefs.forEach({\n                        \"PdfCanvas.useEffect\": (ref)=>{\n                            if (ref) observer.unobserve(ref);\n                        }\n                    }[\"PdfCanvas.useEffect\"]);\n                }\n            })[\"PdfCanvas.useEffect\"];\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        pages,\n        onCurrentPageChange\n    ]);\n    // Scroll to a specific page\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (scrollToPage && pageRefs.current[scrollToPage - 1]) {\n                var _pageRefs_current_;\n                (_pageRefs_current_ = pageRefs.current[scrollToPage - 1]) === null || _pageRefs_current_ === void 0 ? void 0 : _pageRefs_current_.scrollIntoView({\n                    behavior: \"auto\",\n                    block: \"start\"\n                });\n                onScrollComplete();\n            }\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        scrollToPage,\n        onScrollComplete\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(\"w-full h-full flex flex-col items-center overflow-auto bg-muted p-4\", className),\n        children: pages.map((page, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PageRenderer, {\n                page: page,\n                zoom: zoom,\n                rotation: rotations[index + 1] || 0,\n                activeTool: activeTool,\n                setActiveTool: setActiveTool,\n                onObjectSelected: onObjectSelected,\n                ref: (el)=>pageRefs.current[index] = el\n            }, page.pageNumber, false, {\n                fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n                lineNumber: 112,\n                columnNumber: 9\n            }, undefined))\n    }, void 0, false, {\n        fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n        lineNumber: 107,\n        columnNumber: 5\n    }, undefined);\n};\n_s(PdfCanvas, \"K4d2l9lURtlUpUYqWzGInI8yMiU=\");\n_c = PdfCanvas;\nconst PageRenderer = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().forwardRef(_s1((param, ref)=>{\n    let { page, zoom, rotation, activeTool, setActiveTool, onObjectSelected } = param;\n    _s1();\n    const pdfCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const fabricCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const fabricInstanceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Refs for text drawing state\n    const isDrawingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const startPosRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rectRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Render PDF background and initialize Fabric canvas\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PageRenderer.useEffect\": ()=>{\n            let renderTask = null;\n            let fCanvas = null;\n            const renderAndInit = {\n                \"PageRenderer.useEffect.renderAndInit\": async ()=>{\n                    const { fabric } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_fabric_dist_fabric_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! fabric */ \"(app-pages-browser)/./node_modules/fabric/dist/fabric.js\", 23));\n                    if (!pdfCanvasRef.current || !fabricCanvasRef.current) return;\n                    const pdfCanvas = pdfCanvasRef.current;\n                    const ctx = pdfCanvas.getContext(\"2d\");\n                    if (!ctx) return;\n                    const viewport = page.getViewport({\n                        scale: zoom,\n                        rotation\n                    });\n                    pdfCanvas.width = viewport.width;\n                    pdfCanvas.height = viewport.height;\n                    if (fabricInstanceRef.current) {\n                        fabricInstanceRef.current.dispose();\n                    }\n                    fCanvas = new fabric.Canvas(fabricCanvasRef.current, {\n                        width: viewport.width,\n                        height: viewport.height\n                    });\n                    fabricInstanceRef.current = fCanvas;\n                    const handleSelection = {\n                        \"PageRenderer.useEffect.renderAndInit.handleSelection\": (e)=>onObjectSelected(e.target || null)\n                    }[\"PageRenderer.useEffect.renderAndInit.handleSelection\"];\n                    const handleSelectionCleared = {\n                        \"PageRenderer.useEffect.renderAndInit.handleSelectionCleared\": ()=>onObjectSelected(null)\n                    }[\"PageRenderer.useEffect.renderAndInit.handleSelectionCleared\"];\n                    const handleDoubleClick = {\n                        \"PageRenderer.useEffect.renderAndInit.handleDoubleClick\": (e)=>{\n                            if (e.target && e.target.type === 'i-text') {\n                                e.target.enterEditing();\n                            }\n                        }\n                    }[\"PageRenderer.useEffect.renderAndInit.handleDoubleClick\"];\n                    fCanvas.on('selection:created', handleSelection);\n                    fCanvas.on('selection:updated', handleSelection);\n                    fCanvas.on('selection:cleared', handleSelectionCleared);\n                    fCanvas.on('mouse:dblclick', handleDoubleClick);\n                    renderTask = page.render({\n                        canvasContext: ctx,\n                        viewport\n                    });\n                    await renderTask.promise.catch({\n                        \"PageRenderer.useEffect.renderAndInit\": (err)=>{\n                            if (err.name !== 'RenderingCancelled') console.error(\"Page render error:\", err);\n                        }\n                    }[\"PageRenderer.useEffect.renderAndInit\"]);\n                }\n            }[\"PageRenderer.useEffect.renderAndInit\"];\n            renderAndInit();\n            return ({\n                \"PageRenderer.useEffect\": ()=>{\n                    renderTask === null || renderTask === void 0 ? void 0 : renderTask.cancel();\n                    if (fabricInstanceRef.current) {\n                        fabricInstanceRef.current.dispose();\n                        fabricInstanceRef.current = null;\n                    }\n                }\n            })[\"PageRenderer.useEffect\"];\n        }\n    }[\"PageRenderer.useEffect\"], [\n        page,\n        zoom,\n        rotation,\n        onObjectSelected\n    ]);\n    // --- STABLE MOUSE HANDLERS for text drawing ---\n    const handleTextMouseDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PageRenderer.useCallback[handleTextMouseDown]\": async (o)=>{\n            const fCanvas = fabricInstanceRef.current;\n            if (!fCanvas || !o.pointer) return;\n            isDrawingRef.current = true;\n            startPosRef.current = {\n                x: o.pointer.x,\n                y: o.pointer.y\n            };\n            const { fabric } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_fabric_dist_fabric_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! fabric */ \"(app-pages-browser)/./node_modules/fabric/dist/fabric.js\", 23));\n            const rect = new fabric.Rect({\n                left: startPosRef.current.x,\n                top: startPosRef.current.y,\n                width: 0,\n                height: 0,\n                stroke: 'blue',\n                strokeDashArray: [\n                    5,\n                    5\n                ],\n                fill: 'transparent',\n                selectable: false,\n                evented: false\n            });\n            rectRef.current = rect;\n            fCanvas.add(rect);\n        }\n    }[\"PageRenderer.useCallback[handleTextMouseDown]\"], []);\n    const handleTextMouseMove = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PageRenderer.useCallback[handleTextMouseMove]\": (o)=>{\n            const fCanvas = fabricInstanceRef.current;\n            if (!isDrawingRef.current || !startPosRef.current || !o.pointer || !rectRef.current || !fCanvas) return;\n            rectRef.current.set({\n                width: o.pointer.x - startPosRef.current.x,\n                height: o.pointer.y - startPosRef.current.y\n            });\n            fCanvas.renderAll();\n        }\n    }[\"PageRenderer.useCallback[handleTextMouseMove]\"], []);\n    const handleTextMouseUp = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PageRenderer.useCallback[handleTextMouseUp]\": async (o)=>{\n            const fCanvas = fabricInstanceRef.current;\n            if (!isDrawingRef.current || !startPosRef.current || !o.pointer || !fCanvas) return;\n            isDrawingRef.current = false;\n            if (rectRef.current) {\n                fCanvas.remove(rectRef.current);\n                rectRef.current = null;\n            }\n            const endPos = o.pointer;\n            const width = Math.abs(startPosRef.current.x - endPos.x);\n            if (width < 5) {\n                startPosRef.current = null;\n                setActiveTool('select');\n                return;\n            }\n            const { fabric } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_fabric_dist_fabric_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! fabric */ \"(app-pages-browser)/./node_modules/fabric/dist/fabric.js\", 23));\n            const text = new fabric.IText('輸入文字...', {\n                left: Math.min(startPosRef.current.x, endPos.x),\n                top: Math.min(startPosRef.current.y, endPos.y),\n                width: width,\n                fontSize: 20,\n                fill: '#000000'\n            });\n            fCanvas.add(text);\n            fCanvas.setActiveObject(text);\n            text.enterEditing();\n            startPosRef.current = null;\n            setActiveTool('select');\n        }\n    }[\"PageRenderer.useCallback[handleTextMouseUp]\"], [\n        setActiveTool\n    ]);\n    // Handle tool changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PageRenderer.useEffect\": ()=>{\n            const fCanvas = fabricInstanceRef.current;\n            if (!fCanvas) return;\n            // Turn off all drawing listeners first to prevent duplicates\n            fCanvas.off('mouse:down', handleTextMouseDown);\n            fCanvas.off('mouse:move', handleTextMouseMove);\n            fCanvas.off('mouse:up', handleTextMouseUp);\n            if (activeTool === 'text') {\n                fCanvas.defaultCursor = 'crosshair';\n                fCanvas.selection = false;\n                fCanvas.on('mouse:down', handleTextMouseDown);\n                fCanvas.on('mouse:move', handleTextMouseMove);\n                fCanvas.on('mouse:up', handleTextMouseUp);\n            } else {\n                fCanvas.defaultCursor = 'default';\n                fCanvas.selection = true;\n            }\n            return ({\n                \"PageRenderer.useEffect\": ()=>{\n                    if (fCanvas) {\n                        fCanvas.off('mouse:down', handleTextMouseDown);\n                        fCanvas.off('mouse:move', handleTextMouseMove);\n                        fCanvas.off('mouse:up', handleTextMouseUp);\n                    }\n                }\n            })[\"PageRenderer.useEffect\"];\n        }\n    }[\"PageRenderer.useEffect\"], [\n        activeTool,\n        handleTextMouseDown,\n        handleTextMouseMove,\n        handleTextMouseUp\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: ref,\n        \"data-page-number\": page.pageNumber,\n        className: \"relative mb-4 bg-background shadow-md\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                ref: pdfCanvasRef\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n                lineNumber: 310,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-0 left-0 w-full h-full\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                    ref: fabricCanvasRef\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n                    lineNumber: 312,\n                    columnNumber: 17\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n                lineNumber: 311,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n        lineNumber: 309,\n        columnNumber: 9\n    }, undefined);\n}, \"67fKrlwenVUSqLG7kk1yJEXtFY0=\"));\n_c1 = PageRenderer;\nPageRenderer.displayName = 'PageRenderer';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PdfCanvas);\nvar _c, _c1;\n$RefreshReg$(_c, \"PdfCanvas\");\n$RefreshReg$(_c1, \"PageRenderer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZWRpdC1wZGYvY29tcG9uZW50cy9QZGZDYW52YXMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUc4RDtBQUNiO0FBRWhCO0FBRWpDSSxxRUFBNEIsQ0FBQ0csU0FBUyxHQUFHLDJDQUE0RCxPQUFqQkgseURBQWdCLEVBQUM7QUFrQnJHLE1BQU1LLFlBQXNDO1FBQUMsRUFDM0NDLE9BQU8sRUFDUEMsWUFBWSxFQUNaQyxtQkFBbUIsRUFDbkJDLElBQUksRUFDSkMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLGdCQUFnQixFQUNoQkMsVUFBVSxFQUNWQyxhQUFhLEVBQ2JDLGdCQUFnQixFQUNoQkMsU0FBUyxFQUNWOztJQUNDLE1BQU1DLGVBQWVuQiw2Q0FBTUEsQ0FBd0I7SUFDbkQsTUFBTSxDQUFDb0IsT0FBT0MsU0FBUyxHQUFHdkIscURBQWMsQ0FBMEIsRUFBRTtJQUNwRSxNQUFNeUIsV0FBV3ZCLDZDQUFNQSxDQUE0QixFQUFFO0lBRXJELDhCQUE4QjtJQUM5QkQsZ0RBQVNBOytCQUFDO1lBQ1IsSUFBSSxDQUFDUyxTQUFTO2dCQUNaYSxTQUFTLEVBQUU7Z0JBQ1g7WUFDRjtZQUNBLE1BQU1HLFNBQVMsSUFBSUM7WUFDbkJELE9BQU9FLE1BQU07dUNBQUc7b0JBQ2QsTUFBTUMsT0FBTyxJQUFJQyxXQUFXSixPQUFPSyxNQUFNO29CQUN6QyxJQUFJO3dCQUNGLE1BQU1DLE1BQU0sTUFBTTVCLDZEQUFvQixDQUFDOzRCQUFFeUI7d0JBQUssR0FBR0ssT0FBTzt3QkFDeER2QixhQUFhcUIsSUFBSUcsUUFBUTt3QkFDekIsTUFBTUMsZUFBZUMsTUFBTUMsSUFBSSxDQUFDOzRCQUFFQyxRQUFRUCxJQUFJRyxRQUFRO3dCQUFDO2dFQUFHLENBQUNLLEdBQUdDLElBQU1ULElBQUlVLE9BQU8sQ0FBQ0QsSUFBSTs7d0JBQ3BGLE1BQU1FLGNBQWMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDVDt3QkFDdENiLFNBQVNv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RSxDQUFDLGNBQWNPO2dCQUN6QnpCLFFBQVFrQixFQUFFLENBQUMsY0FBY3FCO2dCQUN6QnZDLFFBQVFrQixFQUFFLENBQUMsWUFBWXdCO1lBQzNCLE9BQU87Z0JBQ0gxQyxRQUFRcUQsYUFBYSxHQUFHO2dCQUN4QnJELFFBQVFzRCxTQUFTLEdBQUc7WUFDeEI7WUFFQTswQ0FBTztvQkFDSCxJQUFJdEQsU0FBUzt3QkFDVEEsUUFBUW9ELEdBQUcsQ0FBQyxjQUFjM0I7d0JBQzFCekIsUUFBUW9ELEdBQUcsQ0FBQyxjQUFjYjt3QkFDMUJ2QyxRQUFRb0QsR0FBRyxDQUFDLFlBQVlWO29CQUM1QjtnQkFDSjs7UUFDSjtpQ0FBRztRQUFDdkg7UUFBWXNHO1FBQXFCYztRQUFxQkc7S0FBa0I7SUFHNUUscUJBQ0ksOERBQUN6RDtRQUFJTixLQUFLQTtRQUFLNEUsb0JBQWtCcEUsS0FBS2QsVUFBVTtRQUFFL0MsV0FBVTs7MEJBQ3hELDhEQUFDa0k7Z0JBQU83RSxLQUFLYzs7Ozs7OzBCQUNiLDhEQUFDUjtnQkFBSTNELFdBQVU7MEJBQ1gsNEVBQUNrSTtvQkFBTzdFLEtBQUtlOzs7Ozs7Ozs7Ozs7Ozs7OztBQUk3QjtNQXBMTUw7QUFxTE5BLGFBQWFvRSxXQUFXLEdBQUc7QUFFM0IsaUVBQWU5SSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvaG9tZS91c2VyL3N0dWRpby9zcmMvYXBwL2VkaXQtcGRmL2NvbXBvbmVudHMvUGRmQ2FudmFzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcblwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBwZGZqc0xpYiBmcm9tIFwicGRmanMtZGlzdC9idWlsZC9wZGZcIjtcbmltcG9ydCB0eXBlIHsgZmFicmljIH0gZnJvbSAnZmFicmljJzsgLy8gVXNlIHR5cGUgaW1wb3J0IHRvIGF2b2lkIHNlcnZlci1zaWRlIGV4ZWN1dGlvblxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcblxucGRmanNMaWIuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMgPSBgLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcGRmLmpzLyR7cGRmanNMaWIudmVyc2lvbn0vcGRmLndvcmtlci5taW4uanNgO1xuXG50eXBlIEFjdGl2ZVRvb2wgPSAnc2VsZWN0JyB8ICd0ZXh0JztcblxuaW50ZXJmYWNlIFBkZkNhbnZhc1Byb3BzIHtcbiAgcGRmRmlsZTogRmlsZSB8IG51bGw7XG4gIG9uVG90YWxQYWdlczogKHRvdGFsOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uQ3VycmVudFBhZ2VDaGFuZ2U6IChwYWdlOiBudW1iZXIpID0+IHZvaWQ7XG4gIHpvb206IG51bWJlcjtcbiAgcm90YXRpb25zOiB7IFtrZXk6IG51bWJlcl06IG51bWJlciB9O1xuICBzY3JvbGxUb1BhZ2U6IG51bWJlciB8IG51bGw7XG4gIG9uU2Nyb2xsQ29tcGxldGU6ICgpID0+IHZvaWQ7XG4gIGFjdGl2ZVRvb2w6IEFjdGl2ZVRvb2w7XG4gIHNldEFjdGl2ZVRvb2w6ICh0b29sOiBBY3RpdmVUb29sKSA9PiB2b2lkO1xuICBvbk9iamVjdFNlbGVjdGVkOiAob2JqZWN0OiBmYWJyaWMuT2JqZWN0IHwgbnVsbCkgPT4gdm9pZDtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5jb25zdCBQZGZDYW52YXM6IFJlYWN0LkZDPFBkZkNhbnZhc1Byb3BzPiA9ICh7XG4gIHBkZkZpbGUsXG4gIG9uVG90YWxQYWdlcyxcbiAgb25DdXJyZW50UGFnZUNoYW5nZSxcbiAgem9vbSxcbiAgcm90YXRpb25zLFxuICBzY3JvbGxUb1BhZ2UsXG4gIG9uU2Nyb2xsQ29tcGxldGUsXG4gIGFjdGl2ZVRvb2wsXG4gIHNldEFjdGl2ZVRvb2wsXG4gIG9uT2JqZWN0U2VsZWN0ZWQsXG4gIGNsYXNzTmFtZSxcbn0pID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwYWdlcywgc2V0UGFnZXNdID0gUmVhY3QudXNlU3RhdGU8cGRmanNMaWIuUERGUGFnZVByb3h5W10+KFtdKTtcbiAgY29uc3QgcGFnZVJlZnMgPSB1c2VSZWY8KEhUTUxEaXZFbGVtZW50IHwgbnVsbClbXT4oW10pO1xuXG4gIC8vIExvYWQgUERGIGRvY3VtZW50IGFuZCBwYWdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcGRmRmlsZSkge1xuICAgICAgc2V0UGFnZXMoW10pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkocmVhZGVyLnJlc3VsdCBhcyBBcnJheUJ1ZmZlcik7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBwZGZqc0xpYi5nZXREb2N1bWVudCh7IGRhdGEgfSkucHJvbWlzZTtcbiAgICAgICAgb25Ub3RhbFBhZ2VzKGRvYy5udW1QYWdlcyk7XG4gICAgICAgIGNvbnN0IHBhZ2VQcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGRvYy5udW1QYWdlcyB9LCAoXywgaSkgPT4gZG9jLmdldFBhZ2UoaSArIDEpKTtcbiAgICAgICAgY29uc3QgbG9hZGVkUGFnZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwYWdlUHJvbWlzZXMpO1xuICAgICAgICBzZXRQYWdlcyhsb2FkZWRQYWdlcyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBQREYgZG9jdW1lbnQ6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihwZGZGaWxlKTtcbiAgfSwgW3BkZkZpbGUsIG9uVG90YWxQYWdlc10pO1xuXG4gIC8vIFNldHVwIEludGVyc2VjdGlvbiBPYnNlcnZlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghY29udGFpbmVyUmVmLmN1cnJlbnQgfHwgcGFnZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpc2libGVFbnRyaWVzID0gZW50cmllcy5maWx0ZXIoZSA9PiBlLmlzSW50ZXJzZWN0aW5nKTtcbiAgICAgICAgaWYgKHZpc2libGVFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZpc2libGVFbnRyaWVzLnNvcnQoKGEsYikgPT4gYS5ib3VuZGluZ0NsaWVudFJlY3QudG9wIC0gYi5ib3VuZGluZ0NsaWVudFJlY3QudG9wKTtcbiAgICAgICAgICAgIGNvbnN0IHRvcE1vc3RWaXNpYmxlID0gdmlzaWJsZUVudHJpZXNbMF07XG4gICAgICAgICAgICBjb25zdCBwYWdlTnVtID0gTnVtYmVyKCh0b3BNb3N0VmlzaWJsZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQucGFnZU51bWJlcik7XG4gICAgICAgICAgICBpZiAocGFnZU51bSkge1xuICAgICAgICAgICAgICAgIG9uQ3VycmVudFBhZ2VDaGFuZ2UocGFnZU51bSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHJvb3Q6IGNvbnRhaW5lclJlZi5jdXJyZW50LCByb290TWFyZ2luOiBcIi01MCUgMHB4IC01MCUgMHB4XCIsIHRocmVzaG9sZDogMC4xIH1cbiAgICApO1xuXG4gICAgY29uc3QgY3VycmVudFJlZnMgPSBwYWdlUmVmcy5jdXJyZW50O1xuICAgIGN1cnJlbnRSZWZzLmZvckVhY2gocmVmID0+IHtcbiAgICAgIGlmIChyZWYpIG9ic2VydmVyLm9ic2VydmUocmVmKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjdXJyZW50UmVmcy5mb3JFYWNoKHJlZiA9PiB7XG4gICAgICAgIGlmIChyZWYpIG9ic2VydmVyLnVub2JzZXJ2ZShyZWYpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW3BhZ2VzLCBvbkN1cnJlbnRQYWdlQ2hhbmdlXSk7XG5cblxuICAvLyBTY3JvbGwgdG8gYSBzcGVjaWZpYyBwYWdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNjcm9sbFRvUGFnZSAmJiBwYWdlUmVmcy5jdXJyZW50W3Njcm9sbFRvUGFnZSAtIDFdKSB7XG4gICAgICBwYWdlUmVmcy5jdXJyZW50W3Njcm9sbFRvUGFnZSAtIDFdPy5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcImF1dG9cIiwgYmxvY2s6IFwic3RhcnRcIiB9KTtcbiAgICAgIG9uU2Nyb2xsQ29tcGxldGUoKTtcbiAgICB9XG4gIH0sIFtzY3JvbGxUb1BhZ2UsIG9uU2Nyb2xsQ29tcGxldGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHJlZj17Y29udGFpbmVyUmVmfVxuICAgICAgY2xhc3NOYW1lPXtjbihcInctZnVsbCBoLWZ1bGwgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgb3ZlcmZsb3ctYXV0byBiZy1tdXRlZCBwLTRcIiwgY2xhc3NOYW1lKX1cbiAgICA+XG4gICAgICB7cGFnZXMubWFwKChwYWdlLCBpbmRleCkgPT4gKFxuICAgICAgICA8UGFnZVJlbmRlcmVyXG4gICAgICAgICAga2V5PXtwYWdlLnBhZ2VOdW1iZXJ9XG4gICAgICAgICAgcGFnZT17cGFnZX1cbiAgICAgICAgICB6b29tPXt6b29tfVxuICAgICAgICAgIHJvdGF0aW9uPXtyb3RhdGlvbnNbaW5kZXggKyAxXSB8fCAwfVxuICAgICAgICAgIGFjdGl2ZVRvb2w9e2FjdGl2ZVRvb2x9XG4gICAgICAgICAgc2V0QWN0aXZlVG9vbD17c2V0QWN0aXZlVG9vbH1cbiAgICAgICAgICBvbk9iamVjdFNlbGVjdGVkPXtvbk9iamVjdFNlbGVjdGVkfVxuICAgICAgICAgIHJlZj17KGVsOiBIVE1MRGl2RWxlbWVudCB8IG51bGwpID0+IChwYWdlUmVmcy5jdXJyZW50W2luZGV4XSA9IGVsKX1cbiAgICAgICAgLz5cbiAgICAgICkpfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuaW50ZXJmYWNlIFBhZ2VSZW5kZXJlclByb3BzIHtcbiAgcGFnZTogcGRmanNMaWIuUERGUGFnZVByb3h5O1xuICB6b29tOiBudW1iZXI7XG4gIHJvdGF0aW9uOiBudW1iZXI7XG4gIGFjdGl2ZVRvb2w6IEFjdGl2ZVRvb2w7XG4gIHNldEFjdGl2ZVRvb2w6ICh0b29sOiBBY3RpdmVUb29sKSA9PiB2b2lkO1xuICBvbk9iamVjdFNlbGVjdGVkOiAob2JqZWN0OiBmYWJyaWMuT2JqZWN0IHwgbnVsbCkgPT4gdm9pZDtcbn1cblxuY29uc3QgUGFnZVJlbmRlcmVyID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MRGl2RWxlbWVudCwgUGFnZVJlbmRlcmVyUHJvcHM+KCh7IHBhZ2UsIHpvb20sIHJvdGF0aW9uLCBhY3RpdmVUb29sLCBzZXRBY3RpdmVUb29sLCBvbk9iamVjdFNlbGVjdGVkIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHBkZkNhbnZhc1JlZiA9IHVzZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4obnVsbCk7XG4gICAgY29uc3QgZmFicmljQ2FudmFzUmVmID0gdXNlUmVmPEhUTUxDYW52YXNFbGVtZW50PihudWxsKTtcbiAgICBjb25zdCBmYWJyaWNJbnN0YW5jZVJlZiA9IHVzZVJlZjxmYWJyaWMuQ2FudmFzIHwgbnVsbD4obnVsbCk7XG5cbiAgICAvLyBSZWZzIGZvciB0ZXh0IGRyYXdpbmcgc3RhdGVcbiAgICBjb25zdCBpc0RyYXdpbmdSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICAgIGNvbnN0IHN0YXJ0UG9zUmVmID0gdXNlUmVmPHt4OiBudW1iZXIsIHk6IG51bWJlcn0gfCBudWxsPihudWxsKTtcbiAgICBjb25zdCByZWN0UmVmID0gdXNlUmVmPGZhYnJpYy5SZWN0IHwgbnVsbD4obnVsbCk7XG5cbiAgICAvLyBSZW5kZXIgUERGIGJhY2tncm91bmQgYW5kIGluaXRpYWxpemUgRmFicmljIGNhbnZhc1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCByZW5kZXJUYXNrOiBwZGZqc0xpYi5SZW5kZXJUYXNrIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGxldCBmQ2FudmFzOiBmYWJyaWMuQ2FudmFzIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgY29uc3QgcmVuZGVyQW5kSW5pdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZmFicmljIH0gPSBhd2FpdCBpbXBvcnQoJ2ZhYnJpYycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXBkZkNhbnZhc1JlZi5jdXJyZW50IHx8ICFmYWJyaWNDYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwZGZDYW52YXMgPSBwZGZDYW52YXNSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHBkZkNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICBpZiAoIWN0eCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoeyBzY2FsZTogem9vbSwgcm90YXRpb24gfSk7XG4gICAgICAgICAgICBwZGZDYW52YXMud2lkdGggPSB2aWV3cG9ydC53aWR0aDtcbiAgICAgICAgICAgIHBkZkNhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmYWJyaWNJbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgZmFicmljSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZDYW52YXMgPSBuZXcgZmFicmljLkNhbnZhcyhmYWJyaWNDYW52YXNSZWYuY3VycmVudCwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB2aWV3cG9ydC53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHZpZXdwb3J0LmhlaWdodCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZmFicmljSW5zdGFuY2VSZWYuY3VycmVudCA9IGZDYW52YXM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVNlbGVjdGlvbiA9IChlOiBmYWJyaWMuSUV2ZW50KSA9PiBvbk9iamVjdFNlbGVjdGVkKGUudGFyZ2V0IHx8IG51bGwpO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU2VsZWN0aW9uQ2xlYXJlZCA9ICgpID0+IG9uT2JqZWN0U2VsZWN0ZWQobnVsbCk7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVEb3VibGVDbGljayA9IChlOiBmYWJyaWMuSUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0LnR5cGUgPT09ICdpLXRleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIChlLnRhcmdldCBhcyBmYWJyaWMuSVRleHQpLmVudGVyRWRpdGluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmQ2FudmFzLm9uKCdzZWxlY3Rpb246Y3JlYXRlZCcsIGhhbmRsZVNlbGVjdGlvbik7XG4gICAgICAgICAgICBmQ2FudmFzLm9uKCdzZWxlY3Rpb246dXBkYXRlZCcsIGhhbmRsZVNlbGVjdGlvbik7XG4gICAgICAgICAgICBmQ2FudmFzLm9uKCdzZWxlY3Rpb246Y2xlYXJlZCcsIGhhbmRsZVNlbGVjdGlvbkNsZWFyZWQpO1xuICAgICAgICAgICAgZkNhbnZhcy5vbignbW91c2U6ZGJsY2xpY2snLCBoYW5kbGVEb3VibGVDbGljayk7XG5cbiAgICAgICAgICAgIHJlbmRlclRhc2sgPSBwYWdlLnJlbmRlcih7IGNhbnZhc0NvbnRleHQ6IGN0eCwgdmlld3BvcnQgfSk7XG4gICAgICAgICAgICBhd2FpdCByZW5kZXJUYXNrLnByb21pc2UuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm5hbWUgIT09ICdSZW5kZXJpbmdDYW5jZWxsZWQnKSBjb25zb2xlLmVycm9yKFwiUGFnZSByZW5kZXIgZXJyb3I6XCIsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHJlbmRlckFuZEluaXQoKTtcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcmVuZGVyVGFzaz8uY2FuY2VsKCk7XG4gICAgICAgICAgICBpZiAoZmFicmljSW5zdGFuY2VSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGZhYnJpY0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIGZhYnJpY0luc3RhbmNlUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtwYWdlLCB6b29tLCByb3RhdGlvbiwgb25PYmplY3RTZWxlY3RlZF0pO1xuXG5cbiAgICAvLyAtLS0gU1RBQkxFIE1PVVNFIEhBTkRMRVJTIGZvciB0ZXh0IGRyYXdpbmcgLS0tXG4gICAgY29uc3QgaGFuZGxlVGV4dE1vdXNlRG93biA9IHVzZUNhbGxiYWNrKGFzeW5jIChvOiBmYWJyaWMuSUV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGZDYW52YXMgPSBmYWJyaWNJbnN0YW5jZVJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoIWZDYW52YXMgfHwgIW8ucG9pbnRlcikgcmV0dXJuO1xuXG4gICAgICAgIGlzRHJhd2luZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgc3RhcnRQb3NSZWYuY3VycmVudCA9IHsgeDogby5wb2ludGVyLngsIHk6IG8ucG9pbnRlci55IH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IGZhYnJpYyB9ID0gYXdhaXQgaW1wb3J0KCdmYWJyaWMnKTtcbiAgICAgICAgY29uc3QgcmVjdCA9IG5ldyBmYWJyaWMuUmVjdCh7XG4gICAgICAgICAgICBsZWZ0OiBzdGFydFBvc1JlZi5jdXJyZW50LngsXG4gICAgICAgICAgICB0b3A6IHN0YXJ0UG9zUmVmLmN1cnJlbnQueSxcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgc3Ryb2tlOiAnYmx1ZScsXG4gICAgICAgICAgICBzdHJva2VEYXNoQXJyYXk6IFs1LCA1XSxcbiAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGV2ZW50ZWQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVjdFJlZi5jdXJyZW50ID0gcmVjdDtcbiAgICAgICAgZkNhbnZhcy5hZGQocmVjdCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaGFuZGxlVGV4dE1vdXNlTW92ZSA9IHVzZUNhbGxiYWNrKChvOiBmYWJyaWMuSUV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGZDYW52YXMgPSBmYWJyaWNJbnN0YW5jZVJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoIWlzRHJhd2luZ1JlZi5jdXJyZW50IHx8ICFzdGFydFBvc1JlZi5jdXJyZW50IHx8ICFvLnBvaW50ZXIgfHwgIXJlY3RSZWYuY3VycmVudCB8fCAhZkNhbnZhcykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgcmVjdFJlZi5jdXJyZW50LnNldCh7IFxuICAgICAgICAgICAgd2lkdGg6IG8ucG9pbnRlci54IC0gc3RhcnRQb3NSZWYuY3VycmVudC54LCBcbiAgICAgICAgICAgIGhlaWdodDogby5wb2ludGVyLnkgLSBzdGFydFBvc1JlZi5jdXJyZW50LnkgXG4gICAgICAgIH0pO1xuICAgICAgICBmQ2FudmFzLnJlbmRlckFsbCgpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGhhbmRsZVRleHRNb3VzZVVwID0gdXNlQ2FsbGJhY2soYXN5bmMgKG86IGZhYnJpYy5JRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZkNhbnZhcyA9IGZhYnJpY0luc3RhbmNlUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghaXNEcmF3aW5nUmVmLmN1cnJlbnQgfHwgIXN0YXJ0UG9zUmVmLmN1cnJlbnQgfHwgIW8ucG9pbnRlciB8fCAhZkNhbnZhcykgcmV0dXJuO1xuXG4gICAgICAgIGlzRHJhd2luZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVjdFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBmQ2FudmFzLnJlbW92ZShyZWN0UmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgcmVjdFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZW5kUG9zID0gby5wb2ludGVyO1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGguYWJzKHN0YXJ0UG9zUmVmLmN1cnJlbnQueCAtIGVuZFBvcy54KTtcblxuICAgICAgICBpZiAod2lkdGggPCA1KSB7XG4gICAgICAgICAgICBzdGFydFBvc1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRvb2woJ3NlbGVjdCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IGZhYnJpYyB9ID0gYXdhaXQgaW1wb3J0KCdmYWJyaWMnKTtcbiAgICAgICAgY29uc3QgdGV4dCA9IG5ldyBmYWJyaWMuSVRleHQoJ+i8uOWFpeaWh+Wtly4uLicsIHtcbiAgICAgICAgICAgIGxlZnQ6IE1hdGgubWluKHN0YXJ0UG9zUmVmLmN1cnJlbnQueCwgZW5kUG9zLngpLFxuICAgICAgICAgICAgdG9wOiBNYXRoLm1pbihzdGFydFBvc1JlZi5jdXJyZW50LnksIGVuZFBvcy55KSxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGZvbnRTaXplOiAyMCxcbiAgICAgICAgICAgIGZpbGw6ICcjMDAwMDAwJyxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBmQ2FudmFzLmFkZCh0ZXh0KTtcbiAgICAgICAgZkNhbnZhcy5zZXRBY3RpdmVPYmplY3QodGV4dCk7XG4gICAgICAgIHRleHQuZW50ZXJFZGl0aW5nKCk7XG4gICAgICAgIFxuICAgICAgICBzdGFydFBvc1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgc2V0QWN0aXZlVG9vbCgnc2VsZWN0Jyk7XG4gICAgfSwgW3NldEFjdGl2ZVRvb2xdKTtcblxuXG4gICAgLy8gSGFuZGxlIHRvb2wgY2hhbmdlc1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZDYW52YXMgPSBmYWJyaWNJbnN0YW5jZVJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoIWZDYW52YXMpIHJldHVybjtcblxuICAgICAgICAvLyBUdXJuIG9mZiBhbGwgZHJhd2luZyBsaXN0ZW5lcnMgZmlyc3QgdG8gcHJldmVudCBkdXBsaWNhdGVzXG4gICAgICAgIGZDYW52YXMub2ZmKCdtb3VzZTpkb3duJywgaGFuZGxlVGV4dE1vdXNlRG93bik7XG4gICAgICAgIGZDYW52YXMub2ZmKCdtb3VzZTptb3ZlJywgaGFuZGxlVGV4dE1vdXNlTW92ZSk7XG4gICAgICAgIGZDYW52YXMub2ZmKCdtb3VzZTp1cCcsIGhhbmRsZVRleHRNb3VzZVVwKTtcblxuICAgICAgICBpZiAoYWN0aXZlVG9vbCA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICBmQ2FudmFzLmRlZmF1bHRDdXJzb3IgPSAnY3Jvc3NoYWlyJztcbiAgICAgICAgICAgIGZDYW52YXMuc2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBmQ2FudmFzLm9uKCdtb3VzZTpkb3duJywgaGFuZGxlVGV4dE1vdXNlRG93bik7XG4gICAgICAgICAgICBmQ2FudmFzLm9uKCdtb3VzZTptb3ZlJywgaGFuZGxlVGV4dE1vdXNlTW92ZSk7XG4gICAgICAgICAgICBmQ2FudmFzLm9uKCdtb3VzZTp1cCcsIGhhbmRsZVRleHRNb3VzZVVwKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gJ3NlbGVjdCcgbW9kZVxuICAgICAgICAgICAgZkNhbnZhcy5kZWZhdWx0Q3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgZkNhbnZhcy5zZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBmQ2FudmFzLm9mZignbW91c2U6ZG93bicsIGhhbmRsZVRleHRNb3VzZURvd24pO1xuICAgICAgICAgICAgICAgIGZDYW52YXMub2ZmKCdtb3VzZTptb3ZlJywgaGFuZGxlVGV4dE1vdXNlTW92ZSk7XG4gICAgICAgICAgICAgICAgZkNhbnZhcy5vZmYoJ21vdXNlOnVwJywgaGFuZGxlVGV4dE1vdXNlVXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFthY3RpdmVUb29sLCBoYW5kbGVUZXh0TW91c2VEb3duLCBoYW5kbGVUZXh0TW91c2VNb3ZlLCBoYW5kbGVUZXh0TW91c2VVcF0pO1xuXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IHJlZj17cmVmfSBkYXRhLXBhZ2UtbnVtYmVyPXtwYWdlLnBhZ2VOdW1iZXJ9IGNsYXNzTmFtZT1cInJlbGF0aXZlIG1iLTQgYmctYmFja2dyb3VuZCBzaGFkb3ctbWRcIj5cbiAgICAgICAgICAgIDxjYW52YXMgcmVmPXtwZGZDYW52YXNSZWZ9IC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIGxlZnQtMCB3LWZ1bGwgaC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgPGNhbnZhcyByZWY9e2ZhYnJpY0NhbnZhc1JlZn0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufSk7XG5QYWdlUmVuZGVyZXIuZGlzcGxheU5hbWUgPSAnUGFnZVJlbmRlcmVyJztcblxuZXhwb3J0IGRlZmF1bHQgUGRmQ2FudmFzO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJwZGZqc0xpYiIsImNuIiwiR2xvYmFsV29ya2VyT3B0aW9ucyIsIndvcmtlclNyYyIsInZlcnNpb24iLCJQZGZDYW52YXMiLCJwZGZGaWxlIiwib25Ub3RhbFBhZ2VzIiwib25DdXJyZW50UGFnZUNoYW5nZSIsInpvb20iLCJyb3RhdGlvbnMiLCJzY3JvbGxUb1BhZ2UiLCJvblNjcm9sbENvbXBsZXRlIiwiYWN0aXZlVG9vbCIsInNldEFjdGl2ZVRvb2wiLCJvbk9iamVjdFNlbGVjdGVkIiwiY2xhc3NOYW1lIiwiY29udGFpbmVyUmVmIiwicGFnZXMiLCJzZXRQYWdlcyIsInVzZVN0YXRlIiwicGFnZVJlZnMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZGF0YSIsIlVpbnQ4QXJyYXkiLCJyZXN1bHQiLCJkb2MiLCJnZXREb2N1bWVudCIsInByb21pc2UiLCJudW1QYWdlcyIsInBhZ2VQcm9taXNlcyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiZ2V0UGFnZSIsImxvYWRlZFBhZ2VzIiwiUHJvbWlzZSIsImFsbCIsImVycm9yIiwiY29uc29sZSIsInJlYWRBc0FycmF5QnVmZmVyIiwiY3VycmVudCIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwidmlzaWJsZUVudHJpZXMiLCJmaWx0ZXIiLCJlIiwiaXNJbnRlcnNlY3RpbmciLCJzb3J0IiwiYSIsImIiLCJib3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJ0b3BNb3N0VmlzaWJsZSIsInBhZ2VOdW0iLCJOdW1iZXIiLCJ0YXJnZXQiLCJkYXRhc2V0IiwicGFnZU51bWJlciIsInJvb3QiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwiY3VycmVudFJlZnMiLCJmb3JFYWNoIiwicmVmIiwib2JzZXJ2ZSIsInVub2JzZXJ2ZSIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJibG9jayIsImRpdiIsIm1hcCIsInBhZ2UiLCJpbmRleCIsIlBhZ2VSZW5kZXJlciIsInJvdGF0aW9uIiwiZWwiLCJmb3J3YXJkUmVmIiwicGRmQ2FudmFzUmVmIiwiZmFicmljQ2FudmFzUmVmIiwiZmFicmljSW5zdGFuY2VSZWYiLCJpc0RyYXdpbmdSZWYiLCJzdGFydFBvc1JlZiIsInJlY3RSZWYiLCJyZW5kZXJUYXNrIiwiZkNhbnZhcyIsInJlbmRlckFuZEluaXQiLCJmYWJyaWMiLCJwZGZDYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0Iiwidmlld3BvcnQiLCJnZXRWaWV3cG9ydCIsInNjYWxlIiwid2lkdGgiLCJoZWlnaHQiLCJkaXNwb3NlIiwiQ2FudmFzIiwiaGFuZGxlU2VsZWN0aW9uIiwiaGFuZGxlU2VsZWN0aW9uQ2xlYXJlZCIsImhhbmRsZURvdWJsZUNsaWNrIiwidHlwZSIsImVudGVyRWRpdGluZyIsIm9uIiwicmVuZGVyIiwiY2FudmFzQ29udGV4dCIsImNhdGNoIiwiZXJyIiwibmFtZSIsImNhbmNlbCIsImhhbmRsZVRleHRNb3VzZURvd24iLCJvIiwicG9pbnRlciIsIngiLCJ5IiwicmVjdCIsIlJlY3QiLCJsZWZ0Iiwic3Ryb2tlIiwic3Ryb2tlRGFzaEFycmF5IiwiZmlsbCIsInNlbGVjdGFibGUiLCJldmVudGVkIiwiYWRkIiwiaGFuZGxlVGV4dE1vdXNlTW92ZSIsInNldCIsInJlbmRlckFsbCIsImhhbmRsZVRleHRNb3VzZVVwIiwicmVtb3ZlIiwiZW5kUG9zIiwiTWF0aCIsImFicyIsInRleHQiLCJJVGV4dCIsIm1pbiIsImZvbnRTaXplIiwic2V0QWN0aXZlT2JqZWN0Iiwib2ZmIiwiZGVmYXVsdEN1cnNvciIsInNlbGVjdGlvbiIsImRhdGEtcGFnZS1udW1iZXIiLCJjYW52YXMiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/edit-pdf/components/PdfCanvas.tsx\n"));

/***/ })

});