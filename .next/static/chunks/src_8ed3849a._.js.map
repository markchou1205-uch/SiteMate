{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/useTextTool.ts"],"sourcesContent":["// src/hooks/useTextTool.ts\nimport { fabric } from 'fabric';\nimport { useEffect, useRef } from 'react';\n\nexport default function useTextTool(canvasRef: React.RefObject<fabric.Canvas | null>) {\n  const selectedColorRef = useRef('black');\n\n  // Insert text tool (using IText for selection support)\n  const insertTextBox = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const textbox = new fabric.IText('請輸入文字', {\n      left: 100,\n      top: 100,\n      fontSize: 24,\n      fill: selectedColorRef.current,\n      fontFamily: 'Arial',\n      padding: 5,\n    });\n    canvas.add(textbox);\n    canvas.setActiveObject(textbox);\n    textbox.enterEditing();\n    canvas.renderAll();\n  };\n\n  // Apply style (bold, italic, underline) to selected text\n  const applyStyle = (styleKey: string, value: any) => {\n    const canvas = canvasRef.current;\n    const obj = canvas?.getActiveObject() as fabric.IText;\n    if (obj && obj.isEditing && obj.selectionStart !== obj.selectionEnd) {\n      obj.setSelectionStyles({ [styleKey]: value });\n      canvas.renderAll();\n    }\n  };\n\n  // Apply color\n  const setColor = (color: string) => {\n    selectedColorRef.current = color;\n    const canvas = canvasRef.current;\n    const obj = canvas?.getActiveObject() as fabric.IText;\n    if (obj && obj.isEditing && obj.selectionStart !== obj.selectionEnd) {\n      obj.setSelectionStyles({ fill: color });\n      canvas.renderAll();\n    } else if (obj) {\n      obj.set({ fill: color });\n      canvas.renderAll();\n    }\n  };\n\n  // Toolbar control (requires DOM toolbar to be designed separately)\n  const showToolbar = () => {\n    const toolbar = document.getElementById('text-toolbar');\n    if (toolbar) toolbar.style.display = 'flex';\n  };\n\n  const hideToolbar = () => {\n    const toolbar = document.getElementById('text-toolbar');\n    if (toolbar) toolbar.style.display = 'none';\n  };\n\n  // Bind events\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const onMouseDown = (e: fabric.IEvent) => {\n      if (!e.target) {\n        canvas.discardActiveObject();\n        canvas.renderAll();\n      }\n    };\n    \n    const onSelectionCleared = () => {\n        hideToolbar();\n    }\n    \n    const onSelectionCreated = (e: fabric.IEvent) => {\n        if (e.selected && e.selected[0].type === 'i-text') {\n            showToolbar();\n        }\n    }\n    \n    const onObjectModified = () => {\n        // can be used for history/state saving\n    }\n\n    canvas.on('mouse:down', onMouseDown);\n    canvas.on('selection:created', onSelectionCreated);\n    canvas.on('selection:updated', onSelectionCreated);\n    canvas.on('selection:cleared', onSelectionCleared);\n    canvas.on('object:modified', onObjectModified);\n\n    return () => {\n      canvas.off('mouse:down', onMouseDown);\n      canvas.off('selection:created', onSelectionCreated);\n      canvas.off('selection:updated', onSelectionCreated);\n      canvas.off('selection:cleared', onSelectionCleared);\n      canvas.off('object:modified', onObjectModified);\n    };\n  }, [canvasRef]);\n\n  return {\n    insertTextBox,\n    applyStyle,\n    setColor,\n  };\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;AAC3B;AACA;;;;AAEe,SAAS,YAAY,SAAgD;;IAClF,MAAM,mBAAmB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAEhC,uDAAuD;IACvD,MAAM,gBAAgB;QACpB,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QAEb,MAAM,UAAU,IAAI,2IAAA,CAAA,SAAM,CAAC,KAAK,CAAC,SAAS;YACxC,MAAM;YACN,KAAK;YACL,UAAU;YACV,MAAM,iBAAiB,OAAO;YAC9B,YAAY;YACZ,SAAS;QACX;QACA,OAAO,GAAG,CAAC;QACX,OAAO,eAAe,CAAC;QACvB,QAAQ,YAAY;QACpB,OAAO,SAAS;IAClB;IAEA,yDAAyD;IACzD,MAAM,aAAa,CAAC,UAAkB;QACpC,MAAM,SAAS,UAAU,OAAO;QAChC,MAAM,MAAM,QAAQ;QACpB,IAAI,OAAO,IAAI,SAAS,IAAI,IAAI,cAAc,KAAK,IAAI,YAAY,EAAE;YACnE,IAAI,kBAAkB,CAAC;gBAAE,CAAC,SAAS,EAAE;YAAM;YAC3C,OAAO,SAAS;QAClB;IACF;IAEA,cAAc;IACd,MAAM,WAAW,CAAC;QAChB,iBAAiB,OAAO,GAAG;QAC3B,MAAM,SAAS,UAAU,OAAO;QAChC,MAAM,MAAM,QAAQ;QACpB,IAAI,OAAO,IAAI,SAAS,IAAI,IAAI,cAAc,KAAK,IAAI,YAAY,EAAE;YACnE,IAAI,kBAAkB,CAAC;gBAAE,MAAM;YAAM;YACrC,OAAO,SAAS;QAClB,OAAO,IAAI,KAAK;YACd,IAAI,GAAG,CAAC;gBAAE,MAAM;YAAM;YACtB,OAAO,SAAS;QAClB;IACF;IAEA,mEAAmE;IACnE,MAAM,cAAc;QAClB,MAAM,UAAU,SAAS,cAAc,CAAC;QACxC,IAAI,SAAS,QAAQ,KAAK,CAAC,OAAO,GAAG;IACvC;IAEA,MAAM,cAAc;QAClB,MAAM,UAAU,SAAS,cAAc,CAAC;QACxC,IAAI,SAAS,QAAQ,KAAK,CAAC,OAAO,GAAG;IACvC;IAEA,cAAc;IACd,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YAEb,MAAM;qDAAc,CAAC;oBACnB,IAAI,CAAC,EAAE,MAAM,EAAE;wBACb,OAAO,mBAAmB;wBAC1B,OAAO,SAAS;oBAClB;gBACF;;YAEA,MAAM;4DAAqB;oBACvB;gBACJ;;YAEA,MAAM;4DAAqB,CAAC;oBACxB,IAAI,EAAE,QAAQ,IAAI,EAAE,QAAQ,CAAC,EAAE,CAAC,IAAI,KAAK,UAAU;wBAC/C;oBACJ;gBACJ;;YAEA,MAAM;0DAAmB;gBACrB,uCAAuC;gBAC3C;;YAEA,OAAO,EAAE,CAAC,cAAc;YACxB,OAAO,EAAE,CAAC,qBAAqB;YAC/B,OAAO,EAAE,CAAC,qBAAqB;YAC/B,OAAO,EAAE,CAAC,qBAAqB;YAC/B,OAAO,EAAE,CAAC,mBAAmB;YAE7B;yCAAO;oBACL,OAAO,GAAG,CAAC,cAAc;oBACzB,OAAO,GAAG,CAAC,qBAAqB;oBAChC,OAAO,GAAG,CAAC,qBAAqB;oBAChC,OAAO,GAAG,CAAC,qBAAqB;oBAChC,OAAO,GAAG,CAAC,mBAAmB;gBAChC;;QACF;gCAAG;QAAC;KAAU;IAEd,OAAO;QACL;QACA;QACA;IACF;AACF;GAvGwB","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AACA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,wKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,wKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport { fabric } from 'fabric';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport useTextTool from '@/hooks/useTextTool';\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Upload, FilePlus, Type, Bold, Italic, Underline } from 'lucide-react';\nimport { Separator } from '@/components/ui/separator';\n\nif (typeof window !== 'undefined') {\n  pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n}\n\ninterface PageObject {\n  id: string;\n  sourceCanvas: HTMLCanvasElement;\n}\n\nexport default function PdfEditorPage() {\n  const router = useRouter();\n  const { toast } = useToast();\n  \n  const [pageObjects, setPageObjects] = useState<PageObject[]>([]);\n  const [activePageIndex, setActivePageIndex] = useState<number | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [loadingMessage, setLoadingMessage] = useState('');\n  const [selectedColor, setSelectedColor] = useState('black');\n\n  const canvasContainerRef = useRef<HTMLDivElement>(null);\n  const fabricCanvasRef = useRef<fabric.Canvas | null>(null);\n  const pdfUploadRef = useRef<HTMLInputElement>(null);\n  \n  const textTool = useTextTool(fabricCanvasRef);\n\n  const initFabricCanvas = useCallback(() => {\n    if (fabricCanvasRef.current) {\n        fabricCanvasRef.current.dispose();\n    }\n    const canvasElement = document.createElement('canvas');\n    canvasContainerRef.current?.appendChild(canvasElement);\n\n    const container = canvasContainerRef.current;\n    if (container) {\n        const newCanvas = new fabric.Canvas(canvasElement, {\n            width: container.clientWidth,\n            height: container.clientHeight,\n            backgroundColor: '#f0f0f0',\n        });\n        fabricCanvasRef.current = newCanvas;\n    }\n  }, []);\n\n  const displayPage = useCallback((pageIndex: number) => {\n    const canvas = fabricCanvasRef.current;\n    if (!canvas || !pageObjects[pageIndex]) return;\n\n    const pageObj = pageObjects[pageIndex];\n    const dataUrl = pageObj.sourceCanvas.toDataURL('image/png');\n\n    fabric.Image.fromURL(dataUrl, (img) => {\n      canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n        scaleX: canvas.width! / img.width!,\n        scaleY: canvas.height! / img.height!,\n      });\n    });\n    setActivePageIndex(pageIndex);\n  }, [pageObjects]);\n\n  const handlePdfUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setIsLoading(true);\n    setLoadingMessage('載入 PDF 中...');\n    try {\n      const arrayBuffer = await file.arrayBuffer();\n      const pdfDocProxy = await pdfjsLib.getDocument(arrayBuffer).promise;\n      \n      const loadedPageObjects: PageObject[] = [];\n      for (let i = 1; i <= pdfDocProxy.numPages; i++) {\n        const page = await pdfDocProxy.getPage(i);\n        const viewport = page.getViewport({ scale: 3.0 });\n        const canvas = document.createElement('canvas');\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n          await page.render({ canvasContext: ctx, viewport }).promise;\n        }\n        loadedPageObjects.push({ id: uuidv4(), sourceCanvas: canvas });\n      }\n      setPageObjects(loadedPageObjects);\n      \n      // Initialize canvas and display first page\n      if (loadedPageObjects.length > 0) {\n        if (!fabricCanvasRef.current) {\n            initFabricCanvas();\n        }\n        // A short delay to ensure the canvas is sized correctly\n        setTimeout(() => displayPage(0), 100);\n      }\n      toast({ title: \"PDF 載入成功\", description: `${pdfDocProxy.numPages} 頁已載入` });\n    } catch (err: any) {\n      toast({ title: \"載入 PDF 失敗\", description: err.message, variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n    }\n  };\n  \n  useEffect(() => {\n    initFabricCanvas();\n    const resizeObserver = new ResizeObserver(entries => {\n        if (fabricCanvasRef.current && entries[0]) {\n            const { width, height } = entries[0].contentRect;\n            fabricCanvasRef.current.setWidth(width);\n            fabricCanvasRef.current.setHeight(height);\n            if(activePageIndex !== null) displayPage(activePageIndex);\n        }\n    });\n\n    if (canvasContainerRef.current) {\n        resizeObserver.observe(canvasContainerRef.current);\n    }\n    \n    return () => {\n        resizeObserver.disconnect();\n        fabricCanvasRef.current?.dispose();\n    };\n  }, [initFabricCanvas, activePageIndex, displayPage]);\n\n\n  const handleColorClick = (color: string) => {\n    setSelectedColor(color);\n    textTool.setColor(color);\n  }\n\n  return (\n    <div className=\"flex flex-col h-screen bg-background\">\n      {isLoading && (\n        <div className=\"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center\">\n          <Loader2 className=\"h-12 w-12 text-primary animate-spin\" />\n          <p className=\"ml-4 text-white\">{loadingMessage}</p>\n        </div>\n      )}\n\n      <header className=\"p-2 border-b flex items-center justify-between sticky top-0 bg-card z-50\">\n        <div className='flex items-center gap-2'>\n            <h1 className=\"text-xl font-bold\">PDF 編輯器</h1>\n            <Input type=\"file\" ref={pdfUploadRef} onChange={handlePdfUpload} className=\"hidden\" />\n            <Button onClick={() => pdfUploadRef.current?.click()} variant=\"outline\">\n                <Upload className=\"mr-2 h-4 w-4\" /> 上傳 PDF\n            </Button>\n        </div>\n        \n        {/* Main Toolbar */}\n        <div id=\"main-toolbar\" className=\"flex items-center gap-2\">\n            <Button variant=\"ghost\" onClick={textTool.insertTextBox}>\n                <Type className=\"mr-2 h-4 w-4\" /> 新增文字\n            </Button>\n            {/* The text-specific toolbar is now separate */}\n        </div>\n      </header>\n\n      {/* Floating Text Toolbar */}\n      <div id=\"text-toolbar\" style={{display: 'none'}} className=\"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-card p-2 rounded-lg shadow-lg border flex items-center gap-2\">\n           <Button size=\"sm\" variant=\"outline\" onClick={() => textTool.applyStyle('fontWeight', 'bold')}> <Bold /> </Button>\n           <Button size=\"sm\" variant=\"outline\" onClick={() => textTool.applyStyle('fontStyle', 'italic')}> <Italic /> </Button>\n           <Button size=\"sm\" variant=\"outline\" onClick={() => textTool.applyStyle('underline', true)}> <Underline /> </Button>\n           <Separator orientation=\"vertical\" className=\"h-8\"/>\n            <div className=\"flex items-center space-x-2\">\n              {['black', 'red', 'blue', 'green', 'orange', 'purple'].map((color) => (\n                <button\n                  key={color}\n                  onClick={() => handleColorClick(color)}\n                  className={`w-6 h-6 rounded-full border-2 transition-all ${\n                    selectedColor === color ? 'border-primary ring-2 ring-primary ring-offset-2' : 'border-gray-300'\n                  }`}\n                  style={{ backgroundColor: color }}\n                  title={color}\n                />\n              ))}\n            </div>\n      </div>\n      \n      <div className=\"flex-1 flex overflow-hidden\">\n        <aside className=\"w-48 bg-card border-r p-2 overflow-y-auto\">\n          <p className=\"text-sm font-semibold mb-2 p-2\">頁面</p>\n          <div className=\"space-y-2\">\n            {pageObjects.map((page, index) => (\n              <div\n                key={page.id}\n                onClick={() => displayPage(index)}\n                className={`p-1 rounded-md cursor-pointer border-2 ${activePageIndex === index ? 'border-primary' : 'border-transparent'}`}\n              >\n                <img\n                  src={page.sourceCanvas.toDataURL()}\n                  alt={`Page ${index + 1}`}\n                  className=\"w-full h-auto rounded-sm shadow-md\"\n                />\n                <p className=\"text-center text-xs mt-1 text-muted-foreground\"> {index + 1} </p>\n              </div>\n            ))}\n          </div>\n        </aside>\n\n        <main className=\"flex-1 bg-muted/30 p-4\" ref={canvasContainerRef}>\n          {/* Fabric.js canvas will be appended here by useEffect */}\n        </main>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}