"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/edit-pdf/page",{

/***/ "(app-pages-browser)/./src/app/edit-pdf/components/PdfCanvas.tsx":
/*!***************************************************!*\
  !*** ./src/app/edit-pdf/components/PdfCanvas.tsx ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdfjs-dist/build/pdf */ \"(app-pages-browser)/./node_modules/pdfjs-dist/build/pdf.js\");\n/* harmony import */ var pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fabric */ \"(app-pages-browser)/./node_modules/fabric/dist/index.min.mjs\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\npdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__.GlobalWorkerOptions.workerSrc = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__.version, \"/pdf.worker.min.js\");\nconst PdfCanvas = (param)=>{\n    let { pdfFile, onTotalPages, onCurrentPageChange, zoom, rotations, scrollToPage, onScrollComplete, toolMode, color, setActiveObject, setIsTextEditing } = param;\n    _s();\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const fabricCanvasRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const pageRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const [pdfDoc, setPdfDoc] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const isPanning = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const panStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        x: 0,\n        y: 0,\n        scrollLeft: 0,\n        scrollTop: 0\n    });\n    const textDrawing = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        isDrawing: false,\n        startX: 0,\n        startY: 0,\n        rect: null\n    });\n    // Load PDF document\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (!pdfFile) {\n                fabricCanvasRefs.current.forEach({\n                    \"PdfCanvas.useEffect\": (canvas)=>canvas.dispose()\n                }[\"PdfCanvas.useEffect\"]);\n                fabricCanvasRefs.current = [];\n                pageRefs.current = [];\n                if (containerRef.current) containerRef.current.innerHTML = \"\";\n                setPdfDoc(null);\n                return;\n            }\n            const reader = new FileReader();\n            reader.onload = ({\n                \"PdfCanvas.useEffect\": async ()=>{\n                    const data = new Uint8Array(reader.result);\n                    try {\n                        const doc = await pdfjs_dist_build_pdf__WEBPACK_IMPORTED_MODULE_2__.getDocument({\n                            data\n                        }).promise;\n                        setPdfDoc(doc);\n                        onTotalPages(doc.numPages);\n                    } catch (error) {\n                        console.error(\"Error loading PDF document:\", error);\n                    }\n                }\n            })[\"PdfCanvas.useEffect\"];\n            reader.readAsArrayBuffer(pdfFile);\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        pdfFile,\n        onTotalPages\n    ]);\n    const addFabricEventListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PdfCanvas.useCallback[addFabricEventListeners]\": (canvas)=>{\n            canvas.on('mouse:down', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (o)=>{\n                    if (toolMode !== 'text' || !o.pointer) return;\n                    textDrawing.current.isDrawing = true;\n                    textDrawing.current.startX = o.pointer.x;\n                    textDrawing.current.startY = o.pointer.y;\n                    textDrawing.current.rect = new fabric__WEBPACK_IMPORTED_MODULE_3__.fabric.Rect({\n                        left: o.pointer.x,\n                        top: o.pointer.y,\n                        width: 0,\n                        height: 0,\n                        stroke: 'rgba(100, 200, 200, 0.5)',\n                        strokeWidth: 1,\n                        fill: 'rgba(100, 200, 200, 0.1)',\n                        selectable: false\n                    });\n                    canvas.add(textDrawing.current.rect);\n                }\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('mouse:move', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (o)=>{\n                    if (!textDrawing.current.isDrawing || !o.pointer || !textDrawing.current.rect) return;\n                    const { startX, startY } = textDrawing.current;\n                    let left = startX;\n                    let top = startY;\n                    let width = o.pointer.x - startX;\n                    let height = o.pointer.y - startY;\n                    if (width < 0) {\n                        left = o.pointer.x;\n                        width = -width;\n                    }\n                    if (height < 0) {\n                        top = o.pointer.y;\n                        height = -height;\n                    }\n                    textDrawing.current.rect.set({\n                        left,\n                        top,\n                        width,\n                        height\n                    });\n                    canvas.requestRenderAll();\n                }\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('mouse:up', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (o)=>{\n                    if (!textDrawing.current.isDrawing || !o.pointer || !textDrawing.current.rect) return;\n                    const { left, top, width, height } = textDrawing.current.rect;\n                    canvas.remove(textDrawing.current.rect);\n                    textDrawing.current.isDrawing = false;\n                    textDrawing.current.rect = null;\n                    if (width > 5 && height > 5) {\n                        const newText = new fabric__WEBPACK_IMPORTED_MODULE_3__.fabric.IText('點擊編輯', {\n                            left: left,\n                            top: top,\n                            width: width,\n                            height: height,\n                            fill: color,\n                            fontSize: 20,\n                            fontFamily: 'Arial',\n                            name: \"text_\".concat((0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])())\n                        });\n                        canvas.add(newText);\n                        canvas.setActiveObject(newText);\n                    }\n                    canvas.requestRenderAll();\n                }\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('selection:created', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (e)=>setActiveObject(e.selected ? e.selected[0] : null)\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('selection:updated', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (e)=>setActiveObject(e.selected ? e.selected[0] : null)\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('selection:cleared', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": ()=>setActiveObject(null)\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('mouse:dblclick', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (o)=>{\n                    if (o.target && o.target.type === 'i-text') {\n                        setIsTextEditing(o.target);\n                        o.target.enterEditing();\n                    }\n                }\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n            canvas.on('mouse:wheel', {\n                \"PdfCanvas.useCallback[addFabricEventListeners]\": (opt)=>{\n                    const e = opt.e;\n                    if (containerRef.current) {\n                        containerRef.current.scrollTop += e.deltaY;\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                }\n            }[\"PdfCanvas.useCallback[addFabricEventListeners]\"]);\n        }\n    }[\"PdfCanvas.useCallback[addFabricEventListeners]\"], [\n        toolMode,\n        color,\n        setActiveObject,\n        setIsTextEditing\n    ]);\n    // Render all pages and set up observers\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (!pdfDoc || !containerRef.current) return;\n            const intersectionObserver = new IntersectionObserver({\n                \"PdfCanvas.useEffect\": (entries)=>{\n                    const visibleEntries = entries.filter({\n                        \"PdfCanvas.useEffect.visibleEntries\": (e)=>e.isIntersecting\n                    }[\"PdfCanvas.useEffect.visibleEntries\"]);\n                    if (visibleEntries.length > 0) {\n                        visibleEntries.sort({\n                            \"PdfCanvas.useEffect\": (a, b)=>a.boundingClientRect.top - b.boundingClientRect.top\n                        }[\"PdfCanvas.useEffect\"]);\n                        const topVisiblePage = visibleEntries[0];\n                        const pageNum = Number(topVisiblePage.target.dataset.pageNumber);\n                        if (pageNum) onCurrentPageChange(pageNum);\n                    }\n                }\n            }[\"PdfCanvas.useEffect\"], {\n                root: containerRef.current,\n                rootMargin: \"-50% 0px -50% 0px\",\n                threshold: 0\n            });\n            // Cleanup old canvases\n            fabricCanvasRefs.current.forEach({\n                \"PdfCanvas.useEffect\": (canvas)=>canvas.dispose()\n            }[\"PdfCanvas.useEffect\"]);\n            fabricCanvasRefs.current = [];\n            pageRefs.current = [];\n            if (containerRef.current) containerRef.current.innerHTML = \"\";\n            const renderAllPages = {\n                \"PdfCanvas.useEffect.renderAllPages\": async ()=>{\n                    if (!containerRef.current) return;\n                    const availableWidth = containerRef.current.clientWidth - 32;\n                    for(let pageNum = 1; pageNum <= pdfDoc.numPages; pageNum++){\n                        const page = await pdfDoc.getPage(pageNum);\n                        const rotation = rotations[pageNum] || 0;\n                        const unrotatedViewport = page.getViewport({\n                            scale: 1\n                        });\n                        const scaleToFit = availableWidth / unrotatedViewport.width;\n                        const viewport = page.getViewport({\n                            scale: scaleToFit * zoom,\n                            rotation\n                        });\n                        const pageContainer = document.createElement(\"div\");\n                        pageContainer.className = \"relative mb-4 bg-background shadow-md\";\n                        pageContainer.dataset.pageNumber = String(pageNum);\n                        const pdfCanvasEl = document.createElement(\"canvas\");\n                        const fabricCanvasEl = document.createElement(\"canvas\");\n                        fabricCanvasEl.className = \"absolute top-0 left-0\";\n                        pageContainer.append(pdfCanvasEl, fabricCanvasEl);\n                        containerRef.current.appendChild(pageContainer);\n                        pdfCanvasEl.width = viewport.width;\n                        pdfCanvasEl.height = viewport.height;\n                        fabricCanvasEl.width = viewport.width;\n                        fabricCanvasEl.height = viewport.height;\n                        const pdfCtx = pdfCanvasEl.getContext(\"2d\");\n                        if (pdfCtx) {\n                            await page.render({\n                                canvasContext: pdfCtx,\n                                viewport\n                            }).promise;\n                        }\n                        const fabricCanvas = new fabric__WEBPACK_IMPORTED_MODULE_3__.fabric.Canvas(fabricCanvasEl);\n                        fabricCanvasRefs.current[pageNum - 1] = fabricCanvas;\n                        pageRefs.current[pageNum - 1] = pageContainer;\n                        addFabricEventListeners(fabricCanvas);\n                        intersectionObserver.observe(pageContainer);\n                    }\n                }\n            }[\"PdfCanvas.useEffect.renderAllPages\"];\n            renderAllPages();\n            return ({\n                \"PdfCanvas.useEffect\": ()=>{\n                    intersectionObserver.disconnect();\n                }\n            })[\"PdfCanvas.useEffect\"];\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        pdfDoc,\n        zoom,\n        rotations,\n        onCurrentPageChange,\n        addFabricEventListeners\n    ]);\n    // Update canvas properties when tool mode or color changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            fabricCanvasRefs.current.forEach({\n                \"PdfCanvas.useEffect\": (canvas)=>{\n                    if (!canvas) return;\n                    canvas.selection = toolMode === 'select';\n                    canvas.isDrawingMode = toolMode === 'draw';\n                    if (canvas.freeDrawingBrush) {\n                        canvas.freeDrawingBrush.color = color;\n                        canvas.freeDrawingBrush.width = 5;\n                    }\n                    canvas.setCursor(toolMode === 'text' ? 'crosshair' : 'default');\n                    const upperCanvas = canvas.upperCanvasEl;\n                    if (upperCanvas) {\n                        upperCanvas.style.cursor = \"\"; // Reset fabric's inline cursor style\n                    }\n                }\n            }[\"PdfCanvas.useEffect\"]);\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        toolMode,\n        color\n    ]);\n    // Scroll to a specific page\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (scrollToPage && pageRefs.current[scrollToPage - 1]) {\n                var _pageRefs_current_;\n                (_pageRefs_current_ = pageRefs.current[scrollToPage - 1]) === null || _pageRefs_current_ === void 0 ? void 0 : _pageRefs_current_.scrollIntoView({\n                    behavior: \"smooth\",\n                    block: \"start\"\n                });\n                onScrollComplete();\n            }\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        scrollToPage,\n        onScrollComplete\n    ]);\n    // Panning logic\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            const container = containerRef.current;\n            if (!container) return;\n            if (toolMode === 'move') {\n                container.style.cursor = 'grab';\n            } else {\n                container.style.cursor = 'default';\n            }\n            const handleMouseDown = {\n                \"PdfCanvas.useEffect.handleMouseDown\": (e)=>{\n                    if (toolMode !== 'move' || !containerRef.current) return;\n                    // Pan only when clicking on the container background, not the canvas\n                    if (e.target.closest('.relative.mb-4')) return;\n                    isPanning.current = true;\n                    containerRef.current.style.cursor = 'grabbing';\n                    panStart.current = {\n                        x: e.clientX,\n                        y: e.clientY,\n                        scrollLeft: containerRef.current.scrollLeft,\n                        scrollTop: containerRef.current.scrollTop\n                    };\n                    e.preventDefault();\n                }\n            }[\"PdfCanvas.useEffect.handleMouseDown\"];\n            const handleMouseMove = {\n                \"PdfCanvas.useEffect.handleMouseMove\": (e)=>{\n                    if (!isPanning.current || !containerRef.current) return;\n                    e.preventDefault();\n                    const dx = e.clientX - panStart.current.x;\n                    const dy = e.clientY - panStart.current.y;\n                    containerRef.current.scrollTop = panStart.current.scrollTop - dy;\n                    containerRef.current.scrollLeft = panStart.current.scrollLeft - dx;\n                }\n            }[\"PdfCanvas.useEffect.handleMouseMove\"];\n            const handleMouseUp = {\n                \"PdfCanvas.useEffect.handleMouseUp\": ()=>{\n                    if (!isPanning.current || !containerRef.current) return;\n                    isPanning.current = false;\n                    if (toolMode === 'move') containerRef.current.style.cursor = 'grab';\n                }\n            }[\"PdfCanvas.useEffect.handleMouseUp\"];\n            container.addEventListener('mousedown', handleMouseDown);\n            container.addEventListener('mousemove', handleMouseMove);\n            window.addEventListener('mouseup', handleMouseUp);\n            container.addEventListener('mouseleave', handleMouseUp);\n            return ({\n                \"PdfCanvas.useEffect\": ()=>{\n                    if (container) {\n                        container.removeEventListener('mousedown', handleMouseDown);\n                        container.removeEventListener('mousemove', handleMouseMove);\n                    }\n                    window.removeEventListener('mouseup', handleMouseUp);\n                }\n            })[\"PdfCanvas.useEffect\"];\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        toolMode\n    ]);\n    // Center canvas on zoom\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PdfCanvas.useEffect\": ()=>{\n            if (!containerRef.current) return;\n            const containerWidth = containerRef.current.clientWidth;\n            const contentWidth = containerRef.current.scrollWidth;\n            if (contentWidth > containerWidth) {\n                containerRef.current.scrollLeft = (contentWidth - containerWidth) / 2;\n            } else {\n                containerRef.current.scrollLeft = 0;\n            }\n        }\n    }[\"PdfCanvas.useEffect\"], [\n        zoom\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        className: \"w-full h-full flex flex-col items-center overflow-auto bg-muted p-4\"\n    }, void 0, false, {\n        fileName: \"/home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx\",\n        lineNumber: 329,\n        columnNumber: 5\n    }, undefined);\n};\n_s(PdfCanvas, \"NpY0yMQGmQab2yhUeXmsfsOcvSw=\");\n_c = PdfCanvas;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PdfCanvas);\nvar _c;\n$RefreshReg$(_c, \"PdfCanvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZWRpdC1wZGYvY29tcG9uZW50cy9QZGZDYW52YXMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFHd0U7QUFDdkI7QUFDakI7QUFDSTtBQUdwQ0sscUVBQTRCLENBQUNLLFNBQVMsR0FBRywyQ0FBNEQsT0FBakJMLHlEQUFnQixFQUFDO0FBa0JyRyxNQUFNTyxZQUFzQztRQUFDLEVBQzNDQyxPQUFPLEVBQ1BDLFlBQVksRUFDWkMsbUJBQW1CLEVBQ25CQyxJQUFJLEVBQ0pDLFNBQVMsRUFDVEMsWUFBWSxFQUNaQyxnQkFBZ0IsRUFDaEJDLFFBQVEsRUFDUkMsS0FBSyxFQUNMQyxlQUFlLEVBQ2ZDLGdCQUFnQixFQUNqQjs7SUFDQyxNQUFNQyxlQUFldEIsNkNBQU1BLENBQXdCO0lBQ25ELE1BQU11QixtQkFBbUJ2Qiw2Q0FBTUEsQ0FBa0IsRUFBRTtJQUNuRCxNQUFNd0IsV0FBV3hCLDZDQUFNQSxDQUE0QixFQUFFO0lBQ3JELE1BQU0sQ0FBQ3lCLFFBQVFDLFVBQVUsR0FBR3pCLCtDQUFRQSxDQUFtQztJQUV2RSxNQUFNMEIsWUFBWTNCLDZDQUFNQSxDQUFDO0lBQ3pCLE1BQU00QixXQUFXNUIsNkNBQU1BLENBQUM7UUFBRTZCLEdBQUc7UUFBR0MsR0FBRztRQUFHQyxZQUFZO1FBQUdDLFdBQVc7SUFBRTtJQUNsRSxNQUFNQyxjQUFjakMsNkNBQU1BLENBS3ZCO1FBQUVrQyxXQUFXO1FBQU9DLFFBQVE7UUFBR0MsUUFBUTtRQUFHQyxNQUFNO0lBQUs7SUFFeEQsb0JBQW9CO0lBQ3BCdEMsZ0RBQVNBOytCQUFDO1lBQ1IsSUFBSSxDQUFDWSxTQUFTO2dCQUNaWSxpQkFBaUJlLE9BQU8sQ0FBQ0MsT0FBTzsyQ0FBQ0MsQ0FBQUEsU0FBVUEsT0FBT0MsT0FBTzs7Z0JBQ3pEbEIsaUJBQWlCZSxPQUFPLEdBQUcsRUFBRTtnQkFDN0JkLFNBQVNjLE9BQU8sR0FBRyxFQUFFO2dCQUNyQixJQUFJaEIsYUFB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QUMrSCxlQUFlRCxjQUFhLElBQUs7WUFDeEUsT0FBTztnQkFDSHZJLGFBQWFnQixPQUFPLENBQUNQLFVBQVUsR0FBRztZQUN0QztRQUNKOzhCQUFHO1FBQUNqQjtLQUFLO0lBR1QscUJBQ0UsOERBQUNrSjtRQUNDQyxLQUFLM0k7UUFDTGtHLFdBQVU7Ozs7OztBQUdoQjtHQWxUTTlHO0tBQUFBO0FBb1ROLGlFQUFlQSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvaG9tZS91c2VyL3N0dWRpby9zcmMvYXBwL2VkaXQtcGRmL2NvbXBvbmVudHMvUGRmQ2FudmFzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcblwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgcGRmanNMaWIgZnJvbSBcInBkZmpzLWRpc3QvYnVpbGQvcGRmXCI7XG5pbXBvcnQgeyBmYWJyaWMgfSBmcm9tIFwiZmFicmljXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB0eXBlIHsgVG9vbCB9IGZyb20gXCIuL1Rvb2xiYXJcIjtcblxucGRmanNMaWIuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMgPSBgLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcGRmLmpzLyR7cGRmanNMaWIudmVyc2lvbn0vcGRmLndvcmtlci5taW4uanNgO1xuXG5pbnRlcmZhY2UgUGRmQ2FudmFzUHJvcHMge1xuICBwZGZGaWxlOiBGaWxlIHwgbnVsbDtcbiAgb25Ub3RhbFBhZ2VzOiAodG90YWw6IG51bWJlcikgPT4gdm9pZDtcbiAgb25DdXJyZW50UGFnZUNoYW5nZTogKHBhZ2U6IG51bWJlcikgPT4gdm9pZDtcbiAgem9vbTogbnVtYmVyO1xuICByb3RhdGlvbnM6IHsgW2tleTogbnVtYmVyXTogbnVtYmVyIH07XG4gIHNjcm9sbFRvUGFnZTogbnVtYmVyIHwgbnVsbDtcbiAgb25TY3JvbGxDb21wbGV0ZTogKCkgPT4gdm9pZDtcbiAgdG9vbE1vZGU6IFRvb2w7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIGFjdGl2ZU9iamVjdDogZmFicmljLk9iamVjdCB8IG51bGw7XG4gIHNldEFjdGl2ZU9iamVjdDogKG9iajogZmFicmljLk9iamVjdCB8IG51bGwpID0+IHZvaWQ7XG4gIGlzVGV4dEVkaXRpbmc6IGJvb2xlYW47XG4gIHNldElzVGV4dEVkaXRpbmc6IChvYmo6IGZhYnJpYy5PYmplY3QpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFBkZkNhbnZhczogUmVhY3QuRkM8UGRmQ2FudmFzUHJvcHM+ID0gKHtcbiAgcGRmRmlsZSxcbiAgb25Ub3RhbFBhZ2VzLFxuICBvbkN1cnJlbnRQYWdlQ2hhbmdlLFxuICB6b29tLFxuICByb3RhdGlvbnMsXG4gIHNjcm9sbFRvUGFnZSxcbiAgb25TY3JvbGxDb21wbGV0ZSxcbiAgdG9vbE1vZGUsXG4gIGNvbG9yLFxuICBzZXRBY3RpdmVPYmplY3QsXG4gIHNldElzVGV4dEVkaXRpbmcsXG59KSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBmYWJyaWNDYW52YXNSZWZzID0gdXNlUmVmPGZhYnJpYy5DYW52YXNbXT4oW10pO1xuICBjb25zdCBwYWdlUmVmcyA9IHVzZVJlZjwoSFRNTERpdkVsZW1lbnQgfCBudWxsKVtdPihbXSk7XG4gIGNvbnN0IFtwZGZEb2MsIHNldFBkZkRvY10gPSB1c2VTdGF0ZTxwZGZqc0xpYi5QREZEb2N1bWVudFByb3h5IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgaXNQYW5uaW5nID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgcGFuU3RhcnQgPSB1c2VSZWYoeyB4OiAwLCB5OiAwLCBzY3JvbGxMZWZ0OiAwLCBzY3JvbGxUb3A6IDAgfSk7XG4gIGNvbnN0IHRleHREcmF3aW5nID0gdXNlUmVmPHtcbiAgICBpc0RyYXdpbmc6IGJvb2xlYW47XG4gICAgc3RhcnRYOiBudW1iZXI7XG4gICAgc3RhcnRZOiBudW1iZXI7XG4gICAgcmVjdDogZmFicmljLlJlY3QgfCBudWxsO1xuICB9Pih7IGlzRHJhd2luZzogZmFsc2UsIHN0YXJ0WDogMCwgc3RhcnRZOiAwLCByZWN0OiBudWxsIH0pO1xuXG4gIC8vIExvYWQgUERGIGRvY3VtZW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwZGZGaWxlKSB7XG4gICAgICBmYWJyaWNDYW52YXNSZWZzLmN1cnJlbnQuZm9yRWFjaChjYW52YXMgPT4gY2FudmFzLmRpc3Bvc2UoKSk7XG4gICAgICBmYWJyaWNDYW52YXNSZWZzLmN1cnJlbnQgPSBbXTtcbiAgICAgIHBhZ2VSZWZzLmN1cnJlbnQgPSBbXTtcbiAgICAgIGlmIChjb250YWluZXJSZWYuY3VycmVudCkgY29udGFpbmVyUmVmLmN1cnJlbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIHNldFBkZkRvYyhudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KHJlYWRlci5yZXN1bHQgYXMgQXJyYXlCdWZmZXIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZG9jID0gYXdhaXQgcGRmanNMaWIuZ2V0RG9jdW1lbnQoeyBkYXRhIH0pLnByb21pc2U7XG4gICAgICAgIHNldFBkZkRvYyhkb2MpO1xuICAgICAgICBvblRvdGFsUGFnZXMoZG9jLm51bVBhZ2VzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIFBERiBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHBkZkZpbGUpO1xuICB9LCBbcGRmRmlsZSwgb25Ub3RhbFBhZ2VzXSk7XG4gIFxuICBjb25zdCBhZGRGYWJyaWNFdmVudExpc3RlbmVycyA9IHVzZUNhbGxiYWNrKChjYW52YXM6IGZhYnJpYy5DYW52YXMpID0+IHtcbiAgICBjYW52YXMub24oJ21vdXNlOmRvd24nLCAobykgPT4ge1xuICAgICAgICBpZiAodG9vbE1vZGUgIT09ICd0ZXh0JyB8fCAhby5wb2ludGVyKSByZXR1cm47XG4gICAgICAgIHRleHREcmF3aW5nLmN1cnJlbnQuaXNEcmF3aW5nID0gdHJ1ZTtcbiAgICAgICAgdGV4dERyYXdpbmcuY3VycmVudC5zdGFydFggPSBvLnBvaW50ZXIueDtcbiAgICAgICAgdGV4dERyYXdpbmcuY3VycmVudC5zdGFydFkgPSBvLnBvaW50ZXIueTtcblxuICAgICAgICB0ZXh0RHJhd2luZy5jdXJyZW50LnJlY3QgPSBuZXcgZmFicmljLlJlY3Qoe1xuICAgICAgICAgICAgbGVmdDogby5wb2ludGVyLngsXG4gICAgICAgICAgICB0b3A6IG8ucG9pbnRlci55LFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBzdHJva2U6ICdyZ2JhKDEwMCwgMjAwLCAyMDAsIDAuNSknLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXG4gICAgICAgICAgICBmaWxsOiAncmdiYSgxMDAsIDIwMCwgMjAwLCAwLjEpJyxcbiAgICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgY2FudmFzLmFkZCh0ZXh0RHJhd2luZy5jdXJyZW50LnJlY3QpO1xuICAgIH0pO1xuXG4gICAgY2FudmFzLm9uKCdtb3VzZTptb3ZlJywgKG8pID0+IHtcbiAgICAgICAgaWYgKCF0ZXh0RHJhd2luZy5jdXJyZW50LmlzRHJhd2luZyB8fCAhby5wb2ludGVyIHx8ICF0ZXh0RHJhd2luZy5jdXJyZW50LnJlY3QpIHJldHVybjtcbiAgICAgICAgY29uc3QgeyBzdGFydFgsIHN0YXJ0WSB9ID0gdGV4dERyYXdpbmcuY3VycmVudDtcbiAgICAgICAgbGV0IGxlZnQgPSBzdGFydFg7XG4gICAgICAgIGxldCB0b3AgPSBzdGFydFk7XG4gICAgICAgIGxldCB3aWR0aCA9IG8ucG9pbnRlci54IC0gc3RhcnRYO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gby5wb2ludGVyLnkgLSBzdGFydFk7XG5cbiAgICAgICAgaWYgKHdpZHRoIDwgMCkgeyBsZWZ0ID0gby5wb2ludGVyLng7IHdpZHRoID0gLXdpZHRoOyB9XG4gICAgICAgIGlmIChoZWlnaHQgPCAwKSB7IHRvcCA9IG8ucG9pbnRlci55OyBoZWlnaHQgPSAtaGVpZ2h0OyB9XG4gICAgICAgIFxuICAgICAgICB0ZXh0RHJhd2luZy5jdXJyZW50LnJlY3Quc2V0KHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgICAgICBjYW52YXMucmVxdWVzdFJlbmRlckFsbCgpO1xuICAgIH0pO1xuXG4gICAgY2FudmFzLm9uKCdtb3VzZTp1cCcsIChvKSA9PiB7XG4gICAgICAgIGlmICghdGV4dERyYXdpbmcuY3VycmVudC5pc0RyYXdpbmcgfHwgIW8ucG9pbnRlciB8fCAhdGV4dERyYXdpbmcuY3VycmVudC5yZWN0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSB0ZXh0RHJhd2luZy5jdXJyZW50LnJlY3Q7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMucmVtb3ZlKHRleHREcmF3aW5nLmN1cnJlbnQucmVjdCk7XG4gICAgICAgIHRleHREcmF3aW5nLmN1cnJlbnQuaXNEcmF3aW5nID0gZmFsc2U7XG4gICAgICAgIHRleHREcmF3aW5nLmN1cnJlbnQucmVjdCA9IG51bGw7XG5cbiAgICAgICAgaWYgKHdpZHRoID4gNSAmJiBoZWlnaHQgPiA1KSB7XG4gICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gbmV3IGZhYnJpYy5JVGV4dCgn6bue5pOK57eo6LyvJywge1xuICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAyMCxcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICAgICAgICAgICAgICAgIG5hbWU6IGB0ZXh0XyR7dXVpZHY0KCl9YFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYW52YXMuYWRkKG5ld1RleHQpO1xuICAgICAgICAgICAgY2FudmFzLnNldEFjdGl2ZU9iamVjdChuZXdUZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjYW52YXMucmVxdWVzdFJlbmRlckFsbCgpO1xuICAgIH0pO1xuXG4gICAgY2FudmFzLm9uKCdzZWxlY3Rpb246Y3JlYXRlZCcsIChlKSA9PiBzZXRBY3RpdmVPYmplY3QoZS5zZWxlY3RlZCA/IGUuc2VsZWN0ZWRbMF0gOiBudWxsKSk7XG4gICAgY2FudmFzLm9uKCdzZWxlY3Rpb246dXBkYXRlZCcsIChlKSA9PiBzZXRBY3RpdmVPYmplY3QoZS5zZWxlY3RlZCA/IGUuc2VsZWN0ZWRbMF0gOiBudWxsKSk7XG4gICAgY2FudmFzLm9uKCdzZWxlY3Rpb246Y2xlYXJlZCcsICgpID0+IHNldEFjdGl2ZU9iamVjdChudWxsKSk7XG4gICAgXG4gICAgY2FudmFzLm9uKCdtb3VzZTpkYmxjbGljaycsIChvKSA9PiB7XG4gICAgICAgIGlmIChvLnRhcmdldCAmJiBvLnRhcmdldC50eXBlID09PSAnaS10ZXh0Jykge1xuICAgICAgICAgICAgc2V0SXNUZXh0RWRpdGluZyhvLnRhcmdldCk7XG4gICAgICAgICAgICBvLnRhcmdldC5lbnRlckVkaXRpbmcoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgY2FudmFzLm9uKCdtb3VzZTp3aGVlbCcsIChvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IG9wdC5lIGFzIFdoZWVsRXZlbnQ7XG4gICAgICAgIGlmIChjb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wICs9IGUuZGVsdGFZO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gIH0sIFt0b29sTW9kZSwgY29sb3IsIHNldEFjdGl2ZU9iamVjdCwgc2V0SXNUZXh0RWRpdGluZ10pO1xuXG4gIC8vIFJlbmRlciBhbGwgcGFnZXMgYW5kIHNldCB1cCBvYnNlcnZlcnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXBkZkRvYyB8fCAhY29udGFpbmVyUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGNvbnN0IGludGVyc2VjdGlvbk9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgY29uc3QgdmlzaWJsZUVudHJpZXMgPSBlbnRyaWVzLmZpbHRlcigoZSkgPT4gZS5pc0ludGVyc2VjdGluZyk7XG4gICAgICAgIGlmICh2aXNpYmxlRW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmlzaWJsZUVudHJpZXMuc29ydCgoYSwgYikgPT4gYS5ib3VuZGluZ0NsaWVudFJlY3QudG9wIC0gYi5ib3VuZGluZ0NsaWVudFJlY3QudG9wKTtcbiAgICAgICAgICBjb25zdCB0b3BWaXNpYmxlUGFnZSA9IHZpc2libGVFbnRyaWVzWzBdO1xuICAgICAgICAgIGNvbnN0IHBhZ2VOdW0gPSBOdW1iZXIoKHRvcFZpc2libGVQYWdlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5wYWdlTnVtYmVyKTtcbiAgICAgICAgICBpZiAocGFnZU51bSkgb25DdXJyZW50UGFnZUNoYW5nZShwYWdlTnVtKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgcm9vdDogY29udGFpbmVyUmVmLmN1cnJlbnQsIHJvb3RNYXJnaW46IFwiLTUwJSAwcHggLTUwJSAwcHhcIiwgdGhyZXNob2xkOiAwIH1cbiAgICApO1xuICAgIFxuICAgIC8vIENsZWFudXAgb2xkIGNhbnZhc2VzXG4gICAgZmFicmljQ2FudmFzUmVmcy5jdXJyZW50LmZvckVhY2goY2FudmFzID0+IGNhbnZhcy5kaXNwb3NlKCkpO1xuICAgIGZhYnJpY0NhbnZhc1JlZnMuY3VycmVudCA9IFtdO1xuICAgIHBhZ2VSZWZzLmN1cnJlbnQgPSBbXTtcbiAgICBpZihjb250YWluZXJSZWYuY3VycmVudCkgY29udGFpbmVyUmVmLmN1cnJlbnQuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGNvbnN0IHJlbmRlckFsbFBhZ2VzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFjb250YWluZXJSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRXaWR0aCAtIDMyO1xuXG4gICAgICBmb3IgKGxldCBwYWdlTnVtID0gMTsgcGFnZU51bSA8PSBwZGZEb2MubnVtUGFnZXM7IHBhZ2VOdW0rKykge1xuICAgICAgICBjb25zdCBwYWdlID0gYXdhaXQgcGRmRG9jLmdldFBhZ2UocGFnZU51bSk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gcm90YXRpb25zW3BhZ2VOdW1dIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1bnJvdGF0ZWRWaWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoeyBzY2FsZTogMSB9KTtcbiAgICAgICAgY29uc3Qgc2NhbGVUb0ZpdCA9IGF2YWlsYWJsZVdpZHRoIC8gdW5yb3RhdGVkVmlld3BvcnQud2lkdGg7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gcGFnZS5nZXRWaWV3cG9ydCh7IHNjYWxlOiBzY2FsZVRvRml0ICogem9vbSwgcm90YXRpb24gfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc05hbWUgPSBcInJlbGF0aXZlIG1iLTQgYmctYmFja2dyb3VuZCBzaGFkb3ctbWRcIjtcbiAgICAgICAgcGFnZUNvbnRhaW5lci5kYXRhc2V0LnBhZ2VOdW1iZXIgPSBTdHJpbmcocGFnZU51bSk7XG5cbiAgICAgICAgY29uc3QgcGRmQ2FudmFzRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICBjb25zdCBmYWJyaWNDYW52YXNFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGZhYnJpY0NhbnZhc0VsLmNsYXNzTmFtZSA9IFwiYWJzb2x1dGUgdG9wLTAgbGVmdC0wXCI7XG4gICAgICAgIFxuICAgICAgICBwYWdlQ29udGFpbmVyLmFwcGVuZChwZGZDYW52YXNFbCwgZmFicmljQ2FudmFzRWwpO1xuICAgICAgICBjb250YWluZXJSZWYuY3VycmVudC5hcHBlbmRDaGlsZChwYWdlQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICAgIHBkZkNhbnZhc0VsLndpZHRoID0gdmlld3BvcnQud2lkdGg7XG4gICAgICAgIHBkZkNhbnZhc0VsLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDtcbiAgICAgICAgZmFicmljQ2FudmFzRWwud2lkdGggPSB2aWV3cG9ydC53aWR0aDtcbiAgICAgICAgZmFicmljQ2FudmFzRWwuaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGRmQ3R4ID0gcGRmQ2FudmFzRWwuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBpZiAocGRmQ3R4KSB7XG4gICAgICAgICAgICBhd2FpdCBwYWdlLnJlbmRlcih7IGNhbnZhc0NvbnRleHQ6IHBkZkN0eCwgdmlld3BvcnQgfSkucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZhYnJpY0NhbnZhcyA9IG5ldyBmYWJyaWMuQ2FudmFzKGZhYnJpY0NhbnZhc0VsKTtcbiAgICAgICAgXG4gICAgICAgIGZhYnJpY0NhbnZhc1JlZnMuY3VycmVudFtwYWdlTnVtLTFdID0gZmFicmljQ2FudmFzO1xuICAgICAgICBwYWdlUmVmcy5jdXJyZW50W3BhZ2VOdW0tMV0gPSBwYWdlQ29udGFpbmVyO1xuXG4gICAgICAgIGFkZEZhYnJpY0V2ZW50TGlzdGVuZXJzKGZhYnJpY0NhbnZhcyk7XG4gICAgICAgIGludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUocGFnZUNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfTtcbiAgICByZW5kZXJBbGxQYWdlcygpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGludGVyc2VjdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9O1xuICB9LCBbcGRmRG9jLCB6b29tLCByb3RhdGlvbnMsIG9uQ3VycmVudFBhZ2VDaGFuZ2UsIGFkZEZhYnJpY0V2ZW50TGlzdGVuZXJzXSk7XG5cbiAgLy8gVXBkYXRlIGNhbnZhcyBwcm9wZXJ0aWVzIHdoZW4gdG9vbCBtb2RlIG9yIGNvbG9yIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmYWJyaWNDYW52YXNSZWZzLmN1cnJlbnQuZm9yRWFjaChjYW52YXMgPT4ge1xuICAgICAgaWYgKCFjYW52YXMpIHJldHVybjtcbiAgICAgIGNhbnZhcy5zZWxlY3Rpb24gPSB0b29sTW9kZSA9PT0gJ3NlbGVjdCc7XG4gICAgICBjYW52YXMuaXNEcmF3aW5nTW9kZSA9IHRvb2xNb2RlID09PSAnZHJhdyc7XG4gICAgICBcbiAgICAgIGlmIChjYW52YXMuZnJlZURyYXdpbmdCcnVzaCkge1xuICAgICAgICBjYW52YXMuZnJlZURyYXdpbmdCcnVzaC5jb2xvciA9IGNvbG9yO1xuICAgICAgICBjYW52YXMuZnJlZURyYXdpbmdCcnVzaC53aWR0aCA9IDU7XG4gICAgICB9XG4gICAgICBjYW52YXMuc2V0Q3Vyc29yKHRvb2xNb2RlID09PSAndGV4dCcgPyAnY3Jvc3NoYWlyJyA6ICdkZWZhdWx0Jyk7XG4gICAgICBjb25zdCB1cHBlckNhbnZhcyA9IGNhbnZhcy51cHBlckNhbnZhc0VsO1xuICAgICAgaWYgKHVwcGVyQ2FudmFzKSB7XG4gICAgICAgIHVwcGVyQ2FudmFzLnN0eWxlLmN1cnNvciA9IFwiXCI7IC8vIFJlc2V0IGZhYnJpYydzIGlubGluZSBjdXJzb3Igc3R5bGVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW3Rvb2xNb2RlLCBjb2xvcl0pO1xuXG4gIC8vIFNjcm9sbCB0byBhIHNwZWNpZmljIHBhZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2Nyb2xsVG9QYWdlICYmIHBhZ2VSZWZzLmN1cnJlbnRbc2Nyb2xsVG9QYWdlIC0gMV0pIHtcbiAgICAgIHBhZ2VSZWZzLmN1cnJlbnRbc2Nyb2xsVG9QYWdlIC0gMV0/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcInN0YXJ0XCIgfSk7XG4gICAgICBvblNjcm9sbENvbXBsZXRlKCk7XG4gICAgfVxuICB9LCBbc2Nyb2xsVG9QYWdlLCBvblNjcm9sbENvbXBsZXRlXSk7XG5cbiAgLy8gUGFubmluZyBsb2dpY1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICBpZiAodG9vbE1vZGUgPT09ICdtb3ZlJykge1xuICAgICAgY29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdncmFiJztcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVNb3VzZURvd24gPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKHRvb2xNb2RlICE9PSAnbW92ZScgfHwgIWNvbnRhaW5lclJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICAvLyBQYW4gb25seSB3aGVuIGNsaWNraW5nIG9uIHRoZSBjb250YWluZXIgYmFja2dyb3VuZCwgbm90IHRoZSBjYW52YXNcbiAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5yZWxhdGl2ZS5tYi00JykpIHJldHVybjtcbiAgICAgIGlzUGFubmluZy5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50LnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XG4gICAgICBwYW5TdGFydC5jdXJyZW50ID0ge1xuICAgICAgICB4OiBlLmNsaWVudFgsXG4gICAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgICAgc2Nyb2xsTGVmdDogY29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCxcbiAgICAgICAgc2Nyb2xsVG9wOiBjb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3AsXG4gICAgICB9O1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKCFpc1Bhbm5pbmcuY3VycmVudCB8fCAhY29udGFpbmVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGR4ID0gZS5jbGllbnRYIC0gcGFuU3RhcnQuY3VycmVudC54O1xuICAgICAgY29uc3QgZHkgPSBlLmNsaWVudFkgLSBwYW5TdGFydC5jdXJyZW50Lnk7XG4gICAgICBjb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBwYW5TdGFydC5jdXJyZW50LnNjcm9sbFRvcCAtIGR5O1xuICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IHBhblN0YXJ0LmN1cnJlbnQuc2Nyb2xsTGVmdCAtIGR4O1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4ge1xuICAgICAgaWYgKCFpc1Bhbm5pbmcuY3VycmVudCB8fCAhY29udGFpbmVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIGlzUGFubmluZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBpZiAodG9vbE1vZGUgPT09ICdtb3ZlJykgY29udGFpbmVyUmVmLmN1cnJlbnQuc3R5bGUuY3Vyc29yID0gJ2dyYWInO1xuICAgIH07XG4gICAgXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZU1vdXNlRG93bik7XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGhhbmRsZU1vdXNlVXApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlTW91c2VEb3duKTtcbiAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XG4gICAgfTtcbiAgfSwgW3Rvb2xNb2RlXSk7XG5cbiAgLy8gQ2VudGVyIGNhbnZhcyBvbiB6b29tXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IGNvbnRhaW5lclJlZi5jdXJyZW50LmNsaWVudFdpZHRoO1xuICAgICAgY29uc3QgY29udGVudFdpZHRoID0gY29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsV2lkdGg7XG4gICAgICBpZiAoY29udGVudFdpZHRoID4gY29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgICBjb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gKGNvbnRlbnRXaWR0aCAtIGNvbnRhaW5lcldpZHRoKSAvIDI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbExlZnQgPSAwO1xuICAgICAgfVxuICB9LCBbem9vbV0pO1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgb3ZlcmZsb3ctYXV0byBiZy1tdXRlZCBwLTRcIlxuICAgIC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQZGZDYW52YXM7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwicGRmanNMaWIiLCJmYWJyaWMiLCJ2NCIsInV1aWR2NCIsIkdsb2JhbFdvcmtlck9wdGlvbnMiLCJ3b3JrZXJTcmMiLCJ2ZXJzaW9uIiwiUGRmQ2FudmFzIiwicGRmRmlsZSIsIm9uVG90YWxQYWdlcyIsIm9uQ3VycmVudFBhZ2VDaGFuZ2UiLCJ6b29tIiwicm90YXRpb25zIiwic2Nyb2xsVG9QYWdlIiwib25TY3JvbGxDb21wbGV0ZSIsInRvb2xNb2RlIiwiY29sb3IiLCJzZXRBY3RpdmVPYmplY3QiLCJzZXRJc1RleHRFZGl0aW5nIiwiY29udGFpbmVyUmVmIiwiZmFicmljQ2FudmFzUmVmcyIsInBhZ2VSZWZzIiwicGRmRG9jIiwic2V0UGRmRG9jIiwiaXNQYW5uaW5nIiwicGFuU3RhcnQiLCJ4IiwieSIsInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiLCJ0ZXh0RHJhd2luZyIsImlzRHJhd2luZyIsInN0YXJ0WCIsInN0YXJ0WSIsInJlY3QiLCJjdXJyZW50IiwiZm9yRWFjaCIsImNhbnZhcyIsImRpc3Bvc2UiLCJpbm5lckhUTUwiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZGF0YSIsIlVpbnQ4QXJyYXkiLCJyZXN1bHQiLCJkb2MiLCJnZXREb2N1bWVudCIsInByb21pc2UiLCJudW1QYWdlcyIsImVycm9yIiwiY29uc29sZSIsInJlYWRBc0FycmF5QnVmZmVyIiwiYWRkRmFicmljRXZlbnRMaXN0ZW5lcnMiLCJvbiIsIm8iLCJwb2ludGVyIiwiUmVjdCIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsImhlaWdodCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwiZmlsbCIsInNlbGVjdGFibGUiLCJhZGQiLCJzZXQiLCJyZXF1ZXN0UmVuZGVyQWxsIiwicmVtb3ZlIiwibmV3VGV4dCIsIklUZXh0IiwiZm9udFNpemUiLCJmb250RmFtaWx5IiwibmFtZSIsImUiLCJzZWxlY3RlZCIsInRhcmdldCIsInR5cGUiLCJlbnRlckVkaXRpbmciLCJvcHQiLCJkZWx0YVkiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImludGVyc2VjdGlvbk9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwidmlzaWJsZUVudHJpZXMiLCJmaWx0ZXIiLCJpc0ludGVyc2VjdGluZyIsImxlbmd0aCIsInNvcnQiLCJhIiwiYiIsImJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcFZpc2libGVQYWdlIiwicGFnZU51bSIsIk51bWJlciIsImRhdGFzZXQiLCJwYWdlTnVtYmVyIiwicm9vdCIsInJvb3RNYXJnaW4iLCJ0aHJlc2hvbGQiLCJyZW5kZXJBbGxQYWdlcyIsImF2YWlsYWJsZVdpZHRoIiwiY2xpZW50V2lkdGgiLCJwYWdlIiwiZ2V0UGFnZSIsInJvdGF0aW9uIiwidW5yb3RhdGVkVmlld3BvcnQiLCJnZXRWaWV3cG9ydCIsInNjYWxlIiwic2NhbGVUb0ZpdCIsInZpZXdwb3J0IiwicGFnZUNvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIlN0cmluZyIsInBkZkNhbnZhc0VsIiwiZmFicmljQ2FudmFzRWwiLCJhcHBlbmQiLCJhcHBlbmRDaGlsZCIsInBkZkN0eCIsImdldENvbnRleHQiLCJyZW5kZXIiLCJjYW52YXNDb250ZXh0IiwiZmFicmljQ2FudmFzIiwiQ2FudmFzIiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCJzZWxlY3Rpb24iLCJpc0RyYXdpbmdNb2RlIiwiZnJlZURyYXdpbmdCcnVzaCIsInNldEN1cnNvciIsInVwcGVyQ2FudmFzIiwidXBwZXJDYW52YXNFbCIsInN0eWxlIiwiY3Vyc29yIiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImJsb2NrIiwiY29udGFpbmVyIiwiaGFuZGxlTW91c2VEb3duIiwiY2xvc2VzdCIsImNsaWVudFgiLCJjbGllbnRZIiwiaGFuZGxlTW91c2VNb3ZlIiwiZHgiLCJkeSIsImhhbmRsZU1vdXNlVXAiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5lcldpZHRoIiwiY29udGVudFdpZHRoIiwic2Nyb2xsV2lkdGgiLCJkaXYiLCJyZWYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/edit-pdf/components/PdfCanvas.tsx\n"));

/***/ })

});