{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/menubar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/PdfCanvas.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport type { Tool } from \"./Toolbar\";\n\ninterface PdfCanvasProps {\n  pdfFile: File | null;\n  onTotalPages: (total: number) => void;\n  onCurrentPageChange: (page: number) => void;\n  zoom: number;\n  rotations: { [key: number]: number };\n  scrollToPage: number | null;\n  onScrollComplete: () => void;\n  toolMode: Tool;\n}\n\nconst PdfCanvas: React.FC<PdfCanvasProps> = ({\n  pdfFile,\n  onTotalPages,\n  onCurrentPageChange,\n  zoom,\n  rotations,\n  scrollToPage,\n  onScrollComplete,\n  toolMode,\n}) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const pageRefs = useRef<(HTMLDivElement | null)[]>([]);\n  const [pdfDoc, setPdfDoc] = useState<any>(null);\n  \n  const isPanning = useRef(false);\n  const panStart = useRef({ x: 0, y: 0, scrollLeft: 0, scrollTop: 0 });\n\n  // Panning logic\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    if (toolMode === 'move') {\n      container.style.cursor = 'grab';\n    } else {\n      container.style.cursor = 'default';\n    }\n\n    const handleMouseDown = (e: MouseEvent) => {\n      if (toolMode !== 'move' || !containerRef.current) return;\n      isPanning.current = true;\n      containerRef.current.style.cursor = 'grabbing';\n      panStart.current = {\n        x: e.clientX,\n        y: e.clientY,\n        scrollLeft: containerRef.current.scrollLeft,\n        scrollTop: containerRef.current.scrollTop,\n      };\n      e.preventDefault();\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isPanning.current || !containerRef.current) return;\n      e.preventDefault();\n      const dx = e.clientX - panStart.current.x;\n      const dy = e.clientY - panStart.current.y;\n      containerRef.current.scrollTop = panStart.current.scrollTop - dy;\n      containerRef.current.scrollLeft = panStart.current.scrollLeft - dx;\n    };\n\n    const handleMouseUp = () => {\n      if (!isPanning.current || !containerRef.current) return;\n      isPanning.current = false;\n      if (toolMode === 'move') {\n        containerRef.current.style.cursor = 'grab';\n      }\n    };\n    \n    container.addEventListener('mousedown', handleMouseDown);\n    container.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    container.addEventListener('mouseleave', handleMouseUp);\n\n\n    return () => {\n      if (container) {\n          container.removeEventListener('mousedown', handleMouseDown);\n          container.removeEventListener('mousemove', handleMouseMove);\n      }\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [toolMode]);\n\n  // Load PDF document from file\n  useEffect(() => {\n    if (!pdfFile) {\n      setPdfDoc(null);\n      pageRefs.current = [];\n      if (containerRef.current) containerRef.current.innerHTML = \"\";\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = async () => {\n      const pdfjsLib = await import(\"pdfjs-dist/build/pdf\");\n      pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n      \n      const data = new Uint8Array(reader.result as ArrayBuffer);\n      try {\n        const doc = await pdfjsLib.getDocument({ data }).promise;\n        setPdfDoc(doc);\n        onTotalPages(doc.numPages);\n      } catch (error) {\n        console.error(\"Error loading PDF document:\", error);\n      }\n    };\n    reader.readAsArrayBuffer(pdfFile);\n  }, [pdfFile, onTotalPages]);\n\n  // Render all pages and set up IntersectionObserver\n  useEffect(() => {\n    if (!pdfDoc || !containerRef.current || !pdfFile) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const visibleEntries = entries.filter((e) => e.isIntersecting);\n        if (visibleEntries.length > 0) {\n          visibleEntries.sort((a, b) => a.boundingClientRect.top - b.boundingClientRect.top);\n          const topVisiblePage = visibleEntries[0];\n          const pageNum = Number((topVisiblePage.target as HTMLElement).dataset.pageNumber);\n          if (pageNum) {\n            onCurrentPageChange(pageNum);\n          }\n        }\n      },\n      {\n        root: containerRef.current,\n        rootMargin: \"-50% 0px -50% 0px\",\n        threshold: 0,\n      }\n    );\n\n    const renderAllPages = async () => {\n      if (!containerRef.current) return;\n      containerRef.current.innerHTML = \"\";\n      const newPageRefs: (HTMLDivElement | null)[] = [];\n\n      const availableWidth = containerRef.current.clientWidth - 32;\n\n      for (let pageNum = 1; pageNum <= pdfDoc.numPages; pageNum++) {\n        const page = await pdfDoc.getPage(pageNum);\n        const rotation = rotations[pageNum] || 0;\n        \n        const unrotatedViewport = page.getViewport({ scale: 1 });\n        const scaleToFit = availableWidth / unrotatedViewport.width;\n        const viewport = page.getViewport({ scale: scaleToFit * zoom, rotation });\n\n        const pageContainer = document.createElement(\"div\");\n        pageContainer.className = \"mb-4 bg-background shadow-md\";\n        pageContainer.dataset.pageNumber = String(pageNum);\n        \n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) continue;\n        \n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        \n        pageContainer.appendChild(canvas);\n        containerRef.current.appendChild(pageContainer);\n        newPageRefs[pageNum - 1] = pageContainer;\n\n        observer.observe(pageContainer);\n        \n        await page.render({ canvasContext: ctx, viewport }).promise;\n      }\n      \n      if (containerRef.current) {\n          const firstCanvas = containerRef.current.querySelector('canvas');\n          if (firstCanvas) {\n              const containerWidth = containerRef.current.clientWidth;\n              const canvasWidth = firstCanvas.width;\n              if (canvasWidth > containerWidth) {\n                  containerRef.current.scrollLeft = (canvasWidth - containerWidth) / 2;\n              } else {\n                  containerRef.current.scrollLeft = 0;\n              }\n          }\n      }\n      pageRefs.current = newPageRefs;\n    };\n\n    renderAllPages();\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [pdfDoc, zoom, rotations, pdfFile, onCurrentPageChange]);\n\n  // Scroll to a specific page when requested\n  useEffect(() => {\n    if (scrollToPage && pageRefs.current[scrollToPage - 1]) {\n      pageRefs.current[scrollToPage - 1]?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n      });\n      onScrollComplete();\n    }\n  }, [scrollToPage, onScrollComplete]);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"w-full h-full flex flex-col items-center overflow-auto bg-muted p-4\"\n    />\n  );\n};\n\nexport default PdfCanvas;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 554, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 622, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 646, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/Sidebar.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\nimport { PlusCircle, FileUp, File as FileIcon } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface SidebarProps {\n  currentPage: number;\n  onPageClick: (pageNum: number) => void;\n  onInsertPdf: (file: File, index: number) => void;\n  onInsertBlankPage: (index: number) => void;\n  thumbnails: string[];\n  isLoading: boolean;\n}\n\ninterface InsertionPointProps {\n  index: number;\n  onInsertPdf: (file: File, index: number) => void;\n  onInsertBlankPage: (index: number) => void;\n}\n\nconst InsertionPoint: React.FC<InsertionPointProps> = ({ index, onInsertPdf, onInsertBlankPage }) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      onInsertPdf(file, index);\n    }\n    if (event.target) {\n      event.target.value = \"\";\n    }\n  };\n\n  return (\n    <div className=\"flex justify-center items-center my-1 group/insertion\">\n      <div className=\"w-full h-px bg-border group-hover/insertion:bg-primary transition-colors\" />\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 rounded-full -mx-3 z-10 bg-card group-hover/insertion:bg-primary group-hover/insertion:text-primary-foreground\">\n            <PlusCircle className=\"h-5 w-5\" />\n            <span className=\"sr-only\">Insert page at index {index}</span>\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"start\">\n          <DropdownMenuItem onSelect={() => fileInputRef.current?.click()}>\n            <FileUp className=\"mr-2 h-4 w-4\" />\n            <span>插入 PDF</span>\n          </DropdownMenuItem>\n          <DropdownMenuItem onSelect={() => onInsertBlankPage(index)}>\n            <FileIcon className=\"mr-2 h-4 w-4\" />\n            <span>插入空白頁</span>\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n      <div className=\"w-full h-px bg-border group-hover/insertion:bg-primary transition-colors\" />\n      <input\n        type=\"file\"\n        accept=\"application/pdf\"\n        ref={fileInputRef}\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n    </div>\n  );\n};\n\nconst Sidebar: React.FC<SidebarProps> = ({\n  currentPage,\n  onPageClick,\n  onInsertPdf,\n  onInsertBlankPage,\n  thumbnails,\n  isLoading\n}) => {\n  const thumbnailRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  useEffect(() => {\n    thumbnailRefs.current = thumbnailRefs.current.slice(0, thumbnails.length);\n  }, [thumbnails]);\n\n  useEffect(() => {\n    if (thumbnailRefs.current[currentPage - 1]) {\n      thumbnailRefs.current[currentPage - 1]?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\",\n      });\n    }\n  }, [currentPage]);\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <ScrollArea className=\"flex-grow\">\n        <div className=\"p-4\">\n          {isLoading ? (\n            <div className=\"space-y-4\">\n              {[...Array(3)].map((_, i) => (\n                <div key={i} className=\"space-y-2\">\n                    <Skeleton className=\"h-40 w-full\" />\n                    <Skeleton className=\"h-4 w-1/2 mx-auto\" />\n                </div>\n              ))}\n            </div>\n          ) : thumbnails.length > 0 ? (\n            <div className=\"space-y-2\">\n              <InsertionPoint index={0} onInsertPdf={onInsertPdf} onInsertBlankPage={onInsertBlankPage} />\n              {thumbnails.map((src, index) => (\n                <React.Fragment key={src + index}>\n                  <div\n                    ref={(el) => (thumbnailRefs.current[index] = el)}\n                    className={`border-2 rounded-lg cursor-pointer transition-all overflow-hidden shadow-sm ${\n                      currentPage === index + 1 ? \"border-primary ring-2 ring-primary/50\" : \"border-border hover:border-primary/50\"\n                    }`}\n                    onClick={() => onPageClick(index + 1)}\n                  >\n                    <img src={src} alt={`Page ${index + 1}`} className=\"w-full block\" />\n                    <div className=\"text-center text-sm py-1 bg-muted/50 text-muted-foreground\">p. {index + 1}</div>\n                  </div>\n                  <InsertionPoint index={index + 1} onInsertPdf={onInsertPdf} onInsertBlankPage={onInsertBlankPage} />\n                </React.Fragment>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center text-muted-foreground mt-4 text-sm\">\n              請從主面板上傳檔案\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1159, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toggle.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,oXACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,SACE;QACJ;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;QACN;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE,oBACzC,8OAAC,kKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAIb,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAoB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1212, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toggle-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;AAPA;;;;;;AASA,MAAM,mCAAqB,CAAA,GAAA,qMAAA,CAAA,gBAAmB,AAAD,EAE3C;IACA,MAAM;IACN,SAAS;AACX;AAEA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAIjC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACnD,8OAAC,2KAAA,CAAA,OAAyB;QACxB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,0CAA0C;QACvD,GAAG,KAAK;kBAET,cAAA,8OAAC,mBAAmB,QAAQ;YAAC,OAAO;gBAAE;gBAAS;YAAK;sBACjD;;;;;;;;;;;AAIP,YAAY,WAAW,GAAG,2KAAA,CAAA,OAAyB,CAAC,WAAW;AAE/D,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAIrC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IACnD,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE;IAEjC,qBACE,8OAAC,2KAAA,CAAA,OAAyB;QACxB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE;YACb,SAAS,QAAQ,OAAO,IAAI;YAC5B,MAAM,QAAQ,IAAI,IAAI;QACxB,IACA;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;AACA,gBAAgB,WAAW,GAAG,2KAAA,CAAA,OAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1276, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,qKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1307, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/Toolbar.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React from \"react\";\nimport { MousePointer, Type, Pen, Square, Circle, Triangle, Download, Palette, LayoutGrid, PanelLeft, Hand } from \"lucide-react\";\nimport { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\n\nexport type Tool = \"select\" | \"move\" | \"text\" | \"draw\" | \"rect\" | \"circle\" | \"triangle\";\ntype ViewMode = 'edit' | 'reorder';\n\nconst colors = [\"#000000\", \"#ef4444\", \"#22c55e\", \"#3b82f6\", \"#f97316\", \"#a855f7\"];\n\ninterface ToolbarProps {\n  currentTool: Tool;\n  setTool: (tool: Tool) => void;\n  color: string;\n  setColor: (color: string) => void;\n  onDownload: () => void;\n  viewMode: ViewMode;\n  setViewMode: (mode: ViewMode) => void;\n}\n\nconst Toolbar: React.FC<ToolbarProps> = ({\n  currentTool,\n  setTool,\n  color,\n  setColor,\n  onDownload,\n  viewMode,\n  setViewMode\n}) => {\n  const isEditMode = viewMode === 'edit';\n\n  return (\n    <div className=\"flex flex-wrap gap-4 p-1 items-center justify-between w-full\">\n      <div className=\"flex items-center gap-4\">\n        <ToggleGroup \n          type=\"single\" \n          value={viewMode} \n          onValueChange={(value: ViewMode) => { if(value) setViewMode(value); }}\n          className=\"gap-1\"\n        >\n          <ToggleGroupItem value=\"edit\" aria-label=\"Edit document\" title=\"編輯文件\">\n            <PanelLeft className=\"h-4 w-4\" />\n          </ToggleGroupItem>\n          <ToggleGroupItem value=\"reorder\" aria-label=\"Reorder pages\" title=\"調整順序\">\n            <LayoutGrid className=\"h-4 w-4\" />\n          </ToggleGroupItem>\n        </ToggleGroup>\n\n        {isEditMode && (\n          <>\n            <Separator orientation=\"vertical\" className=\"h-8\" />\n            <ToggleGroup \n              type=\"single\" \n              value={currentTool} \n              onValueChange={(value: Tool) => { if(value) setTool(value); }}\n              className=\"gap-1\"\n            >\n              <ToggleGroupItem value=\"select\" aria-label=\"Select tool\" title=\"選取\">\n                <MousePointer className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"move\" aria-label=\"Move tool\" title=\"移動\">\n                <Hand className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"text\" aria-label=\"Text tool\" title=\"文字\">\n                <Type className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"draw\" aria-label=\"Drawing tool\" title=\"手繪\">\n                <Pen className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"rect\" aria-label=\"Rectangle tool\" title=\"矩形\">\n                <Square className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"circle\" aria-label=\"Circle tool\" title=\"圓形\">\n                <Circle className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"triangle\" aria-label=\"Triangle tool\" title=\"三角形\">\n                <Triangle className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n            </ToggleGroup>\n            \n            <Separator orientation=\"vertical\" className=\"h-8\" />\n            \n            <div className=\"flex items-center gap-2\">\n              <Palette className=\"h-5 w-5 text-muted-foreground\" />\n              {colors.map((c) => (\n                <button\n                  key={c}\n                  className={`w-6 h-6 rounded-full cursor-pointer border-2 transition-transform hover:scale-110 ${color === c ? 'border-primary ring-2 ring-primary' : 'border-card'}`}\n                  style={{ backgroundColor: c }}\n                  onClick={() => setColor(c)}\n                  title={c}\n                />\n              ))}\n              <input\n                  type=\"color\"\n                  value={color}\n                  onChange={(e) => setColor(e.target.value)}\n                  className=\"w-8 h-8 p-0 border-none rounded-full cursor-pointer appearance-none bg-transparent\"\n                  style={{backgroundColor: 'transparent'}}\n                />\n            </div>\n          </>\n        )}\n      </div>\n\n      <div>\n         <Button onClick={onDownload}>\n          <Download className=\"mr-2 h-4 w-4\" />\n          下載 PDF\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Toolbar;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1623, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;0BAET,8OAAC,kKAAA,CAAA,QAAqB;gBAAC,WAAU;0BAC/B,cAAA,8OAAC,kKAAA,CAAA,QAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,8OAAC,kKAAA,CAAA,QAAqB;gBAAC,WAAU;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAoB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1675, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1802, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/FloatingToolbar.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React from \"react\";\nimport {\n  ZoomIn,\n  ZoomOut,\n  RotateCcw,\n  RotateCw,\n  Trash2,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\n\ninterface FloatingToolbarProps {\n  zoom: number;\n  onZoomChange: (zoom: number) => void;\n  onRotate: (direction: \"left\" | \"right\") => void;\n  onDelete: () => void;\n  canDelete: boolean;\n}\n\nconst FloatingToolbar: React.FC<FloatingToolbarProps> = ({\n  zoom,\n  onZoomChange,\n  onRotate,\n  onDelete,\n  canDelete,\n}) => {\n  return (\n    <div className=\"fixed bottom-4 left-1/2 -translate-x-1/2 z-20\">\n      <div className=\"flex items-center gap-4 bg-card p-2 rounded-lg shadow-lg border\">\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => onZoomChange(Math.max(0.2, zoom - 0.1))}\n            title=\"Zoom Out\"\n          >\n            <ZoomOut className=\"h-5 w-5\" />\n          </Button>\n          <div className=\"w-32 flex items-center gap-2\">\n            <Slider\n              value={[zoom]}\n              onValueChange={(value) => onZoomChange(value[0])}\n              min={0.1}\n              max={3}\n              step={0.1}\n            />\n            <span className=\"text-sm font-mono w-12 text-center\">\n              {Math.round(zoom * 100)}%\n            </span>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => onZoomChange(Math.min(3, zoom + 0.1))}\n            title=\"Zoom In\"\n          >\n            <ZoomIn className=\"h-5 w-5\" />\n          </Button>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => onRotate(\"left\")}\n            title=\"Rotate Left\"\n          >\n            <RotateCcw className=\"h-5 w-5\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => onRotate(\"right\")}\n            title=\"Rotate Right\"\n          >\n            <RotateCw className=\"h-5 w-5\" />\n          </Button>\n        </div>\n\n        <AlertDialog>\n          <AlertDialogTrigger asChild>\n            <Button\n              variant=\"destructive\"\n              size=\"icon\"\n              disabled={!canDelete}\n              title=\"Delete Current Page\"\n            >\n              <Trash2 className=\"h-5 w-5\" />\n            </Button>\n          </AlertDialogTrigger>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>您確定嗎？</AlertDialogTitle>\n              <AlertDialogDescription>\n                這個操作無法復原。這將會永久地從文件中刪除目前的頁面。\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel>取消</AlertDialogCancel>\n              <AlertDialogAction onClick={onDelete}>繼續</AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      </div>\n    </div>\n  );\n};\n\nexport default FloatingToolbar;\n"],"names":[],"mappings":";;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAZA;;;;;;AAgCA,MAAM,kBAAkD,CAAC,EACvD,IAAI,EACJ,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,SAAS,EACV;IACC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM,aAAa,KAAK,GAAG,CAAC,KAAK,OAAO;4BACjD,OAAM;sCAEN,cAAA,8OAAC,4MAAA,CAAA,UAAO;gCAAC,WAAU;;;;;;;;;;;sCAErB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,kIAAA,CAAA,SAAM;oCACL,OAAO;wCAAC;qCAAK;oCACb,eAAe,CAAC,QAAU,aAAa,KAAK,CAAC,EAAE;oCAC/C,KAAK;oCACL,KAAK;oCACL,MAAM;;;;;;8CAER,8OAAC;oCAAK,WAAU;;wCACb,KAAK,KAAK,CAAC,OAAO;wCAAK;;;;;;;;;;;;;sCAG5B,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM,aAAa,KAAK,GAAG,CAAC,GAAG,OAAO;4BAC/C,OAAM;sCAEN,cAAA,8OAAC,0MAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAItB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM,SAAS;4BACxB,OAAM;sCAEN,cAAA,8OAAC,gNAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;;;;;;sCAEvB,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM,SAAS;4BACxB,OAAM;sCAEN,cAAA,8OAAC,8MAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIxB,8OAAC,2IAAA,CAAA,cAAW;;sCACV,8OAAC,2IAAA,CAAA,qBAAkB;4BAAC,OAAO;sCACzB,cAAA,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,UAAU,CAAC;gCACX,OAAM;0CAEN,cAAA,8OAAC,0MAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAGtB,8OAAC,2IAAA,CAAA,qBAAkB;;8CACjB,8OAAC,2IAAA,CAAA,oBAAiB;;sDAChB,8OAAC,2IAAA,CAAA,mBAAgB;sDAAC;;;;;;sDAClB,8OAAC,2IAAA,CAAA,yBAAsB;sDAAC;;;;;;;;;;;;8CAI1B,8OAAC,2IAAA,CAAA,oBAAiB;;sDAChB,8OAAC,2IAAA,CAAA,oBAAiB;sDAAC;;;;;;sDACnB,8OAAC,2IAAA,CAAA,oBAAiB;4CAAC,SAAS;sDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOpD;uCAEe","debugId":null}},
    {"offset": {"line": 2049, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/ReorderView.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useEffect, useRef } from 'react';\nimport Sortable from 'sortablejs';\n\ninterface ReorderViewProps {\n  thumbnails: string[];\n  onReorder: (oldIndex: number, newIndex: number) => void;\n}\n\nconst ReorderView: React.FC<ReorderViewProps> = ({ thumbnails, onReorder }) => {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const sortableInstance = useRef<Sortable | null>(null);\n\n  useEffect(() => {\n    if (gridRef.current) {\n      sortableInstance.current = Sortable.create(gridRef.current, {\n        animation: 150,\n        ghostClass: 'opacity-50',\n        onEnd: (evt) => {\n          if (evt.oldIndex !== undefined && evt.newIndex !== undefined) {\n            onReorder(evt.oldIndex, evt.newIndex);\n          }\n        },\n      });\n    }\n\n    return () => {\n      sortableInstance.current?.destroy();\n    };\n  }, [onReorder]);\n\n  return (\n    <div className=\"p-8 bg-muted w-full h-full overflow-y-auto\">\n      <div\n        ref={gridRef}\n        className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6\"\n      >\n        {thumbnails.map((src, index) => (\n          <div\n            key={src + index} // Use a more unique key\n            className=\"border-2 rounded-lg cursor-grab bg-card shadow-md transition-shadow hover:shadow-xl hover:border-primary overflow-hidden\"\n          >\n            <img src={src} alt={`Page ${index + 1}`} className=\"w-full h-auto block\" />\n            <div className=\"text-center text-sm font-medium py-2 bg-card text-card-foreground\">\n              p. {index + 1}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ReorderView;\n"],"names":[],"mappings":";;;;AAGA;AACA;AAHA;;;;AAUA,MAAM,cAA0C,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE;IACxE,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IACvC,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAmB;IAEjD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ,OAAO,EAAE;YACnB,iBAAiB,OAAO,GAAG,wJAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,QAAQ,OAAO,EAAE;gBAC1D,WAAW;gBACX,YAAY;gBACZ,OAAO,CAAC;oBACN,IAAI,IAAI,QAAQ,KAAK,aAAa,IAAI,QAAQ,KAAK,WAAW;wBAC5D,UAAU,IAAI,QAAQ,EAAE,IAAI,QAAQ;oBACtC;gBACF;YACF;QACF;QAEA,OAAO;YACL,iBAAiB,OAAO,EAAE;QAC5B;IACF,GAAG;QAAC;KAAU;IAEd,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAU;sBAET,WAAW,GAAG,CAAC,CAAC,KAAK,sBACpB,8OAAC;oBAEC,WAAU;;sCAEV,8OAAC;4BAAI,KAAK;4BAAK,KAAK,CAAC,KAAK,EAAE,QAAQ,GAAG;4BAAE,WAAU;;;;;;sCACnD,8OAAC;4BAAI,WAAU;;gCAAoE;gCAC7E,QAAQ;;;;;;;;mBALT,MAAM;;;;;;;;;;;;;;;AAYvB;uCAEe","debugId":null}},
    {"offset": {"line": 2132, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/components/PdfEditor.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { PDFDocument } from 'pdf-lib';\nimport PdfCanvas from \"./PdfCanvas\";\nimport Sidebar from \"./Sidebar\";\nimport Toolbar, { type Tool } from \"./Toolbar\";\nimport FloatingToolbar from \"./FloatingToolbar\";\nimport ReorderView from \"./ReorderView\";\n\ntype ViewMode = 'edit' | 'reorder';\n\nconst PdfEditor = () => {\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [toolMode, setToolMode] = useState<Tool>(\"select\");\n  const [color, setColor] = useState(\"#000000\");\n  \n  const [zoom, setZoom] = useState(1);\n  const [rotations, setRotations] = useState<{ [key: number]: number }>({});\n  const [scrollToPage, setScrollToPage] = useState<number | null>(null);\n\n  const [viewMode, setViewMode] = useState<ViewMode>('edit');\n  const [thumbnails, setThumbnails] = useState<string[]>([]);\n  const [isLoadingThumbnails, setIsLoadingThumbnails] = useState(false);\n\n  const generateThumbnails = useCallback(async (file: File) => {\n    if (!file) {\n      setThumbnails([]);\n      return;\n    }\n    setIsLoadingThumbnails(true);\n    \n    try {\n      const reader = new FileReader();\n      reader.onload = async () => {\n        try {\n          const data = new Uint8Array(reader.result as ArrayBuffer);\n          const pdfjsLib = await import(\"pdfjs-dist/build/pdf\");\n          pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n\n          const pdf = await pdfjsLib.getDocument({ data }).promise;\n          const thumbs: string[] = [];\n\n          for (let i = 1; i <= pdf.numPages; i++) {\n            const page = await pdf.getPage(i);\n            const pageRotations = rotations[i] || 0;\n            \n            const originalViewport = page.getViewport({ scale: 1, rotation: pageRotations });\n            const fixedWidth = 150;\n            const viewport = page.getViewport({ scale: fixedWidth / originalViewport.width, rotation: pageRotations });\n\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\")!;\n            canvas.width = viewport.width;\n            canvas.height = viewport.height;\n\n            await page.render({ canvasContext: ctx, viewport }).promise;\n            thumbs.push(canvas.toDataURL());\n          }\n          setThumbnails(thumbs);\n        } catch (error) {\n           console.error(\"Error processing PDF for thumbnails:\", error);\n           setThumbnails([]);\n        } finally {\n            setIsLoadingThumbnails(false);\n        }\n      };\n      reader.readAsArrayBuffer(file);\n    } catch (error) {\n      console.error(\"Failed to read file for thumbnails:\", error);\n      setIsLoadingThumbnails(false);\n    }\n  }, [rotations]);\n\n  useEffect(() => {\n    if (pdfFile) {\n      generateThumbnails(pdfFile);\n    }\n  }, [pdfFile, generateThumbnails]);\n\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0] || null;\n    setPdfFile(file);\n    setCurrentPage(1);\n    setTotalPages(0);\n    setZoom(1);\n    setRotations({});\n    setViewMode('edit');\n  };\n  \n  const handleDownload = () => {\n    console.log(\"Download clicked\");\n  }\n\n  const handleRotate = (direction: 'left' | 'right') => {\n    const amount = direction === 'left' ? -90 : 90;\n    setRotations(prev => {\n        const currentRotation = prev[currentPage] || 0;\n        const newRotation = (currentRotation + amount + 360) % 360;\n        return { ...prev, [currentPage]: newRotation };\n    });\n  };\n\n  const handleDeletePage = async () => {\n      if (!pdfFile || totalPages <= 1) return;\n\n      const originalName = pdfFile.name;\n      const existingPdfBytes = await pdfFile.arrayBuffer();\n      const pdfDoc = await PDFDocument.load(existingPdfBytes);\n\n      if (pdfDoc.getPageCount() <= 1) return;\n      \n      const deletedPageNum = currentPage;\n      pdfDoc.removePage(deletedPageNum - 1);\n      \n      const newPdfBytes = await pdfDoc.save();\n      const newPdfFile = new File([newPdfBytes], originalName, { type: 'application/pdf' });\n      \n      const newTotalPages = pdfDoc.getPageCount();\n\n      const newRotations: { [key: number]: number } = {};\n      for (let i = 1; i <= newTotalPages; i++) {\n          const oldPageNum = i < deletedPageNum ? i : i + 1;\n          if (rotations[oldPageNum]) {\n              newRotations[i] = rotations[oldPageNum];\n          }\n      }\n      setRotations(newRotations);\n      \n      setPdfFile(newPdfFile);\n      \n      if (currentPage > newTotalPages) {\n          setCurrentPage(newTotalPages);\n      }\n  };\n  \n  const handlePageSelect = (pageNumber: number) => {\n    setCurrentPage(pageNumber);\n    setScrollToPage(pageNumber);\n  };\n\n  const handleScrollComplete = () => {\n    setScrollToPage(null);\n  };\n  \n  const handleInsertPdf = async (fileToInsert: File, index: number) => {\n    if (!pdfFile || !fileToInsert) return;\n\n    const existingPdfBytes = await pdfFile.arrayBuffer();\n    const newPdfBytes = await fileToInsert.arrayBuffer();\n    const pdfDoc = await PDFDocument.load(existingPdfBytes);\n    const newPdfDoc = await PDFDocument.load(newPdfBytes);\n\n    const copiedPageIndices = await pdfDoc.copyPages(newPdfDoc, newPdfDoc.getPageIndices());\n    \n    for (let i = 0; i < copiedPageIndices.length; i++) {\n        pdfDoc.insertPage(index + i, copiedPageIndices[i]);\n    }\n    \n    const finalPdfBytes = await pdfDoc.save();\n    const newPdfFile = new File([finalPdfBytes], pdfFile.name, { type: 'application/pdf' });\n    \n    const newRotations: { [key: number]: number } = {};\n    const numInsertedPages = newPdfDoc.getPageCount();\n    for (const pageNumStr in rotations) {\n        const pageNum = parseInt(pageNumStr, 10);\n        if (pageNum <= index) {\n            newRotations[pageNum] = rotations[pageNum];\n        } else {\n            newRotations[pageNum + numInsertedPages] = rotations[pageNum];\n        }\n    }\n    setRotations(newRotations);\n    setPdfFile(newPdfFile);\n  };\n\n  const handleInsertBlankPage = async (index: number) => {\n    if (!pdfFile) return;\n\n    const existingPdfBytes = await pdfFile.arrayBuffer();\n    const pdfDoc = await PDFDocument.load(existingPdfBytes);\n\n    let pageSize: [number, number] = [595.28, 841.89];\n    if (index > 0 && index <= pdfDoc.getPageCount()) {\n        const prevPage = pdfDoc.getPage(index - 1);\n        const { width, height } = prevPage.getSize();\n        pageSize = [width, height];\n    }\n\n    pdfDoc.insertPage(index, pageSize);\n\n    const finalPdfBytes = await pdfDoc.save();\n    const newPdfFile = new File([finalPdfBytes], pdfFile.name, { type: 'application/pdf' });\n\n    const newRotations: { [key: number]: number } = {};\n    for (const pageNumStr in rotations) {\n        const pageNum = parseInt(pageNumStr, 10);\n        if (pageNum <= index) {\n            newRotations[pageNum] = rotations[pageNum];\n        } else {\n            newRotations[pageNum + 1] = rotations[pageNum];\n        }\n    }\n    setRotations(newRotations);\n    setPdfFile(newPdfFile);\n  };\n\n  const handleReorderPages = async (oldIndex: number, newIndex: number) => {\n    if (!pdfFile || oldIndex === newIndex) return;\n  \n    const existingPdfBytes = await pdfFile.arrayBuffer();\n    const pdfDoc = await PDFDocument.load(existingPdfBytes);\n  \n    const [movedPage] = await pdfDoc.copyPages(pdfDoc, [oldIndex]);\n    pdfDoc.removePage(oldIndex);\n    pdfDoc.insertPage(newIndex, movedPage);\n  \n    const finalPdfBytes = await pdfDoc.save();\n    const newPdfFile = new File([finalPdfBytes], pdfFile.name, { type: 'application/pdf' });\n    \n    setPdfFile(newPdfFile);\n  };\n\n  const renderContent = () => {\n    if (!pdfFile) {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground p-10 text-center\">\n          <h2 className=\"text-xl font-semibold mb-2\">開始編輯您的 PDF</h2>\n          <p className=\"mb-4\">從您的電腦上傳一個檔案，即可開始。</p>\n          <label className=\"bg-primary text-primary-foreground hover:bg-primary/90 rounded-md px-4 py-2 cursor-pointer\">\n            選擇檔案\n            <input type=\"file\" accept=\"application/pdf\" onChange={handleFileChange} className=\"hidden\" />\n          </label>\n        </div>\n      );\n    }\n\n    if (viewMode === 'reorder') {\n      return <ReorderView thumbnails={thumbnails} onReorder={handleReorderPages} />;\n    }\n\n    return (\n      <div className=\"flex w-full h-full\">\n        <div className=\"w-[15%] flex-shrink-0 bg-card border-r\">\n          <Sidebar\n            currentPage={currentPage}\n            onPageClick={handlePageSelect}\n            onInsertPdf={handleInsertPdf}\n            onInsertBlankPage={handleInsertBlankPage}\n            thumbnails={thumbnails}\n            isLoading={isLoadingThumbnails}\n          />\n        </div>\n        <div className=\"flex-grow flex flex-col relative\">\n          <div className=\"flex-grow bg-background shadow-inner overflow-hidden\">\n            <PdfCanvas\n              pdfFile={pdfFile}\n              onTotalPages={setTotalPages}\n              onCurrentPageChange={setCurrentPage}\n              zoom={zoom}\n              rotations={rotations}\n              scrollToPage={scrollToPage}\n              onScrollComplete={handleScrollComplete}\n              toolMode={toolMode}\n            />\n          </div>\n          {pdfFile && (\n            <FloatingToolbar\n              zoom={zoom}\n              onZoomChange={setZoom}\n              onRotate={handleRotate}\n              onDelete={handleDeletePage}\n              canDelete={totalPages > 1}\n            />\n          )}\n        </div>\n      </div>\n    );\n  };\n\n\n  return (\n    <div className=\"w-full h-full flex flex-col bg-muted/40\">\n      <div className=\"bg-card border-b p-2\">\n        <Toolbar \n          currentTool={toolMode}\n          setTool={setToolMode}\n          color={color}\n          setColor={setColor}\n          onDownload={handleDownload}\n          viewMode={viewMode}\n          setViewMode={setViewMode}\n        />\n      </div>\n      <div className=\"flex-grow overflow-hidden\">\n        {renderContent()}\n      </div>\n    </div>\n  );\n};\n\nexport default PdfEditor;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2540, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/edit-pdf/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Button } from \"@/components/ui/button\";\nimport { Menubar, MenubarContent, MenubarItem, MenubarMenu, MenubarSub, MenubarSubContent, MenubarSubTrigger, MenubarTrigger } from \"@/components/ui/menubar\";\nimport { LogIn, LogOut, UserCircle, MenuSquare, ArrowRightLeft, Edit, FileUp, ListOrdered, Trash2, Combine, FileText, FileSpreadsheet, LucidePresentation, Code, FileImage, FileMinus, Droplets, ScanText, Scissors, Sparkles } from 'lucide-react';\nimport PdfEditor from \"./components/PdfEditor\";\n\n// Simplified translations for the header\nconst translations = {\n  en: {\n    appTitle: 'Pdf Solution',\n    loggedInAs: 'Logged in as User',\n    login: 'Login',\n    logout: 'Logout',\n    guest: 'Guest',\n    pdfEditMenu: 'PDF Edit',\n    pdfConvertMenu: 'PDF Convert',\n    mergePdf: 'Merge PDF',\n    splitPdf: 'Split PDF',\n    reorderPdfPages: 'Reorder Pages',\n    addWatermark: 'Add Watermark',\n    convertToPdf: 'Convert to PDF',\n    convertFromPdf: 'Convert from PDF',\n    wordToPdf: 'WORD to PDF',\n    excelToPdf: 'EXCEL to PDF',\n    pptToPdf: 'PPT to PDF',\n    htmlToPdf: 'HTML to PDF',\n    jpgToPdf: 'JPG to Image',\n    pdfToWord: 'PDF to WORD',\n    pdfToExcel: 'PDF to EXCEL',\n    pdfToPpt: 'PDF to PPT',\n    pdfToHtml: 'PDF to HTML',\n    pdfToJpg: 'PDF to Image',\n    pdfToOcr: 'PDF with OCR',\n    proMode: 'Professional Mode',\n    featureNotAvailableForGuests: \"This feature is not available for guest users. Please log in to use it.\",\n  },\n  zh: {\n    appTitle: 'Pdf Solution',\n    loggedInAs: '已登入為使用者',\n    login: '登入',\n    logout: '登出',\n    guest: '訪客',\n    pdfEditMenu: 'PDF編輯',\n    pdfConvertMenu: 'PDF轉換',\n    mergePdf: '合併PDF',\n    splitPdf: '拆分PDF',\n    reorderPdfPages: '變換順序',\n    addWatermark: '添加浮水印',\n    convertToPdf: '轉換為PDF',\n    convertFromPdf: '從PDF轉換',\n    wordToPdf: 'WORD轉PDF',\n    excelToPdf: 'EXCEL轉PDF',\n    pptToPdf: 'PPT轉PDF',\n    htmlToPdf: 'HTML轉PDF',\n    jpgToPdf: 'JPG轉PDF',\n    pdfToWord: 'PDF轉WORD',\n    pdfToExcel: 'PDF轉EXCEL',\n    pdfToPpt: 'PDF轉PPT',\n    pdfToHtml: 'PDF轉HTML',\n    pdfToJpg: 'PDF轉圖片',\n    pdfToOcr: 'PDF光學掃描(OCR)',\n    proMode: '專業模式',\n    featureNotAvailableForGuests: \"訪客無法使用此功能，請登入後再試。\",\n  },\n};\n\n\nexport default function EditPdfPage() {\n  const router = useRouter();\n  const { toast } = useToast();\n  const [currentLanguage, setCurrentLanguage] = useState<'en' | 'zh'>('zh');\n  const [texts, setTexts] = useState(translations.zh);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    setTexts(translations[currentLanguage] || translations.en);\n  }, [currentLanguage]);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const loggedInStatus = localStorage.getItem('isLoggedIn') === 'true';\n      setIsLoggedIn(loggedInStatus);\n    }\n  }, []);\n\n  const updateLanguage = (lang: 'en' | 'zh') => {\n    setCurrentLanguage(lang);\n  };\n  \n  const handleLogout = () => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('isLoggedIn');\n    }\n    setIsLoggedIn(false);\n    toast({ title: texts.logout, description: currentLanguage === 'zh' ? \"您已成功登出。\" : \"You have been logged out successfully.\" });\n  };\n  \n  return (\n    <div className=\"flex flex-col h-screen bg-background\">\n       <header className=\"p-0 border-b bg-card sticky top-0 z-40 flex-shrink-0\">\n        <div className=\"container mx-auto flex justify-between items-center h-16\">\n            <div className=\"flex items-center gap-6\">\n                <h1 className=\"text-xl font-bold text-primary flex items-center cursor-pointer\" onClick={() => router.push('/')}>\n                    <MenuSquare className=\"mr-2 h-6 w-6\"/> {texts.appTitle}\n                </h1>\n                 <Menubar className=\"border-none shadow-none bg-transparent\">\n                    <MenubarMenu>\n                        <MenubarTrigger><Edit className=\"mr-2 h-4 w-4\" />{texts.pdfEditMenu}</MenubarTrigger>\n                        <MenubarContent>\n                            <MenubarItem onClick={() => router.push('/merge-pdf')}><Combine className=\"mr-2 h-4 w-4\" />{texts.mergePdf}</MenubarItem>\n                            <MenubarItem onClick={() => router.push('/split-pdf')}><Scissors className=\"mr-2 h-4 w-4\" />{texts.splitPdf}</MenubarItem>\n                            <MenubarItem onClick={() => router.push('/edit-pdf')}><ListOrdered className=\"mr-2 h-4 w-4\" />{texts.reorderPdfPages}</MenubarItem>\n                            <MenubarItem onClick={() => router.push('/edit-pdf')}><Droplets className=\"mr-2 h-4 w-4\" />{texts.addWatermark}</MenubarItem>\n                        </MenubarContent>\n                    </MenubarMenu>\n                    <MenubarMenu>\n                        <MenubarTrigger><ArrowRightLeft className=\"mr-2 h-4 w-4\" />{texts.pdfConvertMenu}</MenubarTrigger>\n                        <MenubarContent>\n                            <MenubarSub>\n                                <MenubarSubTrigger><FileUp className=\"mr-2 h-4 w-4\" />{texts.convertToPdf}</MenubarSubTrigger>\n                                <MenubarSubContent>\n                                    <MenubarItem onClick={() => router.push('/word-to-pdf')}><FileText className=\"mr-2 h-4 w-4\" />{texts.wordToPdf}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/excel-to-pdf')}><FileSpreadsheet className=\"mr-2 h-4 w-4\" />{texts.excelToPdf}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/ppt-to-pdf')}><LucidePresentation className=\"mr-2 h-4 w-4\" />{texts.pptToPdf}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/html-to-pdf')}><Code className=\"mr-2 h-4 w-4\" />{texts.htmlToPdf}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/jpg-to-pdf')}><FileImage className=\"mr-2 h-4 w-4\" />{texts.jpgToPdf}</MenubarItem>\n                                </MenubarSubContent>\n                            </MenubarSub>\n                            <MenubarSub>\n                                <MenubarSubTrigger><FileMinus className=\"mr-2 h-4 w-4\" />{texts.convertFromPdf}</MenubarSubTrigger>\n                                <MenubarSubContent>\n                                    <MenubarItem onClick={() => router.push('/pdf-to-word')}><FileText className=\"mr-2 h-4 w-4\" />{texts.pdfToWord}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/pdf-to-excel')}><FileSpreadsheet className=\"mr-2 h-4 w-4\" />{texts.pdfToExcel}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/pdf-to-ppt')}><LucidePresentation className=\"mr-2 h-4 w-4\" />{texts.pdfToPpt}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/pdf-to-html')}><Code className=\"mr-2 h-4 w-4\" />{texts.pdfToHtml}</MenubarItem>\n                                    <MenubarItem onClick={() => router.push('/pdf-to-image')}><FileImage className=\"mr-2 h-4 w-4\" />{texts.pdfToJpg}</MenubarItem>\n                                    <MenubarItem onClick={() => { if(isLoggedIn) router.push('/pdf-to-ocr'); else toast({title: '功能無法使用', description: texts.featureNotAvailableForGuests})}}><ScanText className=\"mr-2 h-4 w-4\" />{texts.pdfToOcr}</MenubarItem>\n                                </MenubarSubContent>\n                            </MenubarSub>\n                        </MenubarContent>\n                    </MenubarMenu>\n                    <MenubarMenu>\n                        <MenubarTrigger onClick={() => router.push('/edit-pdf')} className=\"text-primary hover:text-primary focus:text-primary ring-1 ring-primary/50\" disabled>\n                            <Sparkles className=\"mr-2 h-4 w-4\" />\n                            {texts.proMode}\n                        </MenubarTrigger>\n                    </MenubarMenu>\n                </Menubar>\n            </div>\n            <div className=\"flex items-center gap-4\">\n                <div className=\"flex gap-2\">\n                    <Button variant={currentLanguage === 'en' ? \"secondary\" : \"outline\"} size=\"sm\" onClick={() => updateLanguage('en')}>English</Button>\n                    <Button variant={currentLanguage === 'zh' ? \"secondary\" : \"outline\"} size=\"sm\" onClick={() => updateLanguage('zh')}>中文</Button>\n                </div>\n                 {isLoggedIn ? (\n                    <div className=\"flex items-center gap-2\">\n                        <UserCircle className=\"h-5 w-5 text-muted-foreground\" />\n                        <span className=\"text-sm text-muted-foreground\">{texts.loggedInAs}</span>\n                        <Button variant=\"outline\" size=\"sm\" onClick={handleLogout}>\n                            <LogOut className=\"mr-2 h-4 w-4\"/> {texts.logout}\n                        </Button>\n                    </div>\n                ) : (\n                   <div className=\"flex items-center gap-2\">\n                        <UserCircle className=\"h-5 w-5 text-muted-foreground\" />\n                         <span className=\"text-sm text-muted-foreground\">{texts.guest}</span>\n                        <Link href=\"/login\" passHref>\n                            <Button variant=\"ghost\" size=\"sm\">\n                                <LogIn className=\"mr-2 h-4 w-4\"/> {texts.login}\n                            </Button>\n                        </Link>\n                    </div>\n                )}\n            </div>\n        </div>\n      </header>\n      <main className=\"flex-grow overflow-hidden\">\n        <PdfEditor />\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}